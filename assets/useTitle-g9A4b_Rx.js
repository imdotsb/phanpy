import{L as Qa,O as eo,E as to,P as vn,Q as da,U as no,V as ao,x as ma,i as oo,W as ha,_ as ne,p as pe,a as e,h as ee,u as He,X as io,e as ro,N as pa,Y as so,Z as co,M as xe,$ as lo,S as uo,g as G,w as bn,a0 as mo,a1 as yt,a2 as ho,a3 as po,a4 as fo,a5 as go,D as vo,a6 as bo,a7 as yo,a8 as _o,a9 as ko,aa as wo,ab as Eo,ac as xo,ad as To,ae as Lo,m as fa,af as Ao,f as ga,ag as Co,T as yn,F as Fe,y as fn,ah as Un,t as So,b as wt,q as Fo,r as $o,d as nn,J as va,C as Po,ai as Io,aj as Ro,ak as jn,al as Do,am as Hn,n as Mo,z as Kn}from"./vendor-n7HZXGTm.js";(function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))s(o);new MutationObserver(o=>{for(const r of o)if(r.type==="childList")for(const c of r.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&s(c)}).observe(document,{childList:!0,subtree:!0});function a(o){const r={};return o.integrity&&(r.integrity=o.integrity),o.referrerPolicy&&(r.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?r.credentials="include":o.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function s(o){if(o.ep)return;o.ep=!0;const r=a(o);fetch(o.href,r)}})();function ba(t){const n=z.local.getJSON("accounts")||[];return n.find(a=>a.info.id===t)||n[0]}function Oo(t){return(z.local.getJSON("accounts")||[]).find(a=>a.accessToken===t)}function zo(t){return(z.local.getJSON("accounts")||[]).find(a=>a.instanceURL===t)}function Ht(){window.__IGNORE_GET_ACCOUNT_ERROR__;const t=z.session.get("currentAccount");return ba(t)}function zt(){const t=Ht(),{instanceURL:n,info:{id:a}}=t;return`${a}@${n}`}function No(t){const n=z.local.getJSON("accounts")||[],a=n.find(s=>s.info.id===t.info.id);a?(a.info=t.info,a.instanceURL=t.instanceURL,a.accessToken=t.accessToken,a.vapidKey=t.vapidKey):n.push(t),z.local.setJSON("accounts",n),z.session.set("currentAccount",t.info.id)}function Lr(t){const n=z.local.getJSON("accounts")||[],a=n.find(s=>s.info.id===t.id);a&&(a.info.displayName!==t.displayName||a.info.avatar!==t.avatar||a.info.avatar_static!==t.avatar_static)&&(a.info={...a.info,...t},z.local.setJSON("accounts",n))}let an=null;function ya(){if(an)return an;try{const t=Ht(),n=z.local.getJSON("instances"),a=t.instanceURL.toLowerCase();return an=n[a]}catch(t){return alert(`Failed to load instance configuration. Please try again.

${t}`),z.local.del("instances"),location.reload(),{}}}function Bo(t){const{configuration:n,maxMediaAttachments:a,maxTootChars:s,pleroma:o,pollLimits:r}=t,c=(n==null?void 0:n.statuses)||{};a&&(c.maxMediaAttachments??(c.maxMediaAttachments=a)),s&&(c.maxCharacters??(c.maxCharacters=s));const u=(n==null?void 0:n.polls)||{};return r&&(u.maxCharactersPerOption??(u.maxCharactersPerOption=r.maxOptionChars),u.maxExpiration??(u.maxExpiration=r.maxExpiration),u.maxOptions??(u.maxOptions=r.maxOptions),u.minExpiration??(u.minExpiration=r.minExpiration)),{...n,statuses:c,polls:u}}function Vo(){const t=ya();return Bo(t)}const Ke={get:t=>{try{return localStorage.getItem(t)}catch{return null}},getJSON:t=>{try{return JSON.parse(Ke.get(t))}catch{return null}},set:(t,n)=>{try{return localStorage.setItem(t,n)}catch{return null}},setJSON:(t,n)=>{try{return Ke.set(t,JSON.stringify(n))}catch{return null}},del:t=>{try{return localStorage.removeItem(t)}catch{return null}}},gn={get:t=>{try{return sessionStorage.getItem(t)}catch{return null}},getJSON:t=>{try{return JSON.parse(gn.get(t))}catch{return null}},set:(t,n)=>{try{return sessionStorage.setItem(t,n)}catch{return null}},setJSON:(t,n)=>{try{return gn.set(t,JSON.stringify(n))}catch{return null}},del:t=>{try{return sessionStorage.removeItem(t)}catch{return null}}},Uo={get:t=>{try{return Ke.getJSON(t)[zt()]}catch{return null}},set:(t,n)=>{try{const a=Ke.getJSON(t)||{};return a[zt()]=n,Ke.setJSON(t,a)}catch{return null}},del:t=>{try{const n=Ke.getJSON(t)||{};return delete n[zt()],Ke.setJSON(t,n)}catch{return null}}},z={local:Ke,session:gn,account:Uo},Nt="mastodon.social",Vt={},$e={};window.__ACCOUNT_APIS__=$e;let be;function Ue({instance:t,accessToken:n}){/^https?:\/\//.test(t)&&(t=t.replace(/^https?:\/\//,"").replace(/\/+$/,"").toLowerCase());const a=t?`https://${t}`:`https://${Nt}`,o={masto:Qa({url:a,accessToken:n,timeout:3e4}),instance:t,accessToken:n};return Vt[t]=o,$e[t]||($e[t]={}),n&&($e[t][n]=o),o}async function Ar(t,n){const{masto:a,accessToken:s}=t;let o;try{o=await a.v2.instance.fetch()}catch{}if(!o)try{o=await a.v1.instance.fetch()}catch{}if(!o)return;const{uri:r,urls:{streamingApi:c}={},domain:u,configuration:{urls:{streaming:d}={}}={}}=o,g=z.local.getJSON("instances")||{};if((r||u)&&(g[(u||r).replace(/^https?:\/\//,"").replace(/\/+$/,"").toLowerCase()]=o),n&&(g[n.toLowerCase()]=o),z.local.setJSON("instances",g),"WebSocket"in window&&(c||d)){const p=eo({streamingApiUrl:d||c,accessToken:s,implementation:WebSocket});t.streaming=p}}async function Cr(t,n,a,s){const{masto:o}=t,r=await o.v1.accounts.verifyCredentials();z.session.set("currentAccount",r.id),No({info:r,instanceURL:n.toLowerCase(),accessToken:a,vapidKey:s})}async function Sr(t){try{const{masto:n}=t,a=await n.v1.preferences.fetch();z.account.set("preferences",a)}catch{}}function Ge({instance:t,accessToken:n,accountID:a,account:s}={}){var d,g,m,p,h;if(t&&(t=t.toLowerCase().trim()),t&&n){const f=((d=$e[t])==null?void 0:d[n])||Ue({instance:t,accessToken:n}),{masto:b,streaming:v}=f;return{masto:b,streaming:v,client:f,authenticated:!0,instance:t}}if(n)for(const f in $e)if($e[f][n]){const b=$e[f][n],{masto:v,streaming:k}=b;return{masto:v,streaming:k,client:b,authenticated:!0,instance:f}}else{const b=Oo(n);if(b){const v=b.accessToken,k=b.instanceURL.toLowerCase().trim(),E=Ue({instance:k,accessToken:v}),{masto:_,streaming:y}=E;return{masto:_,streaming:y,client:E,authenticated:!0,instance:k}}else throw new Error("Access token not found")}if(s||a)if(s=s||ba(a),s){const f=s.accessToken,b=s.instanceURL.toLowerCase().trim(),v=((g=$e[b])==null?void 0:g[f])||Ue({instance:b,accessToken:f}),{masto:k,streaming:E}=v;return{masto:k,streaming:E,client:v,authenticated:!0,instance:b}}else throw new Error(`Account ${a} not found`);const o=Ht();if(t){if((be==null?void 0:be.instance)===t)return{masto:be.masto,streaming:be.streaming,client:be,authenticated:!0,instance:t};if((o==null?void 0:o.instanceURL)===t){const{accessToken:_}=o;return be=((m=$e[t])==null?void 0:m[_])||Ue({instance:t,accessToken:_}),{masto:be.masto,streaming:be.streaming,client:be,authenticated:!0,instance:t}}const f=zo(t);if(f){const _=f.accessToken,y=((p=$e[t])==null?void 0:p[_])||Ue({instance:t,accessToken:_}),{masto:S,streaming:F}=y;return{masto:S,streaming:F,client:y,authenticated:!0,instance:t}}const b=Vt[t]||Ue({instance:t}),{masto:v,streaming:k,accessToken:E}=b;return{masto:v,streaming:k,client:b,authenticated:!!E,instance:t}}if(be)return{masto:be.masto,streaming:be.streaming,client:be,authenticated:!0,instance:be.instance};if(o){const{accessToken:f,instanceURL:b}=o;return be=((h=$e[b])==null?void 0:h[f])||Ue({instance:b,accessToken:f}),{masto:be.masto,streaming:be.streaming,client:be,authenticated:!0,instance:b}}const r=Vt[Nt]||Ue({instance:Nt}),{masto:c,streaming:u}=r;return{masto:c,streaming:u,client:r,authenticated:!1,instance:Nt}}window.__API__={currentAccountApi:be,apis:Vt,accountApis:$e};window._showToast=Ee;function Ee(t){typeof t=="string"&&(t={text:t});const{onClick:n,delay:a,...s}=t,o=to({className:`${n||t.destination?"shiny-pill":""}`,gravity:"bottom",position:"center",...s,onClick:()=>{n==null||n(o)}});return a?setTimeout(()=>{o.showToast()},a):o.showToast(),o}function _a(t){try{const{pathname:n,hash:a}=new URL(t);return/^\/.*\/\d+$/i.test(n)||/^\/(@[^/]+|users\/[^/]+)\/(statuses|posts)\/\w+\/?$/i.test(n)||/^\/notes\/[a-z0-9]+$/i.test(n)||/^\/(notice|objects)\/[a-z0-9-]+$/i.test(n)||/#\/[^\/]+\.[^\/]+\/s\/.+/i.test(a)}catch{return!1}}window._moize=vn;function Ye(t,n={}){return vn(t,{...n,maxSize:50,isDeepEqual:!0})}function Kt(t,n={}){return Ye(t,{isPromise:!0,...n})}function jo(t,n){let a=[],s=!1;function o(){if(a.length===0){s=!1;return}a.shift()(),setTimeout(o,n)}return function(...r){const c=()=>t.apply(this,r);a.push(c),s||(s=!0,setTimeout(o,n))}}const Ho=da({limit:1,interval:1e3}),Ko=/(twitter|github)\.com/i,qn={};function qo(t,n){var v;const a=no(M);if(Ko.test(n)||qn[n])return;if(new RegExp(t+"/").test((v=a.unfurledLinks[n])==null?void 0:v.url))return Promise.resolve(a.unfurledLinks[n]);let o,r=n;/\/\/elk\.[^\/]+\/[^\/]+\.[^\/]+/i.test(r)&&(r=r.replace(/elk\.[^\/]+\//i,"")),/\/\/trunks\.[^\/]+\/status\/[^\/]+\.[^\/]+/i.test(r)&&(r=r.replace(/trunks\.[^\/]+\/status\//i,"")),/\/#\/[^\/]+\.[^\/]+\/s\/.+/i.test(r)&&(r=`https://${r.split("/#/")[1].replace(/\/s\//i,"/@fakeUsername/")}`);let c;try{c=new URL(r)}catch{return}const u=c.hostname,d=c.pathname,m=/\/@([^@\/]+)@?([^\/]+)?\/(\d+)$/i.exec(d);if(m){const k=m[3],{masto:E}=Ge({instance:u});o=E.v1.statuses.$select(k).fetch().then(_=>{if(_!=null&&_.id)return{status:_,instance:u};throw new Error("No results")})}const{masto:p}=Ge({instance:t}),h=p.v2.search.fetch({q:r,type:"statuses",resolve:!0,limit:1}).then(k=>{if(k.statuses.length>0)return{status:k.statuses[0],instance:t};throw new Error("No results")});function f(k){const{status:E,instance:_}=k,{id:y}=E,S=`/${_}/s/${y}`,F={id:y,instance:_,url:S};return M.unfurledLinks[n]=F,Ie(E,_,{skipThreading:!0}),F}function b(k){qn[n]=!0}return o?Promise.race([h,new Promise((E,_)=>setTimeout(_,3e3))]).catch(()=>o.catch(()=>h)).then(f).catch(b):h.then(f).catch(b)}const ka=Ho(qo),oe=ao({appVersion:{},prevLocation:null,currentLocation:null,statuses:{},statusThreadNumber:{},home:[],homeNew:[],homeLast:null,homeLastFetchTime:null,notifications:[],notificationsLast:null,notificationsNew:[],notificationsShowNew:!1,notificationsLastFetchTime:null,reloadStatusPage:0,reloadGenericAccounts:{id:null,counter:0},spoilers:{},spoilersMedia:{},scrollPositions:{},unfurledLinks:{},statusQuotes:{},statusFollowedTags:{},accounts:{},routeNotification:null,showCompose:!1,showSettings:!1,showAccount:!1,showAccounts:!1,showDrafts:!1,showMediaModal:!1,showShortcutsSettings:!1,showKeyboardShortcutsHelp:!1,showGenericAccounts:!1,showMediaAlt:!1,showEmbedModal:!1,shortcuts:[],settings:{autoRefresh:!1,shortcutsViewMode:null,shortcutsColumnsMode:!1,boostsCarousel:!0,contentTranslation:!0,contentTranslationTargetLanguage:null,contentTranslationHideLanguages:[],contentTranslationAutoInline:!1,mediaAltGenerator:!1,cloakMode:!1}}),M=oe;function Fr(){oe.notificationsLast=z.account.get("notificationsLast")||null,oe.shortcuts=z.account.get("shortcuts")??[],oe.settings.autoRefresh=z.account.get("settings-autoRefresh")??!1,oe.settings.shortcutsViewMode=z.account.get("settings-shortcutsViewMode")??null,z.account.get("settings-shortcutsColumnsMode")&&(oe.settings.shortcutsColumnsMode=!0),oe.settings.boostsCarousel=z.account.get("settings-boostsCarousel")??!0,oe.settings.contentTranslation=z.account.get("settings-contentTranslation")??!0,oe.settings.contentTranslationTargetLanguage=z.account.get("settings-contentTranslationTargetLanguage")||null,oe.settings.contentTranslationHideLanguages=z.account.get("settings-contentTranslationHideLanguages")||[],oe.settings.contentTranslationAutoInline=z.account.get("settings-contentTranslationAutoInline")??!1,oe.settings.mediaAltGenerator=z.account.get("settings-mediaAltGenerator")??!1,oe.settings.cloakMode=z.account.get("settings-cloakMode")??!1}ma(oe,"notificationsLast",t=>{z.account.set("notificationsLast",oe.notificationsLast)});oo(oe,t=>{for(const[n,a,s,o]of t)a.join(".")==="settings.autoRefresh"&&z.account.set("settings-autoRefresh",!!s),a.join(".")==="settings.boostsCarousel"&&z.account.set("settings-boostsCarousel",!!s),a.join(".")==="settings.shortcutsViewMode"&&z.account.set("settings-shortcutsViewMode",s),a.join(".")==="settings.contentTranslation"&&z.account.set("settings-contentTranslation",!!s),a.join(".")==="settings.contentTranslationAutoInline"&&z.account.set("settings-contentTranslationAutoInline",!!s),a.join(".")==="settings.contentTranslationTargetLanguage"&&z.account.set("settings-contentTranslationTargetLanguage",s),/^settings\.contentTranslationHideLanguages/i.test(a.join("."))&&z.account.set("settings-contentTranslationHideLanguages",oe.settings.contentTranslationHideLanguages),a.join(".")==="settings.mediaAltGenerator"&&z.account.set("settings-mediaAltGenerator",!!s),(a==null?void 0:a[0])==="shortcuts"&&z.account.set("shortcuts",oe.shortcuts),a.join(".")==="settings.cloakMode"&&z.account.set("settings-cloakMode",!!s)});function Re(t,n){if(t)return n?`${n}/${t}`:t}function wa(t,n){if(n){const a=Re(t,n);return oe.statuses[a]}return oe.statuses[t]}function Ie(t,n,a){typeof n=="object"&&(a=n,n=null);const{override:s=!0,skipThreading:o=!1,skipUnfurling:r=!1}=a||{};if(!t)return;const c=wa(t.id,n);!s&&c||ha(t,c)||(queueMicrotask(()=>{const u=Re(t.id,n);if(c!=null&&c._pinned&&(t._pinned=c._pinned),oe.statuses[u]=t,t.reblog){const d=Re(t.reblog.id,n);oe.statuses[d]=t.reblog}}),o||queueMicrotask(()=>{Go(t.reblog||t,n)}),r||queueMicrotask(()=>{Yo(t.reblog||t,n)}))}function Wo(t,n){const{masto:a,instance:s}=Ge({instance:n});let o=0;async function r(c,u=0){const{inReplyToId:d,inReplyToAccountId:g}=c;if(!d||g!==c.account.id)return[c];if(d&&g!==c.account.id)throw"Not a thread";const m=Re(d,s);let p=oe.statuses[m];if(!p){if(o++>3)throw"Too many fetches for thread";await new Promise(h=>setTimeout(h,500*o)),p=await Jo(d,a),Ie(p,s,{skipThreading:!0})}return[...await r(p,++u),c]}return r(t).then(c=>{c.length>1&&c.forEach((u,d)=>{const g=Re(u.id,s);oe.statusThreadNumber[g]=d+1})}).catch(c=>{})}const Go=jo(Wo,100),Wn=document.createElement("div");function Yo(t,n){const{instance:a}=Ge(),s=t==null?void 0:t.content;if(/<a/i.test(s)){const r=Re(t==null?void 0:t.id,n);Wn.innerHTML=s,[...Wn.querySelectorAll("a[href]:not(.u-url):not(.mention):not(.hashtag)")].filter(u=>{const d=u.href;return!(d===t.url||d===t.uri)&&_a(d)}).forEach((u,d)=>{ka(a,u.href).then(g=>{g&&r&&(Array.isArray(oe.statusQuotes[r])||(oe.statusQuotes[r]=[]),oe.statusQuotes[r][d]||oe.statusQuotes[r].splice(d,0,g))})})}}const Jo=Kt((t,n)=>n.v1.statuses.$select(t).fetch());function Zo(t,n,a,s){const o=ne(t);pe(()=>{o.current=t},[t,a]),pe(()=>{!s||n===null||n===!1||o.current()},[s]),pe(()=>{if(n===null||n===!1)return;const c=setInterval(()=>o.current(),n);return()=>clearInterval(c)},[n])}function Ea(t){const n=new URL("/compose/",window.location),{width:a,height:s}=window.screen,o=Math.max(0,(a-600)/2),r=Math.max(0,(s-450)/2),c=Math.min(a,600),u=Math.min(s,450),d=(t==null?void 0:t.uid)||Math.random(),g=window.open(n,"compose"+d,`width=${c},height=${u},left=${o},top=${r}`);return g?g.__COMPOSE__=t:alert("Looks like your browser is blocking popups."),g}const Xo="modulepreload",Qo=function(t,n){return new URL(t,n).href},Gn={},w=function(n,a,s){let o=Promise.resolve();if(a&&a.length>0){const r=document.getElementsByTagName("link");o=Promise.all(a.map(c=>{if(c=Qo(c,s),c in Gn)return;Gn[c]=!0;const u=c.endsWith(".css"),d=u?'[rel="stylesheet"]':"";if(!!s)for(let p=r.length-1;p>=0;p--){const h=r[p];if(h.href===c&&(!u||h.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${c}"]${d}`))return;const m=document.createElement("link");if(m.rel=u?"stylesheet":Xo,u||(m.as="script",m.crossOrigin=""),m.href=c,document.head.appendChild(m),u)return new Promise((p,h)=>{m.addEventListener("load",p),m.addEventListener("error",()=>h(new Error(`Unable to preload CSS for ${c}`)))})}))}return o.then(()=>n()).catch(r=>{const c=new Event("vite:preloadError",{cancelable:!0});if(c.payload=r,window.dispatchEvent(c),!c.defaultPrevented)throw r})},xa={x:()=>w(()=>import("./icons/close-line-YTE7hIJE.js"),__vite__mapDeps([]),import.meta.url),heart:()=>w(()=>import("./icons/heart-line-VwvWYh8h.js"),__vite__mapDeps([]),import.meta.url),bookmark:()=>w(()=>import("./icons/bookmark-line-D6jQ7QFs.js"),__vite__mapDeps([]),import.meta.url),"check-circle":()=>w(()=>import("./icons/check-circle-line-sE41WGxF.js"),__vite__mapDeps([]),import.meta.url),"x-circle":()=>w(()=>import("./icons/close-circle-line-qd3g541O.js"),__vite__mapDeps([]),import.meta.url),transfer:()=>w(()=>import("./icons/transfer-4-line-Q9QJoxz3.js"),__vite__mapDeps([]),import.meta.url),rocket:()=>w(()=>import("./icons/rocket-line-rZbVYYCZ.js"),__vite__mapDeps([]),import.meta.url),"arrow-left":()=>w(()=>import("./icons/arrow-left-line-_YC6-XGG.js"),__vite__mapDeps([]),import.meta.url),"arrow-right":()=>w(()=>import("./icons/arrow-right-line-PypiEqpu.js"),__vite__mapDeps([]),import.meta.url),"arrow-up":()=>w(()=>import("./icons/arrow-up-line-fcuKqhVE.js"),__vite__mapDeps([]),import.meta.url),"arrow-down":()=>w(()=>import("./icons/arrow-down-line-0TRJUP_K.js"),__vite__mapDeps([]),import.meta.url),earth:()=>w(()=>import("./icons/earth-line-t1Um8wpQ.js"),__vite__mapDeps([]),import.meta.url),lock:()=>w(()=>import("./icons/lock-line-0jNHqZpm.js"),__vite__mapDeps([]),import.meta.url),unlock:()=>w(()=>import("./icons/unlock-line-w3piJMVb.js"),__vite__mapDeps([]),import.meta.url),"eye-close":()=>w(()=>import("./icons/eye-close-line-lBiePPv9.js"),__vite__mapDeps([]),import.meta.url),"eye-open":()=>w(()=>import("./icons/eye-2-line-vz_Kw-rK.js"),__vite__mapDeps([]),import.meta.url),message:()=>w(()=>import("./icons/mail-line-5XLS6FEo.js"),__vite__mapDeps([]),import.meta.url),comment:()=>w(()=>import("./icons/chat-3-line-F0xcdpXY.js"),__vite__mapDeps([]),import.meta.url),comment2:()=>w(()=>import("./icons/comment-2-line-xEXuT-Ip.js"),__vite__mapDeps([]),import.meta.url),home:()=>w(()=>import("./icons/home-3-line-qJiZhXUH.js"),__vite__mapDeps([]),import.meta.url),notification:()=>w(()=>import("./icons/notification-line-olNPLtgS.js"),__vite__mapDeps([]),import.meta.url),follow:()=>w(()=>import("./icons/user-follow-line-k_GCWTtp.js"),__vite__mapDeps([]),import.meta.url),"follow-add":()=>w(()=>import("./icons/user-add-line-zzW9OULB.js"),__vite__mapDeps([]),import.meta.url),poll:[()=>w(()=>import("./icons/chart-bar-line-5r_DfN2w.js"),__vite__mapDeps([]),import.meta.url),"90deg"],pencil:()=>w(()=>import("./icons/pencil-line-bKXqElLR.js"),__vite__mapDeps([]),import.meta.url),quill:()=>w(()=>import("./icons/quill-pen-line-h_5-FsGz.js"),__vite__mapDeps([]),import.meta.url),at:()=>w(()=>import("./icons/at-line-9vJS_Hnl.js"),__vite__mapDeps([]),import.meta.url),attachment:()=>w(()=>import("./icons/attachment-line-C2PUa1Ke.js"),__vite__mapDeps([]),import.meta.url),upload:()=>w(()=>import("./icons/upload-3-line-Qsjvubiw.js"),__vite__mapDeps([]),import.meta.url),gear:()=>w(()=>import("./icons/settings-3-line-kt4MSpRv.js"),__vite__mapDeps([]),import.meta.url),more:()=>w(()=>import("./icons/more-3-line-wUD-Yhmj.js"),__vite__mapDeps([]),import.meta.url),more2:()=>w(()=>import("./icons/more-1-fill-je1-slyh.js"),__vite__mapDeps([]),import.meta.url),external:()=>w(()=>import("./icons/external-link-line-8nOOkmFu.js"),__vite__mapDeps([]),import.meta.url),popout:()=>w(()=>import("./icons/external-link-line-8nOOkmFu.js"),__vite__mapDeps([]),import.meta.url),popin:[()=>w(()=>import("./icons/external-link-line-8nOOkmFu.js"),__vite__mapDeps([]),import.meta.url),"180deg"],plus:()=>w(()=>import("./icons/add-circle-line--O-MfyNy.js"),__vite__mapDeps([]),import.meta.url),"chevron-left":()=>w(()=>import("./icons/left-line-Jck0yVmC.js"),__vite__mapDeps([]),import.meta.url),"chevron-right":()=>w(()=>import("./icons/right-line-7VBoqLdz.js"),__vite__mapDeps([]),import.meta.url),"chevron-down":()=>w(()=>import("./icons/down-line-9PeS5YhF.js"),__vite__mapDeps([]),import.meta.url),reply:[()=>w(()=>import("./icons/share-forward-line-4jL-2Q4u.js"),__vite__mapDeps([]),import.meta.url),"180deg","horizontal"],thread:()=>w(()=>import("./icons/route-line-2YYy3958.js"),__vite__mapDeps([]),import.meta.url),group:()=>w(()=>import("./icons/group-line-JvhJklhQ.js"),__vite__mapDeps([]),import.meta.url),bot:()=>w(()=>import("./icons/android-2-line-uPwvVubH.js"),__vite__mapDeps([]),import.meta.url),menu:()=>w(()=>import("./icons/rows-4-line-SxGPYpTa.js"),__vite__mapDeps([]),import.meta.url),list:()=>w(()=>import("./icons/list-check-line-qNqx9Mm4.js"),__vite__mapDeps([]),import.meta.url),search:()=>w(()=>import("./icons/search-2-line-G39AynEw.js"),__vite__mapDeps([]),import.meta.url),hashtag:()=>w(()=>import("./icons/hashtag-line-SS3QMu1R.js"),__vite__mapDeps([]),import.meta.url),info:()=>w(()=>import("./icons/information-line-8SOch6cR.js"),__vite__mapDeps([]),import.meta.url),shortcut:()=>w(()=>import("./icons/lightning-line-JMYUlCZM.js"),__vite__mapDeps([]),import.meta.url),user:()=>w(()=>import("./icons/user-4-line-zT_bpOrS.js"),__vite__mapDeps([]),import.meta.url),following:()=>w(()=>import("./icons/walk-line-CF7a5s4t.js"),__vite__mapDeps([]),import.meta.url),pin:()=>w(()=>import("./icons/pin-line-ULyRQyWZ.js"),__vite__mapDeps([]),import.meta.url),unpin:[()=>w(()=>import("./icons/pin-line-ULyRQyWZ.js"),__vite__mapDeps([]),import.meta.url),"180deg"],bus:()=>w(()=>import("./icons/bus-2-line-XuQdDZ_w.js"),__vite__mapDeps([]),import.meta.url),link:()=>w(()=>import("./icons/link-2-line-BUqp1EwN.js"),__vite__mapDeps([]),import.meta.url),history:()=>w(()=>import("./icons/history-line-yoG7K8wL.js"),__vite__mapDeps([]),import.meta.url),share:()=>w(()=>import("./icons/share-2-line-PYo-zN94.js"),__vite__mapDeps([]),import.meta.url),sparkles:()=>w(()=>import("./icons/sparkles-line-wjZWGZ1a.js"),__vite__mapDeps([]),import.meta.url),sparkles2:()=>w(()=>import("./icons/sparkles-2-line-g2FqdZ0R.js"),__vite__mapDeps([]),import.meta.url),exit:()=>w(()=>import("./icons/exit-line-l-1uUgI7.js"),__vite__mapDeps([]),import.meta.url),translate:()=>w(()=>import("./icons/translate-line-HpDtlqS2.js"),__vite__mapDeps([]),import.meta.url),play:()=>w(()=>import("./icons/play-fill-Ey-zv2eL.js"),__vite__mapDeps([]),import.meta.url),trash:()=>w(()=>import("./icons/delete-2-line-pjUduCFs.js"),__vite__mapDeps([]),import.meta.url),mute:()=>w(()=>import("./icons/volume-mute-line-WthBoXru.js"),__vite__mapDeps([]),import.meta.url),unmute:()=>w(()=>import("./icons/volume-line-PZujbN8h.js"),__vite__mapDeps([]),import.meta.url),block:()=>w(()=>import("./icons/forbid-circle-line-3FxopGoP.js"),__vite__mapDeps([]),import.meta.url),unblock:[()=>w(()=>import("./icons/forbid-circle-line-3FxopGoP.js"),__vite__mapDeps([]),import.meta.url),"180deg"],flag:()=>w(()=>import("./icons/flag-4-line-M3u-PO0J.js"),__vite__mapDeps([]),import.meta.url),time:()=>w(()=>import("./icons/time-line-ThP0kTRr.js"),__vite__mapDeps([]),import.meta.url),refresh:()=>w(()=>import("./icons/refresh-2-line-t42qqclb.js"),__vite__mapDeps([]),import.meta.url),emoji2:()=>w(()=>import("./icons/emoji-2-line--uNVc2IC.js"),__vite__mapDeps([]),import.meta.url),filter:()=>w(()=>import("./icons/filter-2-line-KyjbFYlO.js"),__vite__mapDeps([]),import.meta.url),chart:()=>w(()=>import("./icons/chart-line-line-pHaLt6yC.js"),__vite__mapDeps([]),import.meta.url),react:()=>w(()=>import("./icons/react-line-YfZPqZem.js"),__vite__mapDeps([]),import.meta.url),layout4:()=>w(()=>import("./icons/layout-4-line-FOdnyEcZ.js"),__vite__mapDeps([]),import.meta.url),layout5:()=>w(()=>import("./icons/layout-5-line-9Kks7dle.js"),__vite__mapDeps([]),import.meta.url),announce:()=>w(()=>import("./icons/announcement-line-MSlAmDH1.js"),__vite__mapDeps([]),import.meta.url),alert:()=>w(()=>import("./icons/alert-line-zyc6hy8V.js"),__vite__mapDeps([]),import.meta.url),round:()=>w(()=>import("./icons/round-fill-a0rplSmV.js"),__vite__mapDeps([]),import.meta.url),"arrow-up-circle":()=>w(()=>import("./icons/arrow-up-circle-line-e3kZqEZN.js"),__vite__mapDeps([]),import.meta.url),"arrow-down-circle":()=>w(()=>import("./icons/arrow-down-circle-line-mpqFtRtO.js"),__vite__mapDeps([]),import.meta.url),clipboard:()=>w(()=>import("./icons/clipboard-line-9F_Yeo71.js"),__vite__mapDeps([]),import.meta.url),"account-edit":()=>w(()=>import("./icons/user-edit-line-9VnWCh0X.js"),__vite__mapDeps([]),import.meta.url),"account-warning":()=>w(()=>import("./icons/user-warning-line-gL3RGb1N.js"),__vite__mapDeps([]),import.meta.url),keyboard:()=>w(()=>import("./icons/keyboard-line-10AZQcVH.js"),__vite__mapDeps([]),import.meta.url),cloud:()=>w(()=>import("./icons/cloud-line-abe0HgFS.js"),__vite__mapDeps([]),import.meta.url),month:()=>w(()=>import("./icons/calendar-month-line-VoXZVWAe.js"),__vite__mapDeps([]),import.meta.url),media:()=>w(()=>import("./icons/photo-album-line--GdJqjfq.js"),__vite__mapDeps([]),import.meta.url),speak:()=>w(()=>import("./icons/radar-line-ndI8IhOG.js"),__vite__mapDeps([]),import.meta.url),building:()=>w(()=>import("./icons/building-5-line-ew7lu83B.js"),__vite__mapDeps([]),import.meta.url),history:()=>w(()=>import("./icons/history-2-line-3yIVzoWo.js"),__vite__mapDeps([]),import.meta.url)},ei={s:12,m:16,l:20,xl:24,xxl:32},Yn={},ti=vn(function({size:t,width:n,height:a,body:s,rotate:o,flip:r}){return e("svg",{viewBox:`0 0 ${n} ${a}`,dangerouslySetInnerHTML:{__html:s},style:{transform:`${o?`rotate(${o})`:""} ${r?"scaleX(-1)":""}`}})},{isShallowEqual:!0,maxSize:Object.keys(xa).length});function T({icon:t,size:n="m",alt:a,title:s,class:o="",style:r={}}){if(!t)return null;const c=ei[n];let u=xa[t];if(!u)return null;let d,g;Array.isArray(u)&&([u,d,g]=u);const[m,p]=ee(Yn[t]),h=ne(t);return pe(()=>{m&&h.current===t||((async()=>{const f=await u();p(f.default),Yn[t]=f.default})(),h.current=t)},[t]),e("span",{class:`icon ${o}`,title:s||a,style:{width:`${c}px`,height:`${c}px`,...r},children:m&&e(ti,{size:c,width:m.width,height:m.height,body:m.body,rotate:d,flip:g})})}function ni(t,n=[]){!t||typeof t!="function"||pe(()=>{const a=new CloseWatcher;return a.addEventListener("close",t),()=>{a.destroy()}},n)}const Ta=window.CloseWatcher?ni:()=>{},ai=document.getElementById("modal-container");function qt({children:t,onClose:n,onClick:a,class:s}){if(!t)return null;const o=ne();pe(()=>{let d=setTimeout(()=>{var m;const g=(m=o.current)==null?void 0:m.querySelector('[tabindex="-1"]');g&&g.focus()},100);return()=>clearTimeout(d)},[]);const r=window.CloseWatcher,c=He("esc",()=>{setTimeout(()=>{n==null||n()},0)},{enabled:!r&&!!n,keydown:!1,keyup:!0},[n]);Ta(n,[n]);const u=e("div",{ref:d=>{var g;o.current=d,c.current=((g=d==null?void 0:d.querySelector)==null?void 0:g.call(d,'[tabindex="-1"]'))||d},className:s,onClick:d=>{a==null||a(d),d.target===d.currentTarget&&(n==null||n(d))},tabIndex:"-1",onFocus:d=>{var g,m,p,h;d.target===d.currentTarget&&((h=(p=(m=(g=o.current)==null?void 0:g.querySelector)==null?void 0:m.call(g,'[tabindex="-1"]'))==null?void 0:p.focus)==null||h.call(p))},children:t});return io(u,ai)}function Wt({abrupt:t,hidden:n,...a}){return e("span",{...a,class:`loader-container ${t?"abrupt":""} ${n?"hidden":""}`,children:e("span",{class:"loader"})})}const Jn={s:16,m:20,l:24,xl:32,xxl:50,xxxl:64},mt={},pt=window.OffscreenCanvas?new OffscreenCanvas(1,1):document.createElement("canvas"),on=pt.getContext("2d",{willReadFrequently:!0});function oi({url:t,size:n,alt:a="",squircle:s,...o}){n=Jn[n]||n||Jn.m;const r=ne(),c=/missing\.png$/.test(t);return e("span",{ref:r,class:`avatar ${s?"squircle":""} ${mt[t]?"has-alpha":""}`,style:{width:n,height:n},title:a,...o,children:!!t&&e("img",{src:t,width:n,height:n,alt:a,loading:"lazy",decoding:"async",crossOrigin:mt[t]===void 0&&!c?"anonymous":void 0,onError:u=>{u.target.crossOrigin&&(u.target.crossOrigin=null,u.target.src=t)},onLoad:u=>{r.current&&(r.current.dataset.loaded=!0),mt[t]===void 0&&(c||queueMicrotask(()=>{try{const{width:d,height:g}=u.target;pt.width!==d&&(pt.width=d),pt.height!==g&&(pt.height=g),on.drawImage(u.target,0,0);const m=on.getImageData(0,0,d,g),p=m.data.filter((h,f)=>f%4===3&&h<=128).length/(m.data.length/4)>.1;p&&r.current.classList.add("has-alpha"),mt[t]=p,on.clearRect(0,0,d,g)}catch{mt[t]=!1}}))}})})}const Qe=Ye(oi),ot=pa((t,n)=>{let a;try{a=ro()}catch{}let s=(location.hash||"").replace(/^#/,"").trim();s===""&&(s="/");const{to:o,...r}=t;if(s&&s!=="/"&&s.includes("?"))try{const u=new URL(s,location.origin);if(u.searchParams.size){const d=Array.from(u.searchParams.entries()).map(([g,m])=>`${g}=${encodeURIComponent(m)}`).join("&");s=u.pathname+"?"+d}}catch{}const c=s===o||decodeURIComponent(s)===o;return e("a",{ref:n,href:`#${o}`,...r,class:`${t.class||""} ${c?"is-active":""}`,onClick:u=>{var d,g,m;(g=(d=u.currentTarget)==null?void 0:d.parentNode)!=null&&g.closest("a")&&u.stopPropagation(),a&&(M.prevLocation=a),(m=t.onClick)==null||m.call(t,u)}})}),ii=document.documentElement,Ot=getComputedStyle(ii),ri=8;let La=[0,0,0,0];function Aa(){const t=Ot.getPropertyValue("--sai-top"),n=Ot.getPropertyValue("--sai-right"),a=Ot.getPropertyValue("--sai-bottom"),s=Ot.getPropertyValue("--sai-left");La=[Math.max(0,parseInt(t,10)),Math.max(0,parseInt(n,10)),Math.max(0,parseInt(a,10)),Math.max(0,parseInt(s,10))]}requestAnimationFrame(Aa);function Ca(t=[]){return La.map((a,s)=>(a||ri)+(t[s]||0)).join(" ")}CSS.supports("top: env(safe-area-inset-top)")&&window.addEventListener("resize",Aa,{passive:!0});function _n(t){const{containerProps:n,instanceRef:a}=t,s=so(),o=a!=null&&a.current?a:ne();return e(co,{boundingBoxPadding:Ca(),repositionFlag:`${s.width}x${s.height}`,unmountOnClose:!0,...t,instanceRef:o,containerProps:{onClick:r=>{var c,u,d;r.target===r.currentTarget&&((u=(c=o.current)==null?void 0:c.closeMenu)==null||u.call(c)),(d=n==null?void 0:n.onClick)==null||d.call(n,r)},...n}})}function rn({subMenu:t=!1,confirm:n=!0,confirmLabel:a,menuItemClassName:s,menuFooter:o,...r}){const{children:c,onClick:u,...d}=r;if(!n)return t?e(xe,{...r}):u?lo(c,{onClick:u}):c;const g=t?uo:_n,m=ne();return e(g,{instanceRef:m,openTrigger:"clickOnly",direction:"bottom",overflow:"auto",gap:-8,shift:8,menuClassName:"menu-emphasized",...d,menuButton:t?void 0:c,label:t?c:void 0,itemProps:{onPointerMove:p=>{var h,f;p.pointerType==="touch"&&((f=(h=m.current)==null?void 0:h.openMenu)==null||f.call(h))},onPointerLeave:p=>{var h,f;p.pointerType==="touch"&&((f=(h=m.current)==null?void 0:h.openMenu)==null||f.call(h))}},children:[e(xe,{className:s,onClick:u,children:a}),o]})}function _t({text:t,emojis:n}){if(!t)return"";if(!(n!=null&&n.length)||t.indexOf(":")===-1)return t;const a=new RegExp(`:(${n.map(o=>o.shortcode).join("|")}):`,"g");return t.split(a).map(o=>{const r=n.find(c=>c.shortcode===o);if(r){const{url:c,staticUrl:u}=r;return e("picture",{children:[e("source",{srcset:u,media:"(prefers-reduced-motion: reduce)"}),e("img",{src:c,alt:o,class:"shortcode-emoji emoji",width:"16",height:"16",loading:"lazy",decoding:"async"},o)]})}return o})}const si=new Intl.Collator("en",{sensitivity:"base"});function ci({account:t,instance:n,showAvatar:a,showAcct:s,short:o,external:r,onClick:c}){const{acct:u,avatar:d,avatarStatic:g,id:m,url:p,displayName:h,emojis:f,bot:b}=t;let{username:v}=t;const[k,E,_]=u.match(/([^@]+)(@.+)/i)||[,u],y=v.toLowerCase().trim(),S=(h||"").toLowerCase().trim(),F=S.replace(/(\:(\w|\+|\-)+\:)(?=|[\!\.\?]|$)/g,"").replace(/\s+/g,""),R=F.replace(/[^a-z0-9]/gi,"");return!o&&(y===S||y===F||y===R||si.compare(y,F)===0)&&(v=null),e("a",{class:`name-text ${s?"show-acct":""} ${o?"short":""}`,href:p,target:r?"_blank":null,title:`${h?`${h} `:""}@${u}`,onClick:L=>{if(!r){if(L.preventDefault(),L.stopPropagation(),c)return c(L);M.showAccount={account:t,instance:n}}},children:[a&&e(G,{children:[e(Qe,{url:g||d,squircle:b})," "]}),h&&!o?e(G,{children:[e("b",{children:e(_t,{text:h,emojis:f})}),!s&&v&&e(G,{children:[" ",e("i",{children:["@",v]})]})]}):o?e("i",{children:v}):e("b",{children:v}),s&&e(G,{children:[e("br",{}),e("i",{children:["@",E,e("span",{class:"ib",children:_})]})]})]})}const ft=bn(ci);yt.extend(mo);yt.extend(ho);yt.extend(po);const li=new Intl.DateTimeFormat;function kt({datetime:t,format:n}){if(!t)return null;const a=yt(t);let s;if(n==="micro"){const o=yt();o.diff(a,"day")<=1||o.year()===a.year()?s=a.twitter():s=li.format(a.toDate())}else s=a.fromNow();return e("time",{datetime:a.toISOString(),title:a.format("LLLL"),children:s})}const ui=[{code:"af",name:"Afrikaans"},{code:"sq",name:"Albanian"},{code:"am",name:"Amharic"},{code:"ar",name:"Arabic"},{code:"hy",name:"Armenian"},{code:"as",name:"Assamese"},{code:"ay",name:"Aymara"},{code:"az",name:"Azerbaijani"},{code:"bm",name:"Bambara"},{code:"eu",name:"Basque"},{code:"be",name:"Belarusian"},{code:"bn",name:"Bengali"},{code:"bho",name:"Bhojpuri"},{code:"bs",name:"Bosnian"},{code:"bg",name:"Bulgarian"},{code:"ca",name:"Catalan"},{code:"ceb",name:"Cebuano"},{code:"ny",name:"Chichewa"},{code:"zh",name:"Chinese"},{code:"zh_HANT",name:"Chinese (Traditional)"},{code:"co",name:"Corsican"},{code:"hr",name:"Croatian"},{code:"cs",name:"Czech"},{code:"da",name:"Danish"},{code:"dv",name:"Dhivehi"},{code:"doi",name:"Dogri"},{code:"nl",name:"Dutch"},{code:"en",name:"English"},{code:"eo",name:"Esperanto"},{code:"et",name:"Estonian"},{code:"ee",name:"Ewe"},{code:"tl",name:"Filipino"},{code:"fi",name:"Finnish"},{code:"fr",name:"French"},{code:"fy",name:"Frisian"},{code:"gl",name:"Galician"},{code:"ka",name:"Georgian"},{code:"de",name:"German"},{code:"el",name:"Greek"},{code:"gn",name:"Guarani"},{code:"gu",name:"Gujarati"},{code:"ht",name:"Haitian Creole"},{code:"ha",name:"Hausa"},{code:"haw",name:"Hawaiian"},{code:"iw",name:"Hebrew"},{code:"hi",name:"Hindi"},{code:"hmn",name:"Hmong"},{code:"hu",name:"Hungarian"},{code:"is",name:"Icelandic"},{code:"ig",name:"Igbo"},{code:"ilo",name:"Ilocano"},{code:"id",name:"Indonesian"},{code:"ga",name:"Irish"},{code:"it",name:"Italian"},{code:"ja",name:"Japanese"},{code:"jw",name:"Javanese"},{code:"kn",name:"Kannada"},{code:"kk",name:"Kazakh"},{code:"km",name:"Khmer"},{code:"rw",name:"Kinyarwanda"},{code:"gom",name:"Konkani"},{code:"ko",name:"Korean"},{code:"kri",name:"Krio"},{code:"ku",name:"Kurdish (Kurmanji)"},{code:"ckb",name:"Kurdish (Sorani)"},{code:"ky",name:"Kyrgyz"},{code:"lo",name:"Lao"},{code:"la",name:"Latin"},{code:"lv",name:"Latvian"},{code:"ln",name:"Lingala"},{code:"lt",name:"Lithuanian"},{code:"lg",name:"Luganda"},{code:"lb",name:"Luxembourgish"},{code:"mk",name:"Macedonian"},{code:"mai",name:"Maithili"},{code:"mg",name:"Malagasy"},{code:"ms",name:"Malay"},{code:"ml",name:"Malayalam"},{code:"mt",name:"Maltese"},{code:"mi",name:"Maori"},{code:"mr",name:"Marathi"},{code:"mni-Mtei",name:"Meiteilon (Manipuri)"},{code:"lus",name:"Mizo"},{code:"mn",name:"Mongolian"},{code:"my",name:"Myanmar (Burmese)"},{code:"ne",name:"Nepali"},{code:"no",name:"Norwegian"},{code:"or",name:"Odia (Oriya)"},{code:"om",name:"Oromo"},{code:"ps",name:"Pashto"},{code:"fa",name:"Persian"},{code:"pl",name:"Polish"},{code:"pt",name:"Portuguese"},{code:"pa",name:"Punjabi"},{code:"qu",name:"Quechua"},{code:"ro",name:"Romanian"},{code:"ru",name:"Russian"},{code:"sm",name:"Samoan"},{code:"sa",name:"Sanskrit"},{code:"gd",name:"Scots Gaelic"},{code:"nso",name:"Sepedi"},{code:"sr",name:"Serbian"},{code:"st",name:"Sesotho"},{code:"sn",name:"Shona"},{code:"sd",name:"Sindhi"},{code:"si",name:"Sinhala"},{code:"sk",name:"Slovak"},{code:"sl",name:"Slovenian"},{code:"so",name:"Somali"},{code:"es",name:"Spanish"},{code:"su",name:"Sundanese"},{code:"sw",name:"Swahili"},{code:"sv",name:"Swedish"},{code:"tg",name:"Tajik"},{code:"ta",name:"Tamil"},{code:"tt",name:"Tatar"},{code:"te",name:"Telugu"},{code:"th",name:"Thai"},{code:"ti",name:"Tigrinya"},{code:"ts",name:"Tsonga"},{code:"tr",name:"Turkish"},{code:"tk",name:"Turkmen"},{code:"ak",name:"Twi"},{code:"uk",name:"Ukrainian"},{code:"ur",name:"Urdu"},{code:"ug",name:"Uyghur"},{code:"uz",name:"Uzbek"},{code:"vi",name:"Vietnamese"},{code:"cy",name:"Welsh"},{code:"xh",name:"Xhosa"},{code:"yi",name:"Yiddish"},{code:"yo",name:"Yoruba"},{code:"zu",name:"Zulu"}];function di(...t){try{return fo(...t)}catch{return t[2]||!1}}const Ut=Ye(di),mi=[new Intl.DateTimeFormat().resolvedOptions().locale,...navigator.languages],hi=Ut(mi,ui.map(t=>t.code.replace("_","-")),"en");function Sa(t=!1){if(t){const{contentTranslationTargetLanguage:n}=M.settings;if(n)return n}return hi}function sn(t){try{return new Intl.DisplayNames(navigator.languages,{type:"language"}).of(t)}catch{return null}}function kn(t,n=[]){return t?(!n.length||t.indexOf(":")===-1||n.forEach(a=>{const{shortcode:s,staticUrl:o,url:r}=a;t=t.replace(new RegExp(`:${s}:`,"g"),`<picture><source srcset="${o}" media="(prefers-reduced-motion: reduce)"></source><img class="shortcode-emoji emoji" src="${r}" alt=":${s}:" width="16" height="16" loading="lazy" decoding="async" /></picture>`)}),t):""}const tt=document.createElement("div"),pi=["u-url","mention","hashtag"];function fi(t,n={}){const{emojis:a,postEnhanceDOM:s=()=>{}}=n;let o=t;const r=document.createElement("div");r.innerHTML=o;const c=/<a/i.test(o),u=o.includes("```");if(c&&(r.querySelectorAll('a:not([target="_blank"])').forEach(p=>{p.setAttribute("target","_blank")}),r.querySelectorAll("a[class]").forEach(p=>{p.classList.forEach(h=>{pi.includes(h)||p.classList.remove(h)})})),c&&r.querySelectorAll("a[href]").forEach(m=>{/^https?:\/\//i.test(m.textContent.trim())&&m.classList.add("has-url-text")}),c){const g=r.querySelectorAll("a[href]"),m=[];g.forEach(p=>{const h=p.innerText.trim(),f=p.querySelector("*");if(/^@[^@]+(@[^@]+)?$/g.test(h)){const[b,v,k]=h.split("@");f||(!m.some(([E])=>E===v)||m.some(([E,_])=>E===v&&_===k)?(p.innerHTML=`@<span>${v}</span>`,m.push([v,k])):p.innerHTML=`@<span>${v}@${k}</span>`),p.classList.add("mention")}/^#[^#]+$/g.test(h)&&(f||(p.innerHTML=`#<span>${h.slice(1)}</span>`),p.classList.add("mention","hashtag"))})}let d;if(o.includes(":")&&(d=cn(r),d.forEach(g=>{let m=g.nodeValue.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;");a&&(m=kn(m,a)),tt.innerHTML=m,g.replaceWith(...tt.childNodes)})),u&&[...r.querySelectorAll("p")].filter(m=>/^```[^]+```$/g.test(m.innerText.trim())).forEach(m=>{const p=document.createElement("pre");m.querySelectorAll("br").forEach(h=>h.replaceWith(`
`)),p.innerHTML=`<code>${m.innerHTML.trim()}</code>`,m.replaceWith(p)}),u&&[...r.querySelectorAll("p")].filter(p=>/^```/g.test(p.innerText)).forEach(p=>{const h=[p];let f=!1,b=p;for(;b.nextElementSibling;){const v=b.nextElementSibling;if(v&&v.tagName==="P")if(/```$/g.test(v.innerText)){h.push(v),f=!0;break}else h.push(v);else break;b=v}if(f){const v=document.createElement("pre");h.forEach(E=>{E.querySelectorAll("br").forEach(_=>_.replaceWith(`
`))});const k=h.map(E=>E.innerHTML).join(`

`);v.innerHTML=`<code tabindex="0">${k}</code>`,p.replaceWith(v),h.forEach(E=>E.remove())}}),o.includes("`")&&(d=cn(r),d.forEach(g=>{let m=g.nodeValue.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;");/`[^`]+`/g.test(m)&&(m=m.replaceAll(/(`[^]+?`)/g,"<code>$1</code>")),tt.innerHTML=m,g.replaceWith(...tt.childNodes)})),/twitter\.com/i.test(o)&&(d=cn(r,{rejectFilter:["A"]}),d.forEach(g=>{let m=g.nodeValue.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;");/@[a-zA-Z0-9_]+@twitter\.com/g.test(m)&&(m=m.replaceAll(/(@([a-zA-Z0-9_]+)@twitter\.com)/g,'<a href="https://twitter.com/$2" rel="nofollow noopener noreferrer" target="_blank">$1</a>')),tt.innerHTML=m,g.replaceWith(...tt.childNodes)})),o.includes("#")){let g=null;const m=[...r.querySelectorAll("p")].filter((p,h)=>{let f=0;for(let b=0;b<p.childNodes.length;b++){const v=p.childNodes[b];if(v.nodeType===Node.TEXT_NODE){if(v.textContent.trim()!=="")return!1}else if(v.tagName!=="BR")if(v.tagName==="A"){const k=v.textContent.trim();if(!k||!k.startsWith("#"))return!1;f++}else return!1}if(f>3||f>1&&g&&h===g+1)return g=h,!0});m!=null&&m.length&&m.forEach(p=>{p.classList.add("hashtag-stuffing"),p.title=p.innerText})}return s&&queueMicrotask(()=>s(r)),o=r.innerHTML,o}const Fa=Ye(fi),gi=["STYLE","IMG","VIDEO","AUDIO","AREA","MAP","TRACK","EMBED","IFRAME","OBJECT","PICTURE","PORTAL","SOURCE","SVG","MATH","CANVAS","NOSCRIPT","SCRIPT","INPUT","OPTION","TEXTAREA","SLOT","TEMPLATE"],vi=Object.fromEntries(gi.map(t=>[t,!0]));function cn(t,n={}){var c;const a=[],s=Object.assign({},vi,(c=n.rejectFilter)==null?void 0:c.reduce((u,d)=>(u[d]=!0,u),{})),o=document.createTreeWalker(t,NodeFilter.SHOW_TEXT,{acceptNode(u){return s[u.parentNode.nodeName]?NodeFilter.FILTER_REJECT:NodeFilter.FILTER_ACCEPT}},!1);let r;for(;r=o.nextNode();)a.push(r);return a}const ht=document.createElement("div");function bi(t){return t?(ht.innerHTML=t.replace(/<\/p>/g,`</p>

`).replace(/<\/li>/g,`</li>
`),ht.querySelectorAll("br").forEach(n=>{n.replaceWith(`
`)}),ht.querySelectorAll(".invisible").forEach(n=>{n.remove()}),ht.querySelectorAll(".ellipsis").forEach(n=>{n.append("...")}),ht.innerText.replace(/[\r\n]{3,}/g,`

`).trim()):""}const wn=Ye(bi);function yi(t){const{mentions:n=[],instance:a,previewMode:s,statusURL:o}=t||{};return r=>{var m,p;let{target:c}=r;if(c=c.closest("a"),!c||r.metaKey||r.ctrlKey||r.shiftKey||r.altKey||r.which===2)return;const u=(m=c.previousSibling)==null?void 0:m.textContent,d=u==null?void 0:u.endsWith("@"),g=c.innerText.startsWith("@");if(c.classList.contains("u-url")&&g||d&&!g){const h=(c.querySelector("span")||c).innerText.trim(),f=h.replace(/^@/,""),b=c.getAttribute("href"),v=n.find(k=>k.username===f||k.acct===f||k.url===b);if(v)r.preventDefault(),r.stopPropagation(),M.showAccount={account:v.acct,instance:a};else if(!/^http/i.test(h)){r.preventDefault(),r.stopPropagation();const k=c.getAttribute("href");M.showAccount={account:k,instance:a}}}else if(!s){const h=u==null?void 0:u.endsWith("#");if(c.classList.contains("hashtag")||h){r.preventDefault(),r.stopPropagation();const f=c.innerText.replace(/^#/,"").trim(),b=a?`#/${a}/t/${f}`:`#/t/${f}`;location.hash=b}else(p=M.unfurledLinks[c.href])!=null&&p.url&&o!==c.href&&(r.preventDefault(),r.stopPropagation(),M.prevLocation={pathname:location.hash.replace(/^#/,"")},location.hash=`#${M.unfurledLinks[c.href].url}`)}}}const{locale:_i}=new Intl.DateTimeFormat().resolvedOptions(),ki=t=>{const{dateYear:n,hideTime:a,formatOpts:s}=t||{},o=new Date().getFullYear();return Intl.DateTimeFormat(_i,{year:n===o?void 0:"numeric",month:"short",day:"numeric",hour:a?void 0:"numeric",minute:a?void 0:"numeric",...s})},wi=Ye(ki);function jt(t,n){return t instanceof Date||(t=new Date(t)),wi({dateYear:t.getFullYear(),...n}).format(t)}const{locale:Ei}=Intl.NumberFormat().resolvedOptions(),We=Intl.NumberFormat(Ei,{notation:"compact"}).format;function xi({skeleton:t,account:n,avatarSize:a="xl",useAvatarStatic:s=!1,instance:o,external:r,internal:c,onClick:u,showActivity:d=!1,showStats:g=!1,accountInstance:m,hideDisplayName:p=!1,relationship:h={},excludeRelationshipAttrs:f=[]}){if(t)return e("div",{class:"account-block skeleton",children:[e(Qe,{size:a}),e("span",{children:[e("b",{children:"████████"}),e("br",{}),e("span",{class:"account-block-acct",children:"@██████"})]})]});if(!n)return null;const{id:b,acct:v,avatar:k,avatarStatic:E,displayName:_,username:y,emojis:S,url:F,statusesCount:R,lastStatusAt:L,bot:$,fields:D,note:j,group:U,followersCount:H}=n;let[Z,ue,W]=v.match(/([^@]+)(@.+)/i)||[,v];m&&(W=`@${m}`);const ye=D==null?void 0:D.find(I=>!!I.verifiedAt&&!!I.value),Y={};for(const I in h)f.includes(I)||(Y[I]=h[I]);const Te=Y.following||Y.followedBy||Y.requested;return e("a",{class:"account-block",href:F,target:r?"_blank":null,title:`@${v}`,onClick:I=>{if(!r){if(I.preventDefault(),u)return u(I);c?location.hash=`/${o}/a/${b}`:M.showAccount={account:n,instance:o}}},children:[e(Qe,{url:s?E:k||E,size:a,squircle:$}),e("span",{class:"account-block-content",children:[!p&&e(G,{children:_?e("b",{children:e(_t,{text:_,emojis:S})}):e("b",{children:y})})," ",e("span",{class:"account-block-acct",children:["@",ue,e("wbr",{}),W]}),d&&e(G,{children:[e("br",{}),e("small",{class:"last-status-at insignificant",children:["Posts: ",R,!!L&&e(G,{children:[" ","· Last posted:"," ",jt(L,{hideTime:!0})]})]})]}),g&&e("div",{class:"account-block-stats",children:[$&&e(G,{children:e("span",{class:"tag collapsed",children:[e(T,{icon:"bot"})," Automated"]})}),!!U&&e(G,{children:e("span",{class:"tag collapsed",children:[e(T,{icon:"group"})," Group"]})}),Te&&e("div",{class:"shazam-container-horizontal",children:e("div",{class:"shazam-container-inner",children:Y.following&&Y.followedBy?e("span",{class:"tag minimal",children:"Mutual"}):Y.requested?e("span",{class:"tag minimal",children:"Requested"}):Y.following?e("span",{class:"tag minimal",children:"Following"}):Y.followedBy?e("span",{class:"tag minimal",children:"Follows you"}):null})},h.id),!!H&&e("span",{class:"ib",children:[We(H)," ",H===1?"follower":"followers"]}),!!ye&&e("span",{class:"verified-field",children:[e(T,{icon:"check-circle",size:"s"})," ",e("span",{dangerouslySetInnerHTML:{__html:Fa(ye.value,{emojis:S})}})]})]})]})]})}const Ti={"@mastodon/edit-media-attributes":">=4.1","@mastodon/list-exclusive":">=4.2"},ln={};function $a(t){try{const{version:n,domain:a}=ya(),s=`${a}-${t}`;if(ln[s])return ln[s];const o=Ti[t];return o?ln[s]=go(n,o,{includePrerelease:!0,loose:!0}):!1}catch{return!1}}const Li=[{code:"auto",name:"Detect"},{code:"af",name:"Afrikaans"},{code:"sq",name:"Albanian"},{code:"am",name:"Amharic"},{code:"ar",name:"Arabic"},{code:"hy",name:"Armenian"},{code:"as",name:"Assamese"},{code:"ay",name:"Aymara"},{code:"az",name:"Azerbaijani"},{code:"bm",name:"Bambara"},{code:"eu",name:"Basque"},{code:"be",name:"Belarusian"},{code:"bn",name:"Bengali"},{code:"bho",name:"Bhojpuri"},{code:"bs",name:"Bosnian"},{code:"bg",name:"Bulgarian"},{code:"ca",name:"Catalan"},{code:"ceb",name:"Cebuano"},{code:"ny",name:"Chichewa"},{code:"zh",name:"Chinese"},{code:"co",name:"Corsican"},{code:"hr",name:"Croatian"},{code:"cs",name:"Czech"},{code:"da",name:"Danish"},{code:"dv",name:"Dhivehi"},{code:"doi",name:"Dogri"},{code:"nl",name:"Dutch"},{code:"en",name:"English"},{code:"eo",name:"Esperanto"},{code:"et",name:"Estonian"},{code:"ee",name:"Ewe"},{code:"tl",name:"Filipino"},{code:"fi",name:"Finnish"},{code:"fr",name:"French"},{code:"fy",name:"Frisian"},{code:"gl",name:"Galician"},{code:"ka",name:"Georgian"},{code:"de",name:"German"},{code:"el",name:"Greek"},{code:"gn",name:"Guarani"},{code:"gu",name:"Gujarati"},{code:"ht",name:"Haitian Creole"},{code:"ha",name:"Hausa"},{code:"haw",name:"Hawaiian"},{code:"iw",name:"Hebrew"},{code:"hi",name:"Hindi"},{code:"hmn",name:"Hmong"},{code:"hu",name:"Hungarian"},{code:"is",name:"Icelandic"},{code:"ig",name:"Igbo"},{code:"ilo",name:"Ilocano"},{code:"id",name:"Indonesian"},{code:"ga",name:"Irish"},{code:"it",name:"Italian"},{code:"ja",name:"Japanese"},{code:"jw",name:"Javanese"},{code:"kn",name:"Kannada"},{code:"kk",name:"Kazakh"},{code:"km",name:"Khmer"},{code:"rw",name:"Kinyarwanda"},{code:"gom",name:"Konkani"},{code:"ko",name:"Korean"},{code:"kri",name:"Krio"},{code:"ku",name:"Kurdish (Kurmanji)"},{code:"ckb",name:"Kurdish (Sorani)"},{code:"ky",name:"Kyrgyz"},{code:"lo",name:"Lao"},{code:"la",name:"Latin"},{code:"lv",name:"Latvian"},{code:"ln",name:"Lingala"},{code:"lt",name:"Lithuanian"},{code:"lg",name:"Luganda"},{code:"lb",name:"Luxembourgish"},{code:"mk",name:"Macedonian"},{code:"mai",name:"Maithili"},{code:"mg",name:"Malagasy"},{code:"ms",name:"Malay"},{code:"ml",name:"Malayalam"},{code:"mt",name:"Maltese"},{code:"mi",name:"Maori"},{code:"mr",name:"Marathi"},{code:"mni-Mtei",name:"Meiteilon (Manipuri)"},{code:"lus",name:"Mizo"},{code:"mn",name:"Mongolian"},{code:"my",name:"Myanmar (Burmese)"},{code:"ne",name:"Nepali"},{code:"no",name:"Norwegian"},{code:"or",name:"Odia (Oriya)"},{code:"om",name:"Oromo"},{code:"ps",name:"Pashto"},{code:"fa",name:"Persian"},{code:"pl",name:"Polish"},{code:"pt",name:"Portuguese"},{code:"pa",name:"Punjabi"},{code:"qu",name:"Quechua"},{code:"ro",name:"Romanian"},{code:"ru",name:"Russian"},{code:"sm",name:"Samoan"},{code:"sa",name:"Sanskrit"},{code:"gd",name:"Scots Gaelic"},{code:"nso",name:"Sepedi"},{code:"sr",name:"Serbian"},{code:"st",name:"Sesotho"},{code:"sn",name:"Shona"},{code:"sd",name:"Sindhi"},{code:"si",name:"Sinhala"},{code:"sk",name:"Slovak"},{code:"sl",name:"Slovenian"},{code:"so",name:"Somali"},{code:"es",name:"Spanish"},{code:"su",name:"Sundanese"},{code:"sw",name:"Swahili"},{code:"sv",name:"Swedish"},{code:"tg",name:"Tajik"},{code:"ta",name:"Tamil"},{code:"tt",name:"Tatar"},{code:"te",name:"Telugu"},{code:"th",name:"Thai"},{code:"ti",name:"Tigrinya"},{code:"ts",name:"Tsonga"},{code:"tr",name:"Turkish"},{code:"tk",name:"Turkmen"},{code:"ak",name:"Twi"},{code:"uk",name:"Ukrainian"},{code:"ur",name:"Urdu"},{code:"ug",name:"Uyghur"},{code:"uz",name:"Uzbek"},{code:"vi",name:"Vietnamese"},{code:"cy",name:"Welsh"},{code:"xh",name:"Xhosa"},{code:"yi",name:"Yiddish"},{code:"yo",name:"Yoruba"},{code:"zu",name:"Zulu"}];var Ai={PHANPY_CLIENT_NAME:"IMSB",PHANPY_WEBSITE:"https://app.imsb.app",PHANPY_LINGVA_INSTANCES:"lingva.phanpy.social lingva.lunar.icu lingva.garudalinux.org translate.plausibility.cloud",PHANPY_PRIVACY_POLICY_URL:"https://github.com/cheeaun/phanpy/blob/main/PRIVACY.MD",VITE_APP_ENV:"production",BASE_URL:"./",MODE:"production",DEV:!1,PROD:!0,SSR:!1};const{PHANPY_LINGVA_INSTANCES:Zn}=Ai,bt=Zn?Zn.split(/\s+/):[],Ci=da({limit:1,interval:2e3});let un=0;function Si(t,n,a){return vo(()=>{let o=bt[un];return fetch(`https://${o}/api/v1/${n}/${a}/${encodeURIComponent(t)}`).then(r=>{if(!r.ok)throw new Error(r.statusText);return r.json()}).then(r=>{var c;return{provider:"lingva",content:r.translation,detectedSourceLanguage:(c=r.info)==null?void 0:c.detectedSource,info:r.info}})},{retries:3,onFailedAttempt:o=>{un=(un+1)%bt.length}})}const Pa=1e3*60*60,Ia=Kt(Si,{maxAge:Pa}),Fi=Kt(Ci(Ia),{maxAge:Pa});function $i({forceTranslate:t,sourceLanguage:n,onTranslate:a,text:s="",mini:o}){const r=Sa(!0),[c,u]=ee("default"),[d,g]=ee(null),[m,p]=ee(null),[h,f]=ee(null),b=ne(),v=n?sn(n):null,k=sn(r),E=ne("auto");a||(a=o?Fi:Ia);const _=async()=>{var y,S;u("loading");try{const{content:F,detectedSourceLanguage:R,provider:L,error:$,...D}=await a(s,E.current,r);if(F){if(R){const j=sn(R);f(j)}if(L==="lingva"){const j=(S=(y=D==null?void 0:D.info)==null?void 0:y.pronunciation)==null?void 0:S.query;j&&g(j)}p(F),u("default"),!o&&F.trim()!==s.trim()&&(b.current.open=!0,b.current.scrollIntoView({behavior:"smooth",block:"nearest"}))}else u("error")}catch{u("error")}};return pe(()=>{t&&_()},[t]),o?m&&m.trim()!==s.trim()&&h!==k?e("div",{class:"shazam-container",children:e("div",{class:"shazam-container-inner",children:e("div",{class:"status-translation-block-mini",children:[e(T,{icon:"translate",alt:`Auto-translated from ${v}`}),e("output",{lang:r,dir:"auto",title:d||"",children:m})]})})}):null:e("div",{class:"status-translation-block",onClick:y=>{y.preventDefault()},children:e("details",{ref:b,children:[e("summary",{children:e("button",{type:"button",onClick:async y=>{y.preventDefault(),y.stopPropagation(),b.current.open=!b.current.open,c!=="loading"&&(m||_())},children:[e(T,{icon:"translate"})," ",e("span",{children:c==="loading"?"Translating…":n&&v&&!h?`Translate from ${v}`:"Translate"})]})}),e("div",{class:"translated-block",children:[e("div",{class:"translation-info insignificant",children:[e("select",{class:"translated-source-select",disabled:c==="loading",onChange:y=>{E.current=y.target.value,_()},children:Li.map(y=>e("option",{value:y.code,children:y.code==="auto"?`Auto (${h??"…"})`:y.name}))})," ",e("span",{children:["→ ",k]}),e(Wt,{abrupt:!0,hidden:c!=="loading"})]}),c==="error"?e("p",{class:"ui-state",children:"Failed to translate"}):!!m&&e(G,{children:[e("output",{class:"translated-content",lang:r,dir:"auto",children:m}),!!d&&e("output",{class:"translated-pronunciation-content",tabIndex:-1,onClick:y=>{y.target.classList.toggle("expand")},children:d})]})]})]})})}const Pi=bt!=null&&bt.length?$i:()=>null,En=[["aa","Afar","Afaraf"],["ab","Abkhaz","аҧсуа бызшәа"],["ae","Avestan","avesta"],["af","Afrikaans","Afrikaans"],["ak","Akan","Akan"],["am","Amharic","አማርኛ"],["an","Aragonese","aragonés"],["ar","Arabic","اللغة العربية"],["as","Assamese","অসমীয়া"],["av","Avaric","авар мацӀ"],["ay","Aymara","aymar aru"],["az","Azerbaijani","azərbaycan dili"],["ba","Bashkir","башҡорт теле"],["be","Belarusian","беларуская мова"],["bg","Bulgarian","български език"],["bh","Bihari","भोजपुरी"],["bi","Bislama","Bislama"],["bm","Bambara","bamanankan"],["bn","Bengali","বাংলা"],["bo","Tibetan","བོད་ཡིག"],["br","Breton","brezhoneg"],["bs","Bosnian","bosanski jezik"],["ca","Catalan","Català"],["ce","Chechen","нохчийн мотт"],["ch","Chamorro","Chamoru"],["co","Corsican","corsu"],["cr","Cree","ᓀᐦᐃᔭᐍᐏᐣ"],["cs","Czech","čeština"],["cu","Old Church Slavonic","ѩзыкъ словѣньскъ"],["cv","Chuvash","чӑваш чӗлхи"],["cy","Welsh","Cymraeg"],["da","Danish","dansk"],["de","German","Deutsch"],["dv","Divehi","Dhivehi"],["dz","Dzongkha","རྫོང་ཁ"],["ee","Ewe","Eʋegbe"],["el","Greek","Ελληνικά"],["en","English","English"],["eo","Esperanto","Esperanto"],["es","Spanish","Español"],["et","Estonian","eesti"],["eu","Basque","euskara"],["fa","Persian","فارسی"],["ff","Fula","Fulfulde"],["fi","Finnish","suomi"],["fj","Fijian","Vakaviti"],["fo","Faroese","føroyskt"],["fr","French","Français"],["fy","Western Frisian","Frysk"],["ga","Irish","Gaeilge"],["gd","Scottish Gaelic","Gàidhlig"],["gl","Galician","galego"],["gu","Gujarati","ગુજરાતી"],["gv","Manx","Gaelg"],["ha","Hausa","هَوُسَ"],["he","Hebrew","עברית"],["hi","Hindi","हिन्दी"],["ho","Hiri Motu","Hiri Motu"],["hr","Croatian","Hrvatski"],["ht","Haitian","Kreyòl ayisyen"],["hu","Hungarian","magyar"],["hy","Armenian","Հայերեն"],["hz","Herero","Otjiherero"],["ia","Interlingua","Interlingua"],["id","Indonesian","Bahasa Indonesia"],["ie","Interlingue","Interlingue"],["ig","Igbo","Asụsụ Igbo"],["ii","Nuosu","ꆈꌠ꒿ Nuosuhxop"],["ik","Inupiaq","Iñupiaq"],["io","Ido","Ido"],["is","Icelandic","Íslenska"],["it","Italian","Italiano"],["iu","Inuktitut","ᐃᓄᒃᑎᑐᑦ"],["ja","Japanese","日本語"],["jv","Javanese","basa Jawa"],["ka","Georgian","ქართული"],["kg","Kongo","Kikongo"],["ki","Kikuyu","Gĩkũyũ"],["kj","Kwanyama","Kuanyama"],["kk","Kazakh","қазақ тілі"],["kl","Kalaallisut","kalaallisut"],["km","Khmer","ខេមរភាសា"],["kn","Kannada","ಕನ್ನಡ"],["ko","Korean","한국어"],["kr","Kanuri","Kanuri"],["ks","Kashmiri","कश्मीरी"],["ku","Kurmanji (Kurdish)","Kurmancî"],["kv","Komi","коми кыв"],["kw","Cornish","Kernewek"],["ky","Kyrgyz","Кыргызча"],["la","Latin","latine"],["lb","Luxembourgish","Lëtzebuergesch"],["lg","Ganda","Luganda"],["li","Limburgish","Limburgs"],["ln","Lingala","Lingála"],["lo","Lao","ລາວ"],["lt","Lithuanian","lietuvių kalba"],["lu","Luba-Katanga","Tshiluba"],["lv","Latvian","latviešu valoda"],["mg","Malagasy","fiteny malagasy"],["mh","Marshallese","Kajin M̧ajeļ"],["mi","Māori","te reo Māori"],["mk","Macedonian","македонски јазик"],["ml","Malayalam","മലയാളം"],["mn","Mongolian","Монгол хэл"],["mr","Marathi","मराठी"],["ms","Malay","Bahasa Melayu"],["mt","Maltese","Malti"],["my","Burmese","ဗမာစာ"],["na","Nauru","Ekakairũ Naoero"],["nb","Norwegian Bokmål","Norsk bokmål"],["nd","Northern Ndebele","isiNdebele"],["ne","Nepali","नेपाली"],["ng","Ndonga","Owambo"],["nl","Dutch","Nederlands"],["nn","Norwegian Nynorsk","Norsk Nynorsk"],["no","Norwegian","Norsk"],["nr","Southern Ndebele","isiNdebele"],["nv","Navajo","Diné bizaad"],["ny","Chichewa","chiCheŵa"],["oc","Occitan","occitan"],["oj","Ojibwe","ᐊᓂᔑᓈᐯᒧᐎᓐ"],["om","Oromo","Afaan Oromoo"],["or","Oriya","ଓଡ଼ିଆ"],["os","Ossetian","ирон æвзаг"],["pa","Panjabi","ਪੰਜਾਬੀ"],["pi","Pāli","पाऴि"],["pl","Polish","Polski"],["ps","Pashto","پښتو"],["pt","Portuguese","Português"],["qu","Quechua","Runa Simi"],["rm","Romansh","rumantsch grischun"],["rn","Kirundi","Ikirundi"],["ro","Romanian","Română"],["ru","Russian","Русский"],["rw","Kinyarwanda","Ikinyarwanda"],["sa","Sanskrit","संस्कृतम्"],["sc","Sardinian","sardu"],["sd","Sindhi","सिन्धी"],["se","Northern Sami","Davvisámegiella"],["sg","Sango","yângâ tî sängö"],["si","Sinhala","සිංහල"],["sk","Slovak","slovenčina"],["sl","Slovenian","slovenščina"],["sn","Shona","chiShona"],["so","Somali","Soomaaliga"],["sq","Albanian","Shqip"],["sr","Serbian","српски језик"],["ss","Swati","SiSwati"],["st","Southern Sotho","Sesotho"],["su","Sundanese","Basa Sunda"],["sv","Swedish","Svenska"],["sw","Swahili","Kiswahili"],["ta","Tamil","தமிழ்"],["te","Telugu","తెలుగు"],["tg","Tajik","тоҷикӣ"],["th","Thai","ไทย"],["ti","Tigrinya","ትግርኛ"],["tk","Turkmen","Türkmen"],["tl","Tagalog","Wikang Tagalog"],["tn","Tswana","Setswana"],["to","Tonga","faka Tonga"],["tr","Turkish","Türkçe"],["ts","Tsonga","Xitsonga"],["tt","Tatar","татар теле"],["tw","Twi","Twi"],["ty","Tahitian","Reo Tahiti"],["ug","Uyghur","ئۇيغۇرچە‎"],["uk","Ukrainian","Українська"],["ur","Urdu","اردو"],["uz","Uzbek","Ўзбек"],["ve","Venda","Tshivenḓa"],["vi","Vietnamese","Tiếng Việt"],["vo","Volapük","Volapük"],["wa","Walloon","walon"],["wo","Wolof","Wollof"],["xh","Xhosa","isiXhosa"],["yi","Yiddish","ייִדיש"],["yo","Yoruba","Yorùbá"],["za","Zhuang","Saɯ cueŋƅ"],["zh","Chinese","中文"],["zu","Zulu","isiZulu"],["zh-CN","Chinese (China)","简体中文"],["zh-HK","Chinese (Hong Kong)","繁體中文（香港）"],["zh-TW","Chinese (Taiwan)","繁體中文（臺灣）"],["zh-YUE","Cantonese","廣東話"],["ast","Asturian","Asturianu"],["chr","Cherokee","ᏣᎳᎩ ᎦᏬᏂᎯᏍᏗ"],["ckb","Sorani (Kurdish)","سۆرانی"],["cnr","Montenegrin","crnogorski"],["jbo","Lojban","la .lojban."],["kab","Kabyle","Taqbaylit"],["ldn","Láadan","Láadan"],["lfn","Lingua Franca Nova","lingua franca nova"],["sco","Scots","Scots"],["sma","Southern Sami","Åarjelsaemien Gïele"],["smj","Lule Sami","Julevsámegiella"],["szl","Silesian","ślůnsko godka"],["tok","Toki Pona","toki pona"],["xal","Kalmyk","Хальмг келн"],["zba","Balaibalan","باليبلن"],["zgh","Standard Moroccan Tamazight","ⵜⴰⵎⴰⵣⵉⵖⵜ"]],Ii="(((?:[^A-Za-z0-9@＠$#＃\\uFFFE\\uFEFF\\uFFFF]|[\\u202A-\\u202E\\u061C\\u200E\\u200F\\u2066\\u2067\\u2068\\u2069]|^))((https?:\\/\\/)((?:(?:(?:[^/\\!'#%&'\\(\\)*\\+,\\\\\\-\\.\\/:;<=>\\?@\\[\\]\\^_{|}~\\$//\\x09-\\x0D\\x20\\x85\\xA0\\u1680\\u180E\\u2000-\\u200A\\u2028\\u2029\\u202F\\u205F\\u3000//\\uFFFE\\uFEFF\\uFFFF//\\u202A-\\u202E\\u061C\\u200E\\u200F\\u2066\\u2067\\u2068\\u2069/](?:[_-]|[^/\\!'#%&'\\(\\)*\\+,\\\\\\-\\.\\/:;<=>\\?@\\[\\]\\^_{|}~\\$//\\x09-\\x0D\\x20\\x85\\xA0\\u1680\\u180E\\u2000-\\u200A\\u2028\\u2029\\u202F\\u205F\\u3000//\\uFFFE\\uFEFF\\uFFFF//\\u202A-\\u202E\\u061C\\u200E\\u200F\\u2066\\u2067\\u2068\\u2069/])*)?[^/\\!'#%&'\\(\\)*\\+,\\\\\\-\\.\\/:;<=>\\?@\\[\\]\\^_{|}~\\$//\\x09-\\x0D\\x20\\x85\\xA0\\u1680\\u180E\\u2000-\\u200A\\u2028\\u2029\\u202F\\u205F\\u3000//\\uFFFE\\uFEFF\\uFFFF//\\u202A-\\u202E\\u061C\\u200E\\u200F\\u2066\\u2067\\u2068\\u2069/]\\.)*(?:(?:[^/\\!'#%&'\\(\\)*\\+,\\\\\\-\\.\\/:;<=>\\?@\\[\\]\\^_{|}~\\$//\\x09-\\x0D\\x20\\x85\\xA0\\u1680\\u180E\\u2000-\\u200A\\u2028\\u2029\\u202F\\u205F\\u3000//\\uFFFE\\uFEFF\\uFFFF//\\u202A-\\u202E\\u061C\\u200E\\u200F\\u2066\\u2067\\u2068\\u2069/](?:-|[^/\\!'#%&'\\(\\)*\\+,\\\\\\-\\.\\/:;<=>\\?@\\[\\]\\^_{|}~\\$//\\x09-\\x0D\\x20\\x85\\xA0\\u1680\\u180E\\u2000-\\u200A\\u2028\\u2029\\u202F\\u205F\\u3000//\\uFFFE\\uFEFF\\uFFFF//\\u202A-\\u202E\\u061C\\u200E\\u200F\\u2066\\u2067\\u2068\\u2069/])*)?[^/\\!'#%&'\\(\\)*\\+,\\\\\\-\\.\\/:;<=>\\?@\\[\\]\\^_{|}~\\$//\\x09-\\x0D\\x20\\x85\\xA0\\u1680\\u180E\\u2000-\\u200A\\u2028\\u2029\\u202F\\u205F\\u3000//\\uFFFE\\uFEFF\\uFFFF//\\u202A-\\u202E\\u061C\\u200E\\u200F\\u2066\\u2067\\u2068\\u2069/]\\.)(?:(?:(?:삼성|닷컴|닷넷|香格里拉|餐厅|食品|飞利浦|電訊盈科|集团|通販|购物|谷歌|诺基亚|联通|网络|网站|网店|网址|组织机构|移动|珠宝|点看|游戏|淡马锡|机构|書籍|时尚|新闻|政府|政务|招聘|手表|手机|我爱你|慈善|微博|广东|工行|家電|娱乐|天主教|大拿|大众汽车|在线|嘉里大酒店|嘉里|商标|商店|商城|公益|公司|八卦|健康|信息|佛山|企业|中文网|中信|世界|ポイント|ファッション|セール|ストア|コム|グーグル|クラウド|みんな|คอม|संगठन|नेट|कॉम|همراه|موقع|موبايلي|كوم|كاثوليك|عرب|شبكة|بيتك|بازار|العليان|ارامكو|اتصالات|ابوظبي|קום|сайт|рус|орг|онлайн|москва|ком|католик|дети|zuerich|zone|zippo|zip|zero|zara|zappos|yun|youtube|you|yokohama|yoga|yodobashi|yandex|yamaxun|yahoo|yachts|xyz|xxx|xperia|xin|xihuan|xfinity|xerox|xbox|wtf|wtc|wow|world|works|work|woodside|wolterskluwer|wme|winners|wine|windows|win|williamhill|wiki|wien|whoswho|weir|weibo|wedding|wed|website|weber|webcam|weatherchannel|weather|watches|watch|warman|wanggou|wang|walter|walmart|wales|vuelos|voyage|voto|voting|vote|volvo|volkswagen|vodka|vlaanderen|vivo|viva|vistaprint|vista|vision|visa|virgin|vip|vin|villas|viking|vig|video|viajes|vet|versicherung|vermögensberatung|vermögensberater|verisign|ventures|vegas|vanguard|vana|vacations|ups|uol|uno|university|unicom|uconnect|ubs|ubank|tvs|tushu|tunes|tui|tube|trv|trust|travelersinsurance|travelers|travelchannel|travel|training|trading|trade|toys|toyota|town|tours|total|toshiba|toray|top|tools|tokyo|today|tmall|tkmaxx|tjx|tjmaxx|tirol|tires|tips|tiffany|tienda|tickets|tiaa|theatre|theater|thd|teva|tennis|temasek|telefonica|telecity|tel|technology|tech|team|tdk|tci|taxi|tax|tattoo|tatar|tatamotors|target|taobao|talk|taipei|tab|systems|symantec|sydney|swiss|swiftcover|swatch|suzuki|surgery|surf|support|supply|supplies|sucks|style|study|studio|stream|store|storage|stockholm|stcgroup|stc|statoil|statefarm|statebank|starhub|star|staples|stada|srt|srl|spreadbetting|spot|sport|spiegel|space|soy|sony|song|solutions|solar|sohu|software|softbank|social|soccer|sncf|smile|smart|sling|skype|sky|skin|ski|site|singles|sina|silk|shriram|showtime|show|shouji|shopping|shop|shoes|shiksha|shia|shell|shaw|sharp|shangrila|sfr|sexy|sex|sew|seven|ses|services|sener|select|seek|security|secure|seat|search|scot|scor|scjohnson|science|schwarz|schule|school|scholarships|schmidt|schaeffler|scb|sca|sbs|sbi|saxo|save|sas|sarl|sapo|sap|sanofi|sandvikcoromant|sandvik|samsung|samsclub|salon|sale|sakura|safety|safe|saarland|ryukyu|rwe|run|ruhr|rugby|rsvp|room|rogers|rodeo|rocks|rocher|rmit|rip|rio|ril|rightathome|ricoh|richardli|rich|rexroth|reviews|review|restaurant|rest|republican|report|repair|rentals|rent|ren|reliance|reit|reisen|reise|rehab|redumbrella|redstone|red|recipes|realty|realtor|realestate|read|raid|radio|racing|qvc|quest|quebec|qpon|pwc|pub|prudential|pru|protection|property|properties|promo|progressive|prof|productions|prod|pro|prime|press|praxi|pramerica|post|porn|politie|poker|pohl|pnc|plus|plumbing|playstation|play|place|pizza|pioneer|pink|ping|pin|pid|pictures|pictet|pics|piaget|physio|photos|photography|photo|phone|philips|phd|pharmacy|pfizer|pet|pccw|pay|passagens|party|parts|partners|pars|paris|panerai|panasonic|pamperedchef|page|ovh|ott|otsuka|osaka|origins|orientexpress|organic|org|orange|oracle|open|ooo|onyourside|online|onl|ong|one|omega|ollo|oldnavy|olayangroup|olayan|okinawa|office|off|observer|obi|nyc|ntt|nrw|nra|nowtv|nowruz|now|norton|northwesternmutual|nokia|nissay|nissan|ninja|nikon|nike|nico|nhk|ngo|nfl|nexus|nextdirect|next|news|newholland|new|neustar|network|netflix|netbank|net|nec|nba|navy|natura|nationwide|name|nagoya|nadex|nab|mutuelle|mutual|museum|mtr|mtpc|mtn|msd|movistar|movie|mov|motorcycles|moto|moscow|mortgage|mormon|mopar|montblanc|monster|money|monash|mom|moi|moe|moda|mobily|mobile|mobi|mma|mls|mlb|mitsubishi|mit|mint|mini|mil|microsoft|miami|metlife|merckmsd|meo|menu|men|memorial|meme|melbourne|meet|media|med|mckinsey|mcdonalds|mcd|mba|mattel|maserati|marshalls|marriott|markets|marketing|market|map|mango|management|man|makeup|maison|maif|madrid|macys|luxury|luxe|lupin|lundbeck|ltda|ltd|lplfinancial|lpl|love|lotto|lotte|london|lol|loft|locus|locker|loans|loan|llp|llc|lixil|living|live|lipsy|link|linde|lincoln|limo|limited|lilly|like|lighting|lifestyle|lifeinsurance|life|lidl|liaison|lgbt|lexus|lego|legal|lefrak|leclerc|lease|lds|lawyer|law|latrobe|latino|lat|lasalle|lanxess|landrover|land|lancome|lancia|lancaster|lamer|lamborghini|ladbrokes|lacaixa|kyoto|kuokgroup|kred|krd|kpn|kpmg|kosher|komatsu|koeln|kiwi|kitchen|kindle|kinder|kim|kia|kfh|kerryproperties|kerrylogistics|kerryhotels|kddi|kaufen|juniper|juegos|jprs|jpmorgan|joy|jot|joburg|jobs|jnj|jmp|jll|jlc|jio|jewelry|jetzt|jeep|jcp|jcb|java|jaguar|iwc|iveco|itv|itau|istanbul|ist|ismaili|iselect|irish|ipiranga|investments|intuit|international|intel|int|insure|insurance|institute|ink|ing|info|infiniti|industries|inc|immobilien|immo|imdb|imamat|ikano|iinet|ifm|ieee|icu|ice|icbc|ibm|hyundai|hyatt|hughes|htc|hsbc|how|house|hotmail|hotels|hoteles|hot|hosting|host|hospital|horse|honeywell|honda|homesense|homes|homegoods|homedepot|holiday|holdings|hockey|hkt|hiv|hitachi|hisamitsu|hiphop|hgtv|hermes|here|helsinki|help|healthcare|health|hdfcbank|hdfc|hbo|haus|hangout|hamburg|hair|guru|guitars|guide|guge|gucci|guardian|group|grocery|gripe|green|gratis|graphics|grainger|gov|got|gop|google|goog|goodyear|goodhands|goo|golf|goldpoint|gold|godaddy|gmx|gmo|gmbh|gmail|globo|global|gle|glass|glade|giving|gives|gifts|gift|ggee|george|genting|gent|gea|gdn|gbiz|gay|garden|gap|games|game|gallup|gallo|gallery|gal|fyi|futbol|furniture|fund|fun|fujixerox|fujitsu|ftr|frontier|frontdoor|frogans|frl|fresenius|free|fox|foundation|forum|forsale|forex|ford|football|foodnetwork|food|foo|fly|flsmidth|flowers|florist|flir|flights|flickr|fitness|fit|fishing|fish|firmdale|firestone|fire|financial|finance|final|film|fido|fidelity|fiat|ferrero|ferrari|feedback|fedex|fast|fashion|farmers|farm|fans|fan|family|faith|fairwinds|fail|fage|extraspace|express|exposed|expert|exchange|everbank|events|eus|eurovision|etisalat|esurance|estate|esq|erni|ericsson|equipment|epson|epost|enterprises|engineering|engineer|energy|emerck|email|education|edu|edeka|eco|eat|earth|dvr|dvag|durban|dupont|duns|dunlop|duck|dubai|dtv|drive|download|dot|doosan|domains|doha|dog|dodge|doctor|docs|dnp|diy|dish|discover|discount|directory|direct|digital|diet|diamonds|dhl|dev|design|desi|dentist|dental|democrat|delta|deloitte|dell|delivery|degree|deals|dealer|deal|dds|dclk|day|datsun|dating|date|data|dance|dad|dabur|cyou|cymru|cuisinella|csc|cruises|cruise|crs|crown|cricket|creditunion|creditcard|credit|cpa|courses|coupons|coupon|country|corsica|coop|cool|cookingchannel|cooking|contractors|contact|consulting|construction|condos|comsec|computer|compare|company|community|commbank|comcast|com|cologne|college|coffee|codes|coach|clubmed|club|cloud|clothing|clinique|clinic|click|cleaning|claims|cityeats|city|citic|citi|citadel|cisco|circle|cipriani|church|chrysler|chrome|christmas|chloe|chintai|cheap|chat|chase|charity|channel|chanel|cfd|cfa|cern|ceo|center|ceb|cbs|cbre|cbn|cba|catholic|catering|cat|casino|cash|caseih|case|casa|cartier|cars|careers|career|care|cards|caravan|car|capitalone|capital|capetown|canon|cancerresearch|camp|camera|cam|calvinklein|call|cal|cafe|cab|bzh|buzz|buy|business|builders|build|bugatti|budapest|brussels|brother|broker|broadway|bridgestone|bradesco|box|boutique|bot|boston|bostik|bosch|boots|booking|book|boo|bond|bom|bofa|boehringer|boats|bnpparibas|bnl|bmw|bms|blue|bloomberg|blog|blockbuster|blanco|blackfriday|black|biz|bio|bingo|bing|bike|bid|bible|bharti|bet|bestbuy|best|berlin|bentley|beer|beauty|beats|bcn|bcg|bbva|bbt|bbc|bayern|bauhaus|basketball|baseball|bargains|barefoot|barclays|barclaycard|barcelona|bar|bank|band|bananarepublic|banamex|baidu|baby|azure|axa|aws|avianca|autos|auto|author|auspost|audio|audible|audi|auction|attorney|athleta|associates|asia|asda|arte|art|arpa|army|archi|aramco|arab|aquarelle|apple|app|apartments|aol|anz|anquan|android|analytics|amsterdam|amica|amfam|amex|americanfamily|americanexpress|alstom|alsace|ally|allstate|allfinanz|alipay|alibaba|alfaromeo|akdn|airtel|airforce|airbus|aigo|aig|agency|agakhan|africa|afl|afamilycompany|aetna|aero|aeg|adult|ads|adac|actor|active|aco|accountants|accountant|accenture|academy|abudhabi|abogado|able|abc|abbvie|abbott|abb|abarth|aarp|aaa|onion)(?=[^0-9a-zA-Z@+-]|$))|(?:(?:한국|香港|澳門|新加坡|台灣|台湾|中國|中国|გე|ລາວ|ไทย|ලංකා|ഭാരതം|ಭಾರತ|భారత్|சிங்கப்பூர்|இலங்கை|இந்தியா|ଭାରତ|ભારત|ਭਾਰਤ|ভাৰত|ভারত|বাংলা|भारोत|भारतम्|भारत|ڀارت|پاکستان|موريتانيا|مليسيا|مصر|قطر|فلسطين|عمان|عراق|سورية|سودان|تونس|بھارت|بارت|ایران|امارات|المغرب|السعودية|الجزائر|البحرين|الاردن|հայ|қаз|укр|срб|рф|мон|мкд|ею|бел|бг|ευ|ελ|zw|zm|za|yt|ye|ws|wf|vu|vn|vi|vg|ve|vc|va|uz|uy|us|um|uk|ug|ua|tz|tw|tv|tt|tr|tp|to|tn|tm|tl|tk|tj|th|tg|tf|td|tc|sz|sy|sx|sv|su|st|ss|sr|so|sn|sm|sl|sk|sj|si|sh|sg|se|sd|sc|sb|sa|rw|ru|rs|ro|re|qa|py|pw|pt|ps|pr|pn|pm|pl|pk|ph|pg|pf|pe|pa|om|nz|nu|nr|np|no|nl|ni|ng|nf|ne|nc|na|mz|my|mx|mw|mv|mu|mt|ms|mr|mq|mp|mo|mn|mm|ml|mk|mh|mg|mf|me|md|mc|ma|ly|lv|lu|lt|ls|lr|lk|li|lc|lb|la|kz|ky|kw|kr|kp|kn|km|ki|kh|kg|ke|jp|jo|jm|je|it|is|ir|iq|io|in|im|il|ie|id|hu|ht|hr|hn|hm|hk|gy|gw|gu|gt|gs|gr|gq|gp|gn|gm|gl|gi|gh|gg|gf|ge|gd|gb|ga|fr|fo|fm|fk|fj|fi|eu|et|es|er|eh|eg|ee|ec|dz|do|dm|dk|dj|de|cz|cy|cx|cw|cv|cu|cr|co|cn|cm|cl|ck|ci|ch|cg|cf|cd|cc|ca|bz|by|bw|bv|bt|bs|br|bq|bo|bn|bm|bl|bj|bi|bh|bg|bf|be|bd|bb|ba|az|ax|aw|au|at|as|ar|aq|ao|an|am|al|ai|ag|af|ae|ad|ac)(?=[^0-9a-zA-Z@+-]|$))|(?:xn--[\\-0-9a-z]+))))(?::([0-9]+))?(\\/(?:(?:[a-z\\u0400-\\u04FF0-9!\\*';:=\\+,\\.\\$\\/%#\\[\\]\\-\\u2013_~@\\|&\\xC0-\\xD6\\xD8-\\xF6\\xF8-\\xFF\\u0100-\\u024F\\u0253\\u0254\\u0256\\u0257\\u0259\\u025B\\u0263\\u0268\\u026F\\u0272\\u0289\\u028B\\u02BB\\u0300-\\u036F\\u1E00-\\u1EFF]*(?:\\((?:[a-z\\u0400-\\u04FF0-9!\\*';:=\\+,\\.\\$\\/%#\\[\\]\\-\\u2013_~@\\|&\\xC0-\\xD6\\xD8-\\xF6\\xF8-\\xFF\\u0100-\\u024F\\u0253\\u0254\\u0256\\u0257\\u0259\\u025B\\u0263\\u0268\\u026F\\u0272\\u0289\\u028B\\u02BB\\u0300-\\u036F\\u1E00-\\u1EFF]+|(?:[a-z\\u0400-\\u04FF0-9!\\*';:=\\+,\\.\\$\\/%#\\[\\]\\-\\u2013_~@\\|&\\xC0-\\xD6\\xD8-\\xF6\\xF8-\\xFF\\u0100-\\u024F\\u0253\\u0254\\u0256\\u0257\\u0259\\u025B\\u0263\\u0268\\u026F\\u0272\\u0289\\u028B\\u02BB\\u0300-\\u036F\\u1E00-\\u1EFF]*\\([a-z\\u0400-\\u04FF0-9!\\*';:=\\+,\\.\\$\\/%#\\[\\]\\-\\u2013_~@\\|&\\xC0-\\xD6\\xD8-\\xF6\\xF8-\\xFF\\u0100-\\u024F\\u0253\\u0254\\u0256\\u0257\\u0259\\u025B\\u0263\\u0268\\u026F\\u0272\\u0289\\u028B\\u02BB\\u0300-\\u036F\\u1E00-\\u1EFF]+\\)[a-z\\u0400-\\u04FF0-9!\\*';:=\\+,\\.\\$\\/%#\\[\\]\\-\\u2013_~@\\|&\\xC0-\\xD6\\xD8-\\xF6\\xF8-\\xFF\\u0100-\\u024F\\u0253\\u0254\\u0256\\u0257\\u0259\\u025B\\u0263\\u0268\\u026F\\u0272\\u0289\\u028B\\u02BB\\u0300-\\u036F\\u1E00-\\u1EFF]*))\\)[a-z\\u0400-\\u04FF0-9!\\*';:=\\+,\\.\\$\\/%#\\[\\]\\-\\u2013_~@\\|&\\xC0-\\xD6\\xD8-\\xF6\\xF8-\\xFF\\u0100-\\u024F\\u0253\\u0254\\u0256\\u0257\\u0259\\u025B\\u0263\\u0268\\u026F\\u0272\\u0289\\u028B\\u02BB\\u0300-\\u036F\\u1E00-\\u1EFF]*)*[\\+\\-a-z\\u0400-\\u04FF0-9=_#\\/\\xC0-\\xD6\\xD8-\\xF6\\xF8-\\xFF\\u0100-\\u024F\\u0253\\u0254\\u0256\\u0257\\u0259\\u025B\\u0263\\u0268\\u026F\\u0272\\u0289\\u028B\\u02BB\\u0300-\\u036F\\u1E00-\\u1EFF]|(?:\\((?:[a-z\\u0400-\\u04FF0-9!\\*';:=\\+,\\.\\$\\/%#\\[\\]\\-\\u2013_~@\\|&\\xC0-\\xD6\\xD8-\\xF6\\xF8-\\xFF\\u0100-\\u024F\\u0253\\u0254\\u0256\\u0257\\u0259\\u025B\\u0263\\u0268\\u026F\\u0272\\u0289\\u028B\\u02BB\\u0300-\\u036F\\u1E00-\\u1EFF]+|(?:[a-z\\u0400-\\u04FF0-9!\\*';:=\\+,\\.\\$\\/%#\\[\\]\\-\\u2013_~@\\|&\\xC0-\\xD6\\xD8-\\xF6\\xF8-\\xFF\\u0100-\\u024F\\u0253\\u0254\\u0256\\u0257\\u0259\\u025B\\u0263\\u0268\\u026F\\u0272\\u0289\\u028B\\u02BB\\u0300-\\u036F\\u1E00-\\u1EFF]*\\([a-z\\u0400-\\u04FF0-9!\\*';:=\\+,\\.\\$\\/%#\\[\\]\\-\\u2013_~@\\|&\\xC0-\\xD6\\xD8-\\xF6\\xF8-\\xFF\\u0100-\\u024F\\u0253\\u0254\\u0256\\u0257\\u0259\\u025B\\u0263\\u0268\\u026F\\u0272\\u0289\\u028B\\u02BB\\u0300-\\u036F\\u1E00-\\u1EFF]+\\)[a-z\\u0400-\\u04FF0-9!\\*';:=\\+,\\.\\$\\/%#\\[\\]\\-\\u2013_~@\\|&\\xC0-\\xD6\\xD8-\\xF6\\xF8-\\xFF\\u0100-\\u024F\\u0253\\u0254\\u0256\\u0257\\u0259\\u025B\\u0263\\u0268\\u026F\\u0272\\u0289\\u028B\\u02BB\\u0300-\\u036F\\u1E00-\\u1EFF]*))\\)))|(?:@[a-z\\u0400-\\u04FF0-9!\\*';:=\\+,\\.\\$\\/%#\\[\\]\\-\\u2013_~@\\|&\\xC0-\\xD6\\xD8-\\xF6\\xF8-\\xFF\\u0100-\\u024F\\u0253\\u0254\\u0256\\u0257\\u0259\\u025B\\u0263\\u0268\\u026F\\u0272\\u0289\\u028B\\u02BB\\u0300-\\u036F\\u1E00-\\u1EFF]+\\/))*)?(\\?[a-z0-9!?\\*'@\\(\\);:&=\\+\\$\\/%#\\[\\]\\-_\\.,~|]*[a-z0-9\\-_&=#\\/])?))",Ri="gi",Xn={source:Ii,flags:Ri},Je=bo("drafts-db","drafts-store"),Di={set:(t,n)=>yo(t,n,Je),get:t=>_o(t,Je),getMany:t=>ko(t,Je),del:t=>wo(t,Je),delMany:t=>Eo(t,Je),clear:()=>xo(Je),keys:()=>To(Je)},Qn={drafts:Di},at={public:"earth",unlisted:"group",private:"lock",direct:"message"};function Mi({poll:t,lang:n,readOnly:a,refresh:s=()=>{},votePoll:o=()=>{}}){const[r,c]=ee("default"),{expired:u,expiresAt:d,id:g,multiple:m,options:p,ownVotes:h,voted:f,votersCount:b,votesCount:v,emojis:k}=t,E=!!d&&new Date(d),_=b||v;let y=0;_<=1e3?y=0:_<=1e4?y=1:_<=1e5&&(y=2);const[S,F]=ee(!1),R=p.every(L=>L.votesCount!==null);return e("div",{lang:n,dir:"auto",class:`poll ${a?"read-only":""} ${r==="loading"?"loading":""}`,children:[S&&R||f||u?e(G,{children:[e("div",{class:"poll-options",children:p.map((L,$)=>{const{title:D,votesCount:j}=L,U=_?(j/_*100).toFixed(y):0,H=j>0&&j===Math.max(...p.map(Z=>Z.votesCount));return e("div",{class:`poll-option poll-result ${H?"poll-option-leading":""}`,style:{"--percentage":`${U}%`},children:[e("div",{class:"poll-option-title",children:[e("span",{children:e(_t,{text:D,emojis:k})}),f&&h.includes($)&&e(G,{children:[" ",e(T,{icon:"check-circle"})]})]}),e("div",{class:"poll-option-votes",title:`${j} vote${j===1?"":"s"}`,children:[U,"%"]})]},`${$}-${D}-${j}`)})}),!u&&!f&&e("button",{class:"poll-vote-button plain2",disabled:r==="loading",onClick:L=>{L.preventDefault(),F(!1)},children:[e(T,{icon:"arrow-left",size:"s"})," Hide results"]})]}):e("form",{onSubmit:async L=>{L.preventDefault();const $=L.target,D=new FormData($),j=[];D.forEach((U,H)=>{H==="poll"&&j.push(U)}),j.length&&(c("loading"),await o(j),c("default"))},children:[e("div",{class:"poll-options",children:p.map((L,$)=>{const{title:D}=L;return e("div",{class:"poll-option",children:e("label",{class:"poll-label",children:[e("input",{type:m?"checkbox":"radio",name:"poll",value:$,disabled:r==="loading",readOnly:a}),e("span",{class:"poll-option-title",children:e(_t,{text:D,emojis:k})})]})})})}),!a&&e("button",{class:"poll-vote-button",type:"submit",disabled:r==="loading",children:"Vote"})]}),e("p",{class:"poll-meta",children:[!u&&!a&&e("button",{type:"button",class:"plain small",disabled:r==="loading",style:{marginLeft:-8},onClick:L=>{L.preventDefault(),c("loading"),(async()=>(await s(),c("default")))()},title:"Refresh",children:e(T,{icon:"refresh",alt:"Refresh"})}),!f&&!u&&!a&&R&&e("button",{type:"button",class:"plain small",disabled:r==="loading",onClick:L=>{L.preventDefault(),F(!S)},title:S?"Hide results":"Show results",children:[e(T,{icon:S?"eye-open":"eye-close",alt:S?"Hide results":"Show results"})," "]}),!u&&!a&&" ",e("span",{title:v,children:We(v)})," vote",v===1?"":"s",!!b&&b!==v&&e(G,{children:[" ","• ",e("span",{title:b,children:We(b)})," ","voter",b===1?"":"s"]})," ","• ",u?"Ended":"Ending"," ",!!E&&e(kt,{datetime:E})]})," "]})}const Oi=Lo();function zi(t,n){if(!(t!=null&&t.length))return!1;const a=t.filter(r=>{const{filter:c}=r,u=c.context.includes(n);return u?c.expiresAt?new Date(c.expiresAt)>new Date:u:!1});if(!a.length)return!1;if(a.some(r=>r.filter.filterAction==="hide"))return{action:"hide"};if(a.some(r=>r.filter.filterAction==="warn")){const r=a.map(c=>c.filter.title);return{action:"warn",titles:r,titlesStr:r.join(" • ")}}return!1}const Ra=Ye(zi);function Ni(t,n,a){var c;const{filtered:s}=t;if(!(s!=null&&s.length)||a&&((c=t.account)==null?void 0:c.id)===a)return!0;const r=Ra(s,n);return r?r.action!=="hide":!0}function $r(t,n){if(!(t!=null&&t.length))return[];if(!n)return t;const a=z.session.get("currentAccount");return t.filter(s=>Ni(s,n,a))}const dn=document.createElement("div");function mn(t){return t?(dn.innerHTML=t,dn.querySelectorAll(".invisible").forEach(n=>{n.remove()}),dn.innerText.length):0}const gt="speechSynthesis"in window;function ea(t,n){if(gt)try{speechSynthesis.speaking&&speechSynthesis.cancel();const a=new SpeechSynthesisUtterance(t);n&&(a.lang=n),speechSynthesis.speak(a)}catch(a){alert(a)}}function Bi(t){const{spoilerText:n,content:a,poll:s,mediaAttachments:o}=t;let r="";return n!=null&&n.trim()?r+=n:r+=wn(a),r=r.trim(),s&&(r+=" 📊"),o!=null&&o.length&&(r+=" "+o.map(c=>({image:"🖼️",gifv:"🎞️",video:"📹",audio:"🎵",unknown:""})[c.type]||"").join("")),r}function Bt({className:t="truncated"}={}){const n=ne(),a=fa(({height:s})=>{if(n.current){const{scrollHeight:o}=n.current;let r=o>s;if(r){const{height:c,maxHeight:u}=getComputedStyle(n.current),d=parseInt(u||c,10);r=o>d}n.current.classList.toggle(t,r)}},300);return Ao({ref:n,box:"border-box",onResize:a}),n}const Vi=/^((?!chrome|android).)*safari/i.test(navigator.userAgent),Ui="ALT",hn=t=>{const{alt:n,lang:a,index:s,...o}=t;return!n||!n.trim()?null:e("button",{type:"button",class:"alt-badge clickable",...o,onClick:r=>{r.stopPropagation(),r.preventDefault(),M.showMediaAlt={alt:n,lang:a}},title:"Media description",children:[Ui,!!s&&e("sup",{children:s})]})},ji=140,Da=Ye(t=>t!=null&&t.length?t.length>ji||/[\n\r].*[\n\r]/.test(t.trim()):!1);function Hi({class:t="",media:n,to:a,lang:s,showOriginal:o,autoAnimate:r,showCaption:c,altIndex:u,onClick:d=()=>{}}){const{blurhash:g,description:m,meta:p,previewRemoteUrl:h,previewUrl:f,remoteUrl:b,url:v,type:k}=n,{original:E={},small:_,focus:y}=p||{},S=o?E==null?void 0:E.width:_==null?void 0:_.width,F=o?E==null?void 0:E.height:_==null?void 0:_.height,R=o?v:f||v,L=o?b:h||b,$=S>=F?"landscape":"portrait",D=g?ga(g):null,j=ne();let U;if(y){const B=(y.x+1)/2*100,q=(1-y.y)/2*100;U=`${B.toFixed(0)}% ${q.toFixed(0)}%`}const H=ne(),Z=yn(({x:B,y:q,scale:ve})=>{const{current:Ce}=H;if(Ce){const ae=Co({x:B,y:q,scale:ve});ve===1?Ce.style.removeProperty("transform"):Ce.style.setProperty("transform",ae),Ce.closest(".media-zoom").style.touchAction=ve<=1.01?"pan-x":""}},[]),[ue,W]=ee(!1),ye={enabled:ue,draggableUnZoomed:!1,inertiaFriction:.9,doubleTapZoomOutOnMaxScale:!0,containerProps:{className:"media-zoom",style:{overflow:"visible"}},onUpdate:Z},Y=Fe(()=>a?B=>e(ot,{to:a,...B}):"div",[a]),Te=k==="unknown"&&/\.(mp4|m4a|m4p|m4b|m4r|m4v|mov|webm)$/i.test(L),I=k==="image"||k==="unknown"&&f&&!Te,N=ne(),[te,ce]=ee(!1);fn(()=>{if(!I||!o||!N.current)return;const{offsetWidth:B,offsetHeight:q}=N.current,ve=S<B&&F<q;ve&&ce(ve)},[S,F]);const de=window.innerHeight*($==="portrait"?.45:.33),fe=$==="portrait"?0:160,Le={"--average-color":D&&`rgb(${D.join(",")})`},ke=S&&F?{"--width":`${S}px`,"--height":`${F}px`,"--aspectWidth":`${S/F*Math.max(fe,de)}px`,aspectRatio:`${S} / ${F}`,...Le}:{...Le},ze=Da(m),me=!!c&&!o&&!!m&&!ze,ge=me?B=>{const{children:q,...ve}=B;return e("figure",{...ve,children:[q,e("figcaption",{class:"media-caption",lang:s,dir:"auto",onClick:Ce=>{Ce.preventDefault(),Ce.stopPropagation(),M.showMediaAlt={alt:m,lang:s}},children:m})]})}:G;if(I)return ye.containerProps.style.display="inherit",fn(()=>{Vi&&o&&(async()=>{try{await fetch(R,{mode:"no-cors"}),H.current.src=R}catch{}})()},[R]),e(ge,{children:e(Y,{ref:N,class:`media media-image ${t}`,onClick:d,"data-orientation":$,"data-has-alt":!me,style:o?{backgroundImage:`url(${f})`,backgroundSize:te?`${S}px ${F}px`:void 0,...Le}:ke,children:o?e(Un,{...ye,children:e("img",{ref:H,src:R,alt:m,width:S,height:F,"data-orientation":$,loading:"eager",decoding:"sync",onLoad:B=>{B.target.closest(".media-image").style.backgroundImage="",B.target.closest(".media-zoom").style.display="",W(!0)},onError:B=>{const{src:q}=B.target;q===R&&R!==L&&(B.target.src=L)}})}):e(G,{children:[e("img",{src:R,alt:me?"":m,width:S,height:F,"data-orientation":$,loading:"lazy",style:{objectPosition:U||"center","--anim-duration":`${Math.min(Math.max(Math.max(S,F)/100,5),120)}s`},onLoad:B=>{B.target.dataset.loaded=!0},onError:B=>{const{src:q}=B.target;q===R&&R!==L&&(B.target.src=L)}}),!me&&e(hn,{alt:m,lang:s,index:u})]})})});if(k==="gifv"||k==="video"||Te){const B=E.duration<31,q=k==="gifv"&&B,ve=E.duration<61,Ce=aa(E.duration),ae=!o&&!r&&q,Be=!o&&r&&q,Se=E.duration>5,Ae=`
    <video
      src="${v}"
      poster="${f}"
      width="${S}"
      height="${F}"
      data-orientation="${$}"
      preload="auto"
      autoplay
      muted="${q}"
      ${q?"":"controls"}
      playsinline
      loop="${ve}"
      ${q?'ondblclick="this.paused ? this.play() : this.pause()"':""}
      ${q&&Se?"ontimeupdate=\"this.closest('.media-gif') && this.closest('.media-gif').style.setProperty('--progress', `${~~((this.currentTime / this.duration) * 100)}%`)\"":""}
    ></video>
  `;return e(ge,{children:e(Y,{class:`media ${t} media-${q?"gif":"video"} ${Be?"media-contain":""} ${ae?"media-hover-animate":""}`,"data-orientation":$,"data-formatted-duration":o?void 0:Ce,"data-label":q&&!o&&!Be?"GIF":"","data-has-alt":!me,style:!o&&ke,onClick:he=>{if(ae)try{j.current.pause()}catch{}d(he)},onMouseEnter:()=>{if(ae)try{j.current.play()}catch{}},onMouseLeave:()=>{if(ae)try{j.current.pause()}catch{}},onFocus:()=>{if(ae)try{j.current.play()}catch{}},onBlur:()=>{if(ae)try{j.current.pause()}catch{}},children:[o||Be?q&&o?e(Un,{...ye,enabled:!0,children:e("div",{ref:H,dangerouslySetInnerHTML:{__html:Ae}})}):e("div",{class:"video-container",dangerouslySetInnerHTML:{__html:Ae}}):q?e("video",{ref:j,src:v,poster:f,width:S,height:F,"data-orientation":$,preload:"auto",playsinline:!0,loop:!0,muted:!0,onTimeUpdate:Se?he=>{const{target:_e}=he,re=_e==null?void 0:_e.closest(".media-gif");if(re){const Me=_e.currentTime/_e.duration*100;re.style.setProperty("--progress",`${Me}%`)}}:void 0}):e(G,{children:[e("img",{src:f,alt:me?"":m,width:S,height:F,"data-orientation":$,loading:"lazy"}),e("div",{class:"media-play",children:e(T,{icon:"play",size:"xl"})})]}),!o&&!me&&e(hn,{alt:m,lang:s,index:u})]})})}else if(k==="audio"){const B=aa(E.duration);return e(ge,{children:e(Y,{class:`media media-audio ${t}`,"data-formatted-duration":o?void 0:B,"data-has-alt":!me,onClick:d,style:!o&&ke,children:[o?e("audio",{src:b||v,preload:"none",controls:!0,autoplay:!0}):f?e("img",{src:f,alt:me?"":m,width:S,height:F,"data-orientation":$,loading:"lazy"}):null,!o&&e(G,{children:[e("div",{class:"media-play",children:e(T,{icon:"play",size:"xl"})}),!me&&e(hn,{alt:m,lang:s,index:u})]})]})})}}function ta(t){return e(So,{children:({ref:n,closeMenu:a})=>e(ot,{...t,ref:n,onClick:({detail:s})=>a(s===0?"Enter":void 0)})})}const Ki=280,qi=140;function Wi(t,n){return n.v1.accounts.$select(t).fetch()}const Gi=Kt(Wi),vt={public:"Public",unlisted:"Unlisted",private:"Followers only",direct:"Private mention"},Yi=window.ontouchstart!==void 0&&/iPad|iPhone|iPod/.test(navigator.userAgent),na=80;function Ji(t){var n;return(n=t==null?void 0:t.options)!=null&&n.length?`📊:
${t.options.map(a=>`- ${a.title}${a.votesCount>=0?` (${a.votesCount})`:""}`).join(`
`)}`:""}function pn(t){const{spoilerText:n,content:a,poll:s}=t;return(n?`${n}

`:"")+wn(a)+Ji(s)}function Xe({statusID:t,status:n,instance:a,size:s="m",contentTextWeight:o,readOnly:r,enableCommentHint:c,withinContext:u,skeleton:d,enableTranslate:g,forceTranslate:m,previewMode:p,onMediaClick:h,quoted:f,onStatusLinkClick:b=()=>{},showFollowedTags:v,allowContextMenu:k,showActionsBar:E}){var zn,Nn,Bn;if(d)return e("div",{class:"status skeleton",children:[e(Qe,{size:"xxl"}),e("div",{class:"container",children:[e("div",{class:"meta",children:"███ ████████"}),e("div",{class:"content-container",children:e("div",{class:"content",children:e("p",{children:"████ ████████"})})})]})]});const{masto:_,instance:y,authenticated:S}=Ge({instance:a}),{instance:F}=Ge(),R=y===F;let L=Re(t||(n==null?void 0:n.id),y);const $=wt(M);if(n||(n=$.statuses[L]||$.statuses[t],L=Re(n==null?void 0:n.id,y)),!n)return null;const{account:{acct:D,avatar:j,avatarStatic:U,id:H,url:Z,displayName:ue,username:W,emojis:ye,bot:Y,group:Te},id:I,repliesCount:N,reblogged:te,reblogsCount:ce,favourited:de,favouritesCount:fe,bookmarked:Le,poll:ke,muted:ze,sensitive:me,spoilerText:ge,visibility:B,language:q,editedAt:ve,filtered:Ce,card:ae,createdAt:Be,inReplyToId:Se,inReplyToAccountId:Ae,content:he,mentions:_e,mediaAttachments:re,reblog:Me,uri:Gt,url:x,emojis:A,tags:O,_deleted:C,_pinned:X}=n,K=Fe(()=>z.session.get("currentAccount"),[]),V=Fe(()=>K&&K===H,[H,K]),J=Fo(Oi),ie=!V&&!r&&!p&&Ra(Ce,J);if((ie==null?void 0:ie.action)==="hide")return null;const we=l=>{l.shiftKey};if(s!=="l"&&ie)return e(tr,{status:n,filterInfo:ie,instance:y,containerProps:{onMouseEnter:we},showFollowedTags:!0});const De=new Date(Be),Pe=new Date(ve);let Ve=_e==null?void 0:_e.find(l=>l.id===Ae);!Ve&&Ae===I&&(Ve={url:Z,username:W,displayName:ue});const[et,Et]=ee(Ve);if(!u&&!et&&Ae){const l=M.accounts[Ae];l?Et(l):Gi(Ae,_).then(P=>{Et(P),M.accounts[P.id]=P}).catch(P=>{})}const xt=Ae===K||(_e==null?void 0:_e.find(l=>l.id===K)),Ne=Fe(()=>!!(z.account.get("preferences")||{})["reading:expand:spoilers"],[]),xn=Fe(()=>(z.account.get("preferences")||{})["reading:expand:media"]||"default",[]),it=p||Ne||!!$.spoilers[I],rt=p||xn==="show_all"||!!$.spoilersMedia[I];if(Me)return Te?e("div",{"data-state-post-id":L,class:"status-group",onMouseEnter:we,children:[e("div",{class:"status-pre-meta",children:[e(T,{icon:"group",size:"l",alt:"Group"})," ",e(ft,{account:n.account,instance:y,showAvatar:!0})]}),e(Xe,{status:t?null:Me,statusID:t?Me.id:null,instance:y,size:s,contentTextWeight:o,readOnly:r})]}):e("div",{"data-state-post-id":L,class:"status-reblog",onMouseEnter:we,children:[e("div",{class:"status-pre-meta",children:[e(T,{icon:"rocket",size:"l"})," ",e(ft,{account:n.account,instance:y,showAvatar:!0})," ",e("span",{children:"boosted"})]}),e(Xe,{status:t?null:Me,statusID:t?Me.id:null,instance:y,size:s,contentTextWeight:o,readOnly:r,enableCommentHint:!0})]});if(v&&((zn=$.statusFollowedTags[L])!=null&&zn.length))return e("div",{"data-state-post-id":L,class:"status-followed-tags",onMouseEnter:we,children:[e("div",{class:"status-pre-meta",children:[e(T,{icon:"hashtag",size:"l"})," ",$.statusFollowedTags[L].slice(0,3).map(l=>e(ot,{to:y?`/${y}/t/${l}`:`/t/${l}`,class:"status-followed-tag-item",children:l},l))]}),e(Xe,{status:t?null:n,statusID:t?n.id:null,instance:y,size:s,contentTextWeight:o,readOnly:r,enableCommentHint:!0})]});const le=s==="l",[Yt,za]=ee(m),Tn=Sa(!0),Na=$.settings.contentTranslationHideLanguages||[],{contentTranslation:Jt,contentTranslationAutoInline:Ln}=$.settings;Jt||(g=!1);const An=Fe(()=>{if(!Jt||!Ln||r||u&&!le||p||ge||me||ke||ae||re!=null&&re.length)return!1;const l=mn(he);return l>0&&l<=qi},[Jt,Ln,r,u,le,p,ge,me,ke,ae,re,he]),[Zt,Tt]=ee(!1),Ba=Bt(),Va=Bt(),Ua=Bt(),Cn="Read more →",Lt=ne(null),st="Sorry, your current logged-in instance can't interact with this post from another instance.",Sn=yn(()=>Math.max(Math.round((ge.length+mn(he))/140)||1,1),[ge,he]),Fn=jt(De),$n=ve&&jt(Pe);let ct=S&&B!=="direct"&&B!=="private";B==="private"&&V&&(ct=!0);const At=l=>{var P;if(!R||!S)return alert(st);(l!=null&&l.shiftKey||(P=l==null?void 0:l.syntheticEvent)!=null&&P.shiftKey)&&Ea({replyToStatus:n})||(M.showCompose={replyToStatus:n})},Xt=Fe(()=>re.some(l=>{var P,Q;return!((Q=(P=l.description)==null?void 0:P.trim)!=null&&Q.call(P))}),[re]),xr=async()=>{if(!R||!S)return alert(st),!1;try{if(!te){let l="Boost this post?";if(Xt&&(l+=`

⚠️ Some media have no descriptions.`),!confirm(l))return!1}if(M.statuses[L]={...n,reblogged:!te,reblogsCount:ce+(te?-1:1)},te){const l=await _.v1.statuses.$select(I).unreblog();return Ie(l,y),!0}else{const l=await _.v1.statuses.$select(I).reblog();return Ie(l,y),!0}}catch{return M.statuses[L]=n,!1}},Qt=async()=>{if(!R||!S)return alert(st),!1;try{if(M.statuses[L]={...n,reblogged:!te,reblogsCount:ce+(te?-1:1)},te){const l=await _.v1.statuses.$select(I).unreblog();return Ie(l,y),!0}else{const l=await _.v1.statuses.$select(I).reblog();return Ie(l,y),!0}}catch{return M.statuses[L]=n,!1}},Ct=async()=>{if(!R||!S)return alert(st);try{if(M.statuses[L]={...n,favourited:!de,favouritesCount:fe+(de?-1:1)},de){const l=await _.v1.statuses.$select(I).unfavourite();Ie(l,y)}else{const l=await _.v1.statuses.$select(I).favourite();Ie(l,y)}}catch{M.statuses[L]=n}},en=async()=>{if(!R||!S)return alert(st);try{if(M.statuses[L]={...n,bookmarked:!Le},Le){const l=await _.v1.statuses.$select(I).unbookmark();Ie(l,y)}else{const l=await _.v1.statuses.$select(I).bookmark();Ie(l,y)}}catch{M.statuses[L]=n}},Pn=!!q&&q!==Tn&&!Ut([q],[Tn])&&!Na.find(l=>q===l||Ut([q],[l])),In=ne(),Rn=ne();async function ja(l){var se,Oe,Mt,Vn;l&&(In.current=_.v1.statuses.$select(t).rebloggedBy.list({limit:na}),Rn.current=_.v1.statuses.$select(t).favouritedBy.list({limit:na}));const[{value:P},{value:Q}]=await Promise.allSettled([In.current.next(),Rn.current.next()]);if((se=P.value)!=null&&se.length||(Oe=Q.value)!=null&&Oe.length){const tn=[];return(Mt=P.value)!=null&&Mt.length&&tn.push(...P.value.map(dt=>(dt._types=["reblog"],dt))),(Vn=Q.value)!=null&&Vn.length&&tn.push(...Q.value.map(dt=>(dt._types=["favourite"],dt))),{value:tn,done:P.done&&Q.done}}return{value:[],done:!0}}const Ha=ne(),Dn=e(G,{children:[!le&&e(G,{children:[e($o,{children:[e("span",{class:"ib",children:[e(T,{icon:at[B],size:"s"})," ",e("span",{children:vt[B]})]})," ",e("span",{class:"ib",children:[N>0&&e("span",{children:[e(T,{icon:"comment2",alt:"Replies",size:"s"})," ",e("span",{children:We(N)})]})," ",ce>0&&e("span",{children:[e(T,{icon:"rocket",alt:"Boosts",size:"s"})," ",e("span",{children:We(ce)})]})," ",fe>0&&e("span",{children:[e(T,{icon:"heart",alt:"Likes",size:"s"})," ",e("span",{children:We(fe)})]})]}),e("br",{}),Fn]}),e(ta,{to:y?`/${y}/s/${I}`:`/s/${I}`,onClick:l=>{b(l,n)},children:[e(T,{icon:"arrow-right"}),e("span",{children:["View post by @",W||D]})]})]}),!!ve&&e(xe,{onClick:()=>{Tt(I)},children:[e(T,{icon:"history"}),e("span",{children:["Show Edit History",e("br",{}),e("small",{class:"more-insignificant",children:["Edited: ",$n]})]})]}),(!le||!!ve)&&e(nn,{}),le&&e(xe,{onClick:()=>{M.showGenericAccounts={heading:"Boosted/Liked by…",fetchAccounts:ja,instance:y,showReactions:!0}},children:[e(T,{icon:"react"}),e("span",{children:["Boosted/Liked by",e("span",{class:"more-insignificant",children:"…"})]})]}),!le&&R&&e(G,{children:[e("div",{class:"menu-horizontal",children:[e(rn,{subMenu:!0,confirmLabel:e(G,{children:[e(T,{icon:"rocket"}),e("span",{children:te?"Unboost?":"Boost to everyone?"})]}),menuFooter:Xt&&!te&&e("div",{class:"footer",children:[e(T,{icon:"alert"}),"Some media have no descriptions."]}),disabled:!ct,onClick:async()=>{try{const l=await Qt();!le&&l&&Ee(te?`Unboosted @${W||D}'s post`:`Boosted @${W||D}'s post`)}catch{}},children:[e(T,{icon:"rocket",style:{color:te&&"var(--reblog-color)"}}),e("span",{children:te?"Unboost":"Boost…"})]}),e(xe,{onClick:()=>{try{Ct(),le||Ee(de?`Unliked @${W||D}'s post`:`Liked @${W||D}'s post`)}catch{}},children:[e(T,{icon:"heart",style:{color:de&&"var(--favourite-color)"}}),e("span",{children:de?"Unlike":"Like"})]})]}),e("div",{class:"menu-horizontal",children:[e(xe,{onClick:At,children:[e(T,{icon:"comment"}),e("span",{children:"Reply"})]}),e(xe,{onClick:()=>{try{en(),le||Ee(Le?`Unbookmarked @${W||D}'s post`:`Bookmarked @${W||D}'s post`)}catch{}},children:[e(T,{icon:"bookmark",style:{color:Le&&"var(--link-color)"}}),e("span",{children:Le?"Unbookmark":"Bookmark"})]})]})]}),g?e("div",{class:gt?"menu-horizontal":"",children:[e(xe,{disabled:Yt,onClick:()=>{za(!0)},children:[e(T,{icon:"translate"}),e("span",{children:"Translate"})]}),gt&&e(xe,{onClick:()=>{const l=pn(n);l&&ea(l,q)},children:[e(T,{icon:"speak"}),e("span",{children:"Speak"})]})]}):(!q||Pn)&&e("div",{class:gt?"menu-horizontal":"",children:[e(ta,{to:`${y?`/${y}`:""}/s/${I}?translate=1`,children:[e(T,{icon:"translate"}),e("span",{children:"Translate"})]}),gt&&e(xe,{onClick:()=>{const l=pn(n);l&&ea(l,q)},children:[e(T,{icon:"speak"}),e("span",{children:"Speak"})]})]}),(!le&&R||g)&&e(nn,{}),e(xe,{href:x,target:"_blank",children:[e(T,{icon:"external"}),e("small",{class:"menu-double-lines",children:er(x)})]}),e("div",{class:"menu-horizontal",children:[e(xe,{onClick:()=>{try{navigator.clipboard.writeText(x),Ee("Link copied")}catch{Ee("Unable to copy link")}},children:[e(T,{icon:"link"}),e("span",{children:"Copy"})]}),(navigator==null?void 0:navigator.share)&&((Nn=navigator==null?void 0:navigator.canShare)==null?void 0:Nn.call(navigator,{url:x}))&&e(xe,{onClick:()=>{try{navigator.share({url:x})}catch{alert("Sharing doesn't seem to work.")}},children:[e(T,{icon:"share"}),e("span",{children:"Share…"})]})]}),(V||xt)&&e(nn,{}),(V||xt)&&e(xe,{onClick:async()=>{try{const l=await _.v1.statuses.$select(I)[ze?"unmute":"mute"]();Ie(l,y),Ee(ze?"Conversation unmuted":"Conversation muted")}catch{Ee(ze?"Unable to unmute conversation":"Unable to mute conversation")}},children:ze?e(G,{children:[e(T,{icon:"unmute"}),e("span",{children:"Unmute conversation"})]}):e(G,{children:[e(T,{icon:"mute"}),e("span",{children:"Mute conversation"})]})}),V&&/(public|unlisted|private)/i.test(B)&&e(xe,{onClick:async()=>{try{const l=await _.v1.statuses.$select(I)[X?"unpin":"pin"]();Ee(X?"Post unpinned from profile":"Post pinned to profile")}catch{Ee(X?"Unable to unpin post":"Unable to pin post")}},children:X?e(G,{children:[e(T,{icon:"unpin"}),e("span",{children:"Unpin from profile"})]}):e(G,{children:[e(T,{icon:"pin"}),e("span",{children:"Pin to profile"})]})}),V&&e("div",{class:"menu-horizontal",children:[e(xe,{onClick:()=>{M.showCompose={editStatus:n}},children:[e(T,{icon:"pencil"}),e("span",{children:"Edit"})]}),le&&e(rn,{subMenu:!0,confirmLabel:e(G,{children:[e(T,{icon:"trash"}),e("span",{children:"Delete this post?"})]}),menuItemClassName:"danger",onClick:()=>{(async()=>{try{await _.v1.statuses.$select(I).remove();const l=wa(I,y);l._deleted=!0,Ee("Deleted")}catch{Ee("Unable to delete")}})()},children:[e(T,{icon:"trash"}),e("span",{children:"Delete…"})]})]})]}),Mn=ne(),[St,lt]=ee(!1),[Ft,$t]=ee({}),Pt=k||!le&&!p&&!C&&!f,Ka=va(Yi&&Pt?l=>{var Oe;if(l.pointerType==="mouse")return;const{clientX:P,clientY:Q}=((Oe=l.touches)==null?void 0:Oe[0])||l,se=l.target.closest("a");se&&/^https?:\/\//.test(se.getAttribute("href"))||(l.preventDefault(),$t({anchorPoint:{x:P,y:Q},direction:"right"}),lt(!0))}:null,{threshold:600,captureEvent:!0,detect:"touch",cancelOnMovement:2}),It=!r&&!p&&!f,qa=He("r, shift+r",At,{enabled:It}),Wa=He("f, l",()=>{try{Ct(),le||Ee(de?`Unliked @${W||D}'s post`:`Liked @${W||D}'s post`)}catch{}},{enabled:It}),Ga=He("d",()=>{try{en(),le||Ee(Le?`Unbookmarked @${W||D}'s post`:`Bookmarked @${W||D}'s post`)}catch{}},{enabled:It}),Ya=He("shift+b",()=>{(async()=>{try{const l=await Qt();!le&&l&&Ee(te?`Unboosted @${W||D}'s post`:`Boosted @${W||D}'s post`)}catch{}})()},{enabled:It&&ct}),Ja=He("x",l=>{const P=document.activeElement.closest(".status-link, .status-focus");if(P){const Q=P.querySelector(".spoiler-button:not(.spoiling)");if(Q)l.stopPropagation(),Q.click();else{const se=P.querySelector(".spoiler-media-button:not(.spoiling)");se&&(l.stopPropagation(),se.click())}}}),Rt=re.slice(0,le?void 0:4),Dt=re.length>1&&Rt.some(l=>!!l.description&&!Da(l.description)),Za=Fe(()=>{if(!Dt)return null;const l=[];return Rt.forEach((P,Q)=>{if(!P.description)return;const se=l.findIndex(Oe=>Oe.media.description===P.description);se===-1?l.push({media:P,indices:[Q]}):l[se].indices.push(Q)}),l.map(({media:P,indices:Q})=>e("div",{"data-caption-index":Q.map(se=>se+1).join(" "),onClick:se=>{se.preventDefault(),se.stopPropagation(),M.showMediaAlt={alt:P.description,lang:q}},title:P.description,children:[e("sup",{children:Q.map(se=>se+1).join(" ")})," ",P.description]},P.id))},[Dt,Rt,q]),ut=Fe(()=>{var l;return!!Se&&Ae===((l=n.account)==null?void 0:l.id)||!!$.statusThreadNumber[L]},[Se,Ae,(Bn=n.account)==null?void 0:Bn.id,$.statusThreadNumber[L]]),Xa=Fe(()=>c&&!ut&&!u&&!Se&&B==="public"&&N>0,[c,ut,u,Se,N,B]),On=Fe(()=>{if(ae||ke||me||ge||re!=null&&re.length||ut||u||Se||N<=0||!/[??？︖❓❔⁇⁈⁉¿‽؟]/.test(he))return!1;const Q=mn(he);if(Q>0&&Q<=Ki)return!0},[ae,ke,me,ge,re,Me,ut,u,Se,N,he]);return e("article",{"data-state-post-id":L,ref:l=>{var Q;Lt.current=l;const P=((Q=l==null?void 0:l.closest)==null?void 0:Q.call(l,".timeline-item, .timeline-item-alt, .status-link, .status-focus"))||l;qa.current=P,Wa.current=P,Ga.current=P,Ya.current=P,Ja.current=P},tabindex:"-1",class:`status ${!u&&Se&&et?"status-reply-to":""} visibility-${B} ${X?"status-pinned":""} ${{s:"small",m:"medium",l:"large"}[s]} ${C?"status-deleted":""} ${f?"status-card":""} ${St?"status-menu-open":""}`,onMouseEnter:we,onContextMenu:l=>{var se,Oe;if(!Pt||l.metaKey)return;const P=l.target.closest("a");if(P&&/^https?:\/\//.test(P.getAttribute("href")))return;const Q=(se=window.getSelection)==null?void 0:se.call(window);if(Q.toString().length>0){const{anchorNode:Mt}=Q;if((Oe=Lt.current)!=null&&Oe.contains(Mt))return}l.preventDefault(),$t({anchorPoint:{x:l.clientX,y:l.clientY},direction:"right"}),lt(!0)},...Pt?Ka():{},children:[Pt&&e(Po,{ref:Mn,state:St?"open":void 0,...Ft,onClose:l=>{var P,Q,se;lt(!1),(l==null?void 0:l.reason)==="click"&&((se=(Q=(P=Lt.current)==null?void 0:P.closest("[tabindex]"))==null?void 0:Q.focus)==null||se.call(Q))},portal:{target:document.body},containerProps:{style:{zIndex:1001},onClick:()=>{var l,P;(P=(l=Mn.current)==null?void 0:l.closeMenu)==null||P.call(l)}},overflow:"auto",boundingBoxPadding:Ca(),unmountOnClose:!0,children:Dn}),E&&s!=="l"&&!p&&!r&&!C&&!f&&e("div",{class:`status-actions ${St==="actions-bar"?"open":""}`,ref:Ha,children:[e(nt,{size:"s",title:"Reply",alt:"Reply",class:"reply-button",icon:"comment",iconSize:"m",onClick:At}),e(nt,{size:"s",checked:de,title:["Like","Unlike"],alt:["Like","Liked"],class:"favourite-button",icon:"heart",iconSize:"m",count:fe,onClick:()=>{try{Ct(),Ee(de?`Unliked @${W||D}'s post`:`Liked @${W||D}'s post`)}catch{}}}),e("button",{type:"button",title:"More",class:"plain more-button",onClick:l=>{l.preventDefault(),l.stopPropagation(),$t({anchorRef:{current:l.currentTarget},align:"end",direction:"bottom",gap:4}),lt("actions-bar")},children:e(T,{icon:"more2",size:"m",alt:"More"})})]}),s!=="l"&&e("div",{class:"status-badge",children:[te&&e(T,{class:"reblog",icon:"rocket",size:"s"}),de&&e(T,{class:"favourite",icon:"heart",size:"s"}),Le&&e(T,{class:"bookmark",icon:"bookmark",size:"s"}),X&&e(T,{class:"pin",icon:"pin",size:"s"})]}),s!=="s"&&e("a",{href:Z,tabindex:"-1",title:`@${D}`,onClick:l=>{l.preventDefault(),l.stopPropagation(),M.showAccount={account:n.account,instance:y}},children:e(Qe,{url:U||j,size:"xxl",squircle:Y})}),e("div",{class:"container",children:[e("div",{class:"meta",children:[e("span",{class:"meta-name",children:e(ft,{account:n.account,instance:y,showAvatar:s==="s",showAcct:le})})," ",s!=="l"&&(C?e("span",{class:"status-deleted-tag",children:"Deleted"}):x&&!p&&!f?e(ot,{to:y?`/${y}/s/${I}`:`/s/${I}`,onClick:l=>{l.metaKey||l.ctrlKey||l.shiftKey||l.altKey||l.which===2||(l.preventDefault(),l.stopPropagation(),b==null||b(l,n),$t({anchorRef:{current:l.currentTarget},align:"end",direction:"bottom",gap:4}),lt(!0))},class:`time ${St&&(Ft!=null&&Ft.anchorRef)?"is-open":""}`,children:[Xa&&!On?e(T,{icon:"comment2",size:"s",alt:`${N} ${N===1?"reply":"replies"}`}):e(T,{icon:at[B],alt:vt[B],size:"s"})," ",e(kt,{datetime:De,format:"micro"}),!p&&e(T,{icon:"more2",class:"more"})]}):e("span",{class:"time",children:[e(T,{icon:at[B],alt:vt[B],size:"s"})," ",e(kt,{datetime:De,format:"micro"})]}))]}),B==="direct"&&e(G,{children:[e("div",{class:"status-direct-badge",children:"Private mention"})," "]}),!u&&e(G,{children:ut?e("div",{class:"status-thread-badge",children:[e(T,{icon:"thread",size:"s"}),"Thread",$.statusThreadNumber[L]?` ${$.statusThreadNumber[L]}/X`:""]}):!!Se&&!!et&&(!!ge||!_e.find(l=>l.id===Ae))&&e("div",{class:"status-reply-badge",children:[e(T,{icon:"reply"})," ",e(ft,{account:et,instance:y,short:!0})]})}),e("div",{class:`content-container ${ge||me?"has-spoiler":""} ${it?"show-spoiler":""} ${rt?"show-media":""}`,"data-content-text-weight":o?Sn():null,style:(le||o)&&{"--content-text-weight":Sn()},children:[!!ge&&e(G,{children:[e("div",{class:"content spoiler-content",lang:q,dir:"auto",ref:Ba,"data-read-more":Cn,children:e("p",{children:e(_t,{text:ge,emojis:A})})}),Ne||p?e("div",{class:"spoiler-divider",children:[e(T,{icon:"eye-open"})," Content warning"]}):e("button",{class:`light spoiler-button ${it?"spoiling":""}`,type:"button",onClick:l=>{l.preventDefault(),l.stopPropagation(),it?(delete M.spoilers[I],Ne||delete M.spoilersMedia[I]):(M.spoilers[I]=!0,Ne||(M.spoilersMedia[I]=!0))},children:[e(T,{icon:it?"eye-open":"eye-close"})," ",it?"Show less":"Show content"]})]}),!!he&&e("div",{class:"content",ref:Va,"data-read-more":Cn,children:[e("div",{lang:q,dir:"auto",class:"inner-content",onClick:yi({mentions:_e,instance:y,previewMode:p,statusURL:x}),dangerouslySetInnerHTML:{__html:Fa(he,{emojis:A,postEnhanceDOM:l=>{l.querySelectorAll('a.u-url[target="_blank"]').forEach(P=>{/http/i.test(P.innerText.trim())||P.removeAttribute("target")})}})}}),e(nr,{id:I,instance:y,level:f})]}),!!ke&&e(Mi,{lang:q,poll:ke,readOnly:r||!R||!S,onUpdate:l=>{M.statuses[L].poll=l},refresh:()=>_.v1.polls.$select(ke.id).fetch().then(l=>{M.statuses[L].poll=l}).catch(l=>{}),votePoll:l=>_.v1.polls.$select(ke.id).votes.create({choices:l}).then(P=>{M.statuses[L].poll=P}).catch(P=>{})}),((g||An)&&!!he.trim()&&!!wn(kn(he,A))&&Pn||Yt)&&e(Pi,{forceTranslate:Yt||An,mini:!le&&!u,sourceLanguage:q,text:pn(n)}),!p&&me&&!!re.length&&xn!=="show_all"&&e("button",{class:`plain spoiler-media-button ${rt?"spoiling":""}`,type:"button",hidden:!Ne&&!!ge,onClick:l=>{l.preventDefault(),l.stopPropagation(),rt?delete M.spoilersMedia[I]:M.spoilersMedia[I]=!0},children:[e(T,{icon:rt?"eye-open":"eye-close"})," ",rt?"Show less":"Show media"]}),!!re.length&&e(Zi,{lang:q,enabled:Dt,captionChildren:Za,children:e("div",{ref:Ua,class:`media-container media-eq${re.length} ${re.length>2?"media-gt2":""} ${re.length>4?"media-gt4":""}`,children:Rt.map((l,P)=>e(Hi,{media:l,autoAnimate:le,showCaption:re.length===1,lang:q,altIndex:Dt&&!!l.description&&P+1,to:`/${y}/s/${I}?${u?"media":"media-only"}=${P+1}`,onClick:h?Q=>{h(Q,P,l,n)}:void 0},l.id))})}),!!ae&&/^https/i.test(ae==null?void 0:ae.url)&&!me&&!ge&&!ke&&!re.length&&!$.statusQuotes[L]&&e(Xi,{card:ae,selfReferential:(ae==null?void 0:ae.url)===n.url||(ae==null?void 0:ae.url)===n.uri,instance:F})]}),!le&&On&&e("div",{class:"content-comment-hint insignificant",children:[e(T,{icon:"comment2",alt:"Replies"})," ",N]}),le&&e(G,{children:[e("div",{class:"extra-meta",children:C?e("span",{class:"status-deleted-tag",children:"Deleted"}):e(G,{children:[e(T,{icon:at[B],alt:vt[B]})," ",e("a",{href:x,target:"_blank",rel:"noopener noreferrer",children:e("time",{class:"created",datetime:De.toISOString(),title:De.toLocaleString(),children:Fn})}),ve&&e(G,{children:[" ","• ",e(T,{icon:"pencil",alt:"Edited"})," ",e("time",{tabIndex:"0",class:"edited",datetime:Pe.toISOString(),onClick:()=>{Tt(I)},children:$n})]})]})}),e("div",{class:`actions ${C?"disabled":""}`,children:[e("div",{class:"action has-count",children:e(nt,{title:"Reply",alt:"Comments",class:"reply-button",icon:"comment",count:N,onClick:At})}),e(rn,{disabled:!ct,onClick:Qt,confirmLabel:e(G,{children:[e(T,{icon:"rocket"}),e("span",{children:te?"Unboost?":"Boost to everyone?"})]}),menuFooter:Xt&&!te&&e("div",{class:"footer",children:[e(T,{icon:"alert"}),"Some media have no descriptions."]}),children:e("div",{class:"action has-count",children:e(nt,{checked:te,title:["Boost","Unboost"],alt:["Boost","Boosted"],class:"reblog-button",icon:"rocket",count:ce,disabled:!ct})})}),e("div",{class:"action has-count",children:e(nt,{checked:de,title:["Like","Unlike"],alt:["Like","Liked"],class:"favourite-button",icon:"heart",count:fe,onClick:Ct})}),e("div",{class:"action",children:e(nt,{checked:Le,title:["Bookmark","Unbookmark"],alt:["Bookmark","Bookmarked"],class:"bookmark-button",icon:"bookmark",onClick:en})}),e(_n,{portal:{target:document.querySelector(".status-deck")||document.body},align:"end",gap:4,overflow:"auto",viewScroll:"close",menuButton:e("div",{class:"action",children:e("button",{type:"button",title:"More",class:"plain more-button",children:e(T,{icon:"more",size:"l",alt:"More"})})}),children:Dn})]})]})]}),!!Zt&&e(qt,{class:"light",onClick:l=>{l.target===l.currentTarget&&Tt(!1)},children:e(Qi,{statusID:Zt,instance:y,fetchStatusHistory:()=>_.v1.statuses.$select(Zt).history.list(),onClose:()=>{var l;Tt(!1),(l=Lt.current)==null||l.focus()}})})]})}function Zi(t){const{enabled:n,children:a,lang:s,captionChildren:o}=t;return!n||!o?a:e("figure",{class:"media-figure-multiple",children:[a,e("figcaption",{lang:s,dir:"auto",children:o})]})}function Xi({card:t,selfReferential:n,instance:a}){var H;const s=wt(M),{blurhash:o,title:r,description:c,html:u,providerName:d,providerUrl:g,authorName:m,authorUrl:p,width:h,height:f,image:b,imageDescription:v,url:k,type:E,embedUrl:_,language:y,publishedAt:S}=t,F=r||d||m,L=h/f>=1.2?"large":"",[$,D]=ee(null);if(pe(()=>{F&&b&&!n&&_a(k)&&ka(a,k).then(Z=>{if(!Z)return;const{id:ue,url:W}=Z;D("#"+W)})},[F,b,n]),s.unfurledLinks[k])return null;const j=/<iframe/i.test(u),U=yn(Z=>{j&&(Z.preventDefault(),M.showEmbedModal={html:u,url:k||_,width:h,height:f})},[j]);if(F&&(b||E==="photo"&&o)){const Z=new URL(k).hostname.replace(/^www\./,"").replace(/\/$/,"");let ue;const W=b&&o?ga(o):null;if(!b){const Te=Io(o,44,44),I=document.createElement("canvas");I.width=44,I.height=44;const N=I.getContext("2d"),te=N.createImageData(44,44);te.data.set(Te),N.putImageData(te,0,0),ue=I.toDataURL()}return e("a",{href:$||k,target:$?null:"_blank",rel:"nofollow noopener noreferrer",class:`card link ${ue?"":L}`,lang:y,dir:"auto",style:{"--average-color":W&&`rgb(${W.join(",")})`},onClick:U,children:[e("div",{class:"card-image",children:e("img",{src:b||ue,width:h,height:f,loading:"lazy",alt:v||"",onError:ye=>{try{ye.target.style.display="none"}catch{}}})}),e("div",{class:"meta-container",children:[e("p",{class:"meta domain",dir:"auto",children:Z}),e("p",{class:"title",dir:"auto",children:r}),e("p",{class:"meta",dir:"auto",children:c||!!S&&e(kt,{datetime:S,format:"micro"})})]})]})}else{if(E==="photo")return e("a",{href:k,target:"_blank",rel:"nofollow noopener noreferrer",class:"card photo",onClick:U,children:e("img",{src:_,width:h,height:f,alt:r||c,loading:"lazy",style:{height:"auto",aspectRatio:`${h}/${f}`}})});if(E==="video"&&/youtube/i.test(d)){const Z=(H=k.match(/watch\?v=([^&]+)/))==null?void 0:H[1];if(Z)return e("lite-youtube",{videoid:Z,nocookie:!0})}if(F&&!b){const Z=new URL(k).hostname.replace(/^www\./,"");return e("a",{href:$||k,target:$?null:"_blank",rel:"nofollow noopener noreferrer",class:"card link no-image",lang:y,onClick:U,children:e("div",{class:"meta-container",children:[e("p",{class:"meta domain",children:[e(T,{icon:"link",size:"s"})," ",e("span",{children:Z})]}),e("p",{class:"title",children:r}),e("p",{class:"meta",children:c||d||m})]})})}}}function Qi({statusID:t,instance:n,fetchStatusHistory:a=()=>{},onClose:s}){const[o,r]=ee("default"),[c,u]=ee([]);return pe(()=>{r("loading"),(async()=>{try{const d=await a();u(d),r("default")}catch{r("error")}})()},[]),e("div",{id:"edit-history",class:"sheet",children:[!!s&&e("button",{type:"button",class:"sheet-close",onClick:s,children:e(T,{icon:"x"})}),e("header",{children:[e("h2",{children:"Edit History"}),o==="error"&&e("p",{children:"Failed to load history"}),o==="loading"&&e("p",{children:[e(Wt,{abrupt:!0})," Loading…"]})]}),e("main",{tabIndex:"-1",children:c.length>0&&e("ol",{children:c.map(d=>{const{createdAt:g}=d,m=new Date(g);return e("li",{class:"history-item",children:[e("h3",{children:e("time",{children:jt(m,{formatOpts:{weekday:"short",second:"numeric"}})})}),e(Xe,{status:d,instance:n,size:"s",withinContext:!0,readOnly:!0,previewMode:!0})]},g)})})})]})}function nt({checked:t,count:n,class:a,title:s,alt:o,size:r,icon:c,iconSize:u="l",onClick:d,...g}){typeof s=="string"&&(s=[s,s]),typeof o=="string"&&(o=[o,o]);const[m,p]=ee(s[0]||""),[h,f]=ee(o[0]||"");return pe(()=>{t?(p(s[1]||""),f(o[1]||"")):(p(s[0]||""),f(o[0]||""))},[t,s,o]),e("button",{type:"button",title:m,class:`plain ${r?"small":""} ${a} ${t?"checked":""}`,onClick:b=>{d&&(b.preventDefault(),b.stopPropagation(),d(b))},...g,children:[e(T,{icon:c,size:u,alt:h}),!!n&&e(G,{children:[" ",e("small",{title:n,children:We(n)})]})]})}function aa(t){if(!t)return;let n=Math.floor(t/3600),a=Math.floor(t%3600/60),s=Math.round(t%60);return n===0?`${a}:${s.toString().padStart(2,"0")}`:`${n}:${a.toString().padStart(2,"0")}:${s.toString().padStart(2,"0")}`}function er(t){if(!t)return;const n=new URL(t),{host:a,pathname:s}=n,o=s.replace(/\/$/,""),[r,c,u]=o.match(/\/(@[^\/]+)\/(.*)/)||[];return e(G,{children:[a,c?e(G,{children:["/",c,e("wbr",{}),e("span",{class:"more-insignificant",children:["/",u]})]}):e("span",{class:"more-insignificant",children:o})]})}function tr({status:t,filterInfo:n,instance:a,containerProps:s={},showFollowedTags:o}){var U;const r=wt(M),{id:c,account:{avatar:u,avatarStatic:d,bot:g,group:m},createdAt:p,visibility:h,reblog:f}=t,b=!!f,v=(n==null?void 0:n.titlesStr)||"",k=new Date(p),E=Bi(t.reblog||t),[_,y]=ee(!1),S=va(()=>{y(!0)},{threshold:600,captureEvent:!0,detect:"touch",cancelOnMovement:2}),F=Bt(),R=Re(t.id,a),L=Re(t.id,a)+" "+(Re(f==null?void 0:f.id,a)||""),$=(f==null?void 0:f.id)||c,D=a?`/${a}/s/${$}`:`/s/${$}`,j=o&&!!((U=r.statusFollowedTags[R])!=null&&U.length);return e("div",{class:b?m?"status-group":"status-reblog":j?"status-followed-tags":"",...s,title:E,onContextMenu:H=>{H.preventDefault(),y(!0)},...S(),children:[e("article",{"data-state-post-id":L,class:"status filtered",tabindex:"-1",children:[e("b",{class:"status-filtered-badge clickable badge-meta",title:v,onClick:H=>{H.preventDefault(),y(!0)},children:[e("span",{children:"Filtered"}),e("span",{children:v})]})," ",e(Qe,{url:d||u,squircle:g}),e("span",{class:"status-filtered-info",children:[e("span",{class:"status-filtered-info-1",children:[e(ft,{account:t.account,instance:a})," ",e(T,{icon:at[h],alt:vt[h],size:"s"})," ",b?"boosted":j?e("span",{children:r.statusFollowedTags[R].slice(0,3).map(H=>e("span",{class:"status-followed-tag-item",children:["#",H]},H))}):e(kt,{datetime:k,format:"micro"})]}),e("span",{class:"status-filtered-info-2",children:[b&&e(G,{children:[e(Qe,{url:f.account.avatarStatic||f.account.avatar,squircle:g})," "]}),E]})]})]}),!!_&&e(qt,{class:"light",onClick:H=>{H.target===H.currentTarget&&y(!1)},children:e("div",{id:"filtered-status-peek",class:"sheet",children:[e("button",{type:"button",class:"sheet-close",onClick:()=>y(!1),children:e(T,{icon:"x"})}),e("header",{children:[e("b",{class:"status-filtered-badge",children:"Filtered"})," ",v]}),e("main",{tabIndex:"-1",children:e(ot,{ref:F,class:"status-link",to:D,onClick:()=>{y(!1)},"data-read-more":"Read more →",children:e(Xe,{status:t,instance:a,size:"s",readOnly:!0})})})]})})]})}const nr=bn(({id:t,instance:n,level:a=0})=>{if(!t||!n)return;const s=wt(M),o=Re(t,n),r=s.statusQuotes[o],c=r==null?void 0:r.filter((u,d,g)=>g.findIndex(m=>m.url===u.url)===d);if(c!=null&&c.length&&!(a>2))return c.map(u=>e(ot,{to:`${u.instance?`/${u.instance}`:""}/s/${u.id}`,class:"status-card-link","data-read-more":"Read more →",children:e(Xe,{statusID:u.id,instance:u.instance,size:"s",quoted:a+1,enableCommentHint:!0})},u.instance+u.id))}),oa=bn(Xe,(t,n)=>{const{status:a,...s}=t,{status:o,...r}=n;return(a==null?void 0:a.id)===(o==null?void 0:o.id)&&Ro(s,r)});var ar={PHANPY_CLIENT_NAME:"IMSB",PHANPY_WEBSITE:"https://app.imsb.app",PHANPY_LINGVA_INSTANCES:"lingva.phanpy.social lingva.lunar.icu lingva.garudalinux.org translate.plausibility.cloud",PHANPY_PRIVACY_POLICY_URL:"https://github.com/cheeaun/phanpy/blob/main/PRIVACY.MD",VITE_APP_ENV:"production",BASE_URL:"./",MODE:"production",DEV:!1,PROD:!0,SSR:!1};const{PHANPY_IMG_ALT_API_URL:ia}=ar,or=En.reduce((t,n)=>{const[a,s,o]=n;return t[a]={common:s,native:o},t},{}),Ma={"5 minutes":5*60,"30 minutes":30*60,"1 hour":60*60,"6 hours":6*60*60,"12 hours":12*60*60,"1 day":24*60*60,"3 days":3*24*60*60,"7 days":7*24*60*60},ir=Object.values(Ma),ra=24*60*60,sa=t=>{if(!t)return ra;const n=(new Date(t).getTime()-Date.now())/1e3;return ir.find(a=>a>=n)||ra},qe=document.createElement("ul");qe.role="listbox";qe.className="text-expander-menu";const rr=16,sr=new IntersectionObserver(t=>{t.forEach(n=>{if(n.isIntersecting){const{left:a,width:s}=n.boundingClientRect,{innerWidth:o}=window;a+s>o&&(qe.style.left=o-s-rr+"px")}})});sr.observe(qe);const Ze=Ut([new Intl.DateTimeFormat().resolvedOptions().locale,...navigator.languages],En.map(t=>t[0]),"en"),Oa=new RegExp(Xn.source,Xn.flags),cr=/(^|[^\/\w])@(([a-z0-9_]+)@[a-z0-9\.\-]+[a-z0-9]+)/gi,lr="$2xxxxxxxxxxxxxxxxxxxxxxx";function ur(t){return t.replace(Oa,lr).replace(cr,"$1@$3")}const dr=/[a-z0-9_]+([a-z0-9_.-]+[a-z0-9_]+)?/i,mr=new RegExp(`(^|[^=\\/\\w])(@${dr.source}(?:@[\\p{L}\\w.-]+[\\w]+)?)`,"uig"),hr=new RegExp("(^|[^=\\/\\w])(#[a-z0-9_]+([a-z0-9_.-]+[a-z0-9_]+)?)(?![\\/\\w])","ig"),pr="[a-zA-Z0-9_]{2,}",fr=new RegExp(`([^A-Za-z0-9_:\\n]|^)(:${pr}:)(?=[^A-Za-z0-9_:]|$)`,"g");function gr(t,{maxCharacters:n=1/0}){let a=t.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&apos;");const{composerCharacterCount:s}=M;let o="";return s>n?(o='<mark class="compose-highlight-exceeded">'+jn(a,n)+"</mark>",a=jn(a,0,n),a+o):a.replace(Oa,'$2<mark class="compose-highlight-url">$3</mark>').replace(mr,'$1<mark class="compose-highlight-mention">$2</mark>').replace(hr,'$1<mark class="compose-highlight-hashtag">$2</mark>').replace(fr,'$1<mark class="compose-highlight-emoji-shortcode">$2</mark>')}function Pr({onClose:t,replyToStatus:n,editStatus:a,draftStatus:s,standalone:o,hasOpener:r}){var Gt;const{masto:c,instance:u}=Ge(),[d,g]=ee("default"),m=ne((s==null?void 0:s.uid)||Do()),p=Ht(),h=p.info,f=Vo(),{statuses:{maxCharacters:b,maxMediaAttachments:v,charactersReservedPerUrl:k}={},mediaAttachments:{supportedMimeTypes:E=[],imageSizeLimit:_,imageMatrixLimit:y,videoSizeLimit:S,videoMatrixLimit:F,videoFrameRateLimit:R}={},polls:{maxOptions:L,maxCharactersPerOption:$,maxExpiration:D,minExpiration:j}={}}=f||{},U=ne(),H=ne(),[Z,ue]=ee("public"),[W,ye]=ee(!1),[Y,Te]=ee(z.session.get("currentLanguage")||Ze),I=ne(Y),[N,te]=ee([]),[ce,de]=ee(null),fe=z.account.get("preferences")||{},Le=()=>{U.current&&U.current.dispatchEvent(new Event("input"))},ke=()=>{setTimeout(()=>{var x;(x=U.current)==null||x.focus()},300)};pe(()=>{if(n){const{spoilerText:x,visibility:A,language:O,sensitive:C}=n;x&&H.current&&(H.current.value=x);const K=[...new Set([n.account.acct,...n.mentions.map(V=>V.acct)])].filter(V=>V!==h.acct);K.length>0&&(U.current.value=`${K.map(V=>`@${V}`).join(" ")} `,Le()),ke(),ue(A==="public"&&fe["posting:default:visibility"]?fe["posting:default:visibility"]:A),Te(O||fe.postingDefaultLanguage||Ze),ye(C&&!!x)}else if(a){const{visibility:x,language:A,sensitive:O,poll:C,mediaAttachments:X}=a,K=!!(C!=null&&C.options)&&{...C,options:C.options.map(V=>(V==null?void 0:V.title)||V),expiresIn:(C==null?void 0:C.expiresIn)||sa(C.expiresAt)};g("loading"),(async()=>{try{const V=await c.v1.statuses.$select(a.id).source.fetch(),{text:J,spoilerText:ie}=V;U.current.value=J,U.current.dataset.source=J,Le(),ke(),H.current.value=ie,ue(x),Te(A||presf.postingDefaultLanguage||Ze),ye(O),de(K),te(X),g("default")}catch(V){alert((V==null?void 0:V.reason)||V),g("error")}})()}else ke(),fe["posting:default:visibility"]&&ue(fe["posting:default:visibility"]),fe["posting:default:language"]&&Te(fe["posting:default:language"]),fe["posting:default:sensitive"]&&ye(fe["posting:default:sensitive"]);if(s){const{status:x,spoilerText:A,visibility:O,language:C,sensitive:X,poll:K,mediaAttachments:V}=s,J=!!(K!=null&&K.options)&&{...K,options:K.options.map(ie=>(ie==null?void 0:ie.title)||ie),expiresIn:(K==null?void 0:K.expiresIn)||sa(K.expiresAt)};U.current.value=x,Le(),ke(),A&&(H.current.value=A),O&&ue(O),Te(C||fe.postingDefaultLanguage||Ze),X!==null&&ye(X),J&&de(J),V&&te(V)}},[s,a,n]);const ze=ne(),me="You have unsaved changes. Discard this post?",ge=()=>{const{value:x,dataset:A}=U.current;if(d==="loading")return!1;const O=N.length>0;if(!x&&!O||N.length>0&&N.every(J=>J.id))return!0;const X=(n==null?void 0:n.account.id)===h.id,K=n&&x.trim()===`@${n.account.acct}`;return!!(!X&&K||x===(A==null?void 0:A.source))},B=()=>ge()?!0:confirm(me);pe(()=>{const x=A=>{ge()||(A.preventDefault(),A.returnValue=me)};return window.addEventListener("beforeunload",x,{capture:!0}),()=>window.removeEventListener("beforeunload",x,{capture:!0})},[]);const q=()=>{const{value:x}=U.current,{value:A}=H.current;return Hn(ur(x))+Hn(A)},ve=()=>{const x=q();M.composerCharacterCount=x};pe(ve,[]);const Ce=window.CloseWatcher,ae=ne(!1);He("esc",()=>{ae.current=!0},{enabled:!Ce,enableOnFormTags:!0}),He("esc",()=>{!o&&ae.current&&B()&&t(),ae.current=!1},{enabled:!Ce,enableOnFormTags:!0,keyup:!0,ignoreEventWhen:x=>{const A=document.querySelectorAll("#modal-container > *"),O=!!A,C=A.length===1&&A[0].querySelector("#compose-container");return O&&!C}}),Ta(()=>{!o&&B()&&t()},[o,B,t]);const Be=ne({}),Se=()=>`${zt()}#${m.current}`,Ae=()=>{if(a)return;const x=Se(),A={key:x,replyTo:n?{id:n.id,account:{id:n.account.id,username:n.account.username,acct:n.account.acct}}:null,draftStatus:{uid:m.current,status:U.current.value,spoilerText:H.current.value,visibility:Z,language:Y,sensitive:W,poll:ce,mediaAttachments:N}};!ha(A,Be.current)&&!ge()&&(Qn.drafts.set(x,{...A,state:"unsaved",updatedAt:Date.now()}).then(()=>{}).catch(O=>{}),Be.current=structuredClone(A))};Zo(Ae,5e3),pe(()=>(Ae(),()=>{Qn.drafts.del(Se())}),[]),pe(()=>{const x=O=>{const{items:C}=O.clipboardData||O.dataTransfer,X=[];for(let K=0;K<C.length;K++){const V=C[K];if(V.kind==="file"){const J=V.getAsFile();J&&E.includes(J.type)&&X.push(J)}}if(X.length>0&&N.length>=v){alert(`You can only attach up to ${v} files.`);return}if(X.length>0){O.preventDefault(),O.stopPropagation();const K=v-N.length,V=X.slice(0,K);if(V.length<=0){alert(`You can only attach up to ${v} files.`);return}const J=V.map(ie=>({file:ie,type:ie.type,size:ie.size,url:URL.createObjectURL(ie),id:null,description:null}));te([...N,...J])}};window.addEventListener("paste",x);const A=O=>{O.dataTransfer.items.length>0&&(O.preventDefault(),O.stopPropagation())};return window.addEventListener("dragover",A),window.addEventListener("drop",x),()=>{window.removeEventListener("paste",x),window.removeEventListener("dragover",A),window.removeEventListener("drop",x)}},[N]);const[he,_e]=ee(!1),[re,Me]=Fe(()=>{const x=[],A=[],{contentTranslationHideLanguages:O=[]}=M.settings;return En.forEach(C=>{const[X]=C;X===Y||X===I.current||X===Ze||O.includes(X)?x.push(C):A.push(C)}),x.sort(([C,X],[K,V])=>C===Y?-1:K===Y?1:X.localeCompare(V)),A.sort(([C,X],[K,V])=>X.localeCompare(V)),[x,A]},[Y]);return e("div",{id:"compose-container-outer",children:[e("div",{id:"compose-container",class:o?"standalone":"",children:[e("div",{class:"compose-top",children:[(h==null?void 0:h.avatarStatic)&&e(xi,{account:h,accountInstance:p.instanceURL,hideDisplayName:!0,useAvatarStatic:!0}),o?r&&e("button",{type:"button",class:"light pop-button",disabled:d==="loading",onClick:()=>{if(!window.opener){alert("Looks like you closed the parent window.");return}window.opener.__STATES__.showCompose&&!confirm("Looks like you already have a compose field open in the parent window. Popping in this window will discard the changes you made in the parent window. Continue?")||t({fn:()=>{const x={editStatus:a,replyToStatus:n,draftStatus:{uid:m.current,status:U.current.value,spoilerText:H.current.value,visibility:Z,language:Y,sensitive:W,poll:ce,mediaAttachments:N}};window.opener.__COMPOSE__=x,window.opener.__STATES__.showCompose=!0}})},children:e(T,{icon:"popin",alt:"Pop in"})}):e("span",{children:[e("button",{type:"button",class:"light pop-button",disabled:d==="loading",onClick:()=>{Ea({editStatus:a,replyToStatus:n,draftStatus:{uid:m.current,status:U.current.value,spoilerText:H.current.value,visibility:Z,language:Y,sensitive:W,poll:ce,mediaAttachments:N}})&&t()},children:e(T,{icon:"popout",alt:"Pop out"})})," ",e("button",{type:"button",class:"light close-button",disabled:d==="loading",onClick:()=>{B()&&t()},children:e(T,{icon:"x"})})]})]}),!!n&&e("div",{class:"status-preview",children:[e(oa,{status:n,size:"s",previewMode:!0}),e("div",{class:"status-preview-legend reply-to",children:["Replying to @",n.account.acct||n.account.username,"’s post"]})]}),!!a&&e("div",{class:"status-preview",children:[e(oa,{status:a,size:"s",previewMode:!0}),e("div",{class:"status-preview-legend",children:"Editing source post"})]}),e("form",{ref:ze,class:`form-visibility-${Z}`,style:{pointerEvents:d==="loading"?"none":"auto",opacity:d==="loading"?.5:1},onKeyDown:x=>{x.key==="Enter"&&(x.ctrlKey||x.metaKey)&&ze.current.dispatchEvent(new Event("submit",{cancelable:!0}))},onSubmit:x=>{x.preventDefault();const A=new FormData(x.target),O=Object.fromEntries(A.entries());let{status:C,visibility:X,sensitive:K,spoilerText:V}=O;if(K=K==="on",ce){if(ce.options.length<2){alert("Poll must have at least 2 options");return}if(ce.options.some(J=>J==="")){alert("Some poll choices are empty");return}}N.length>0&&N.some(ie=>{var we,De;return!((De=(we=ie.description)==null?void 0:we.trim)!=null&&De.call(we))})&&!confirm("Some media have no descriptions. Continue?")||(V=K&&V||void 0,C=C===""?void 0:C,g("loading"),(async()=>{try{if(N.length>0){const we=N.map(Pe=>{const{file:Ve,description:et,id:Et}=Pe;if(Et)return Pe;{const xt=la({file:Ve,description:et});return c.v2.media.create(xt).then(Ne=>(Ne.id&&(Pe.id=Ne.id),Ne))}}),De=await Promise.allSettled(we);if(De.some(Pe=>{var Ve;return Pe.status==="rejected"||!((Ve=Pe.value)!=null&&Ve.id)})){g("error"),De.forEach(Pe=>{Pe.status==="rejected"&&alert(Pe.reason||`Attachment #${i} failed`)});return}}let J={status:C,spoiler_text:V,language:Y,sensitive:K,poll:ce,media_ids:N.map(we=>we.id)};a&&$a("@mastodon/edit-media-attributes")?J.media_attributes=N.map(we=>({id:we.id,description:we.description})):a||(J.visibility=X,J.in_reply_to_id=(n==null?void 0:n.id)||void 0),J=la(J);let ie;if(a)ie=await c.v1.statuses.$select(a.id).update(J),Ie(ie,u,{skipThreading:!0});else try{ie=await c.v1.statuses.create(J,{idempotencyKey:m.current})}catch{ie=await c.v1.statuses.create(J)}g("default"),t({type:a?"edit":n?"reply":"post",newStatus:ie,instance:u})}catch(J){alert((J==null?void 0:J.reason)||J),g("error")}})())},children:[e("div",{class:"toolbar stretch",children:[e("input",{ref:H,type:"text",name:"spoilerText",placeholder:"Content warning",disabled:d==="loading",class:"spoiler-text-field",lang:Y,spellCheck:"true",dir:"auto",style:{opacity:W?1:0,pointerEvents:W?"auto":"none"},onInput:()=>{ve()}}),e("label",{class:`toolbar-button ${W?"highlight":""}`,title:"Content warning or sensitive media",children:[e("input",{name:"sensitive",type:"checkbox",checked:W,disabled:d==="loading",onChange:x=>{var O,C;const A=x.target.checked;ye(A),A?(O=H.current)==null||O.focus():(C=U.current)==null||C.focus()}}),e(T,{icon:`eye-${W?"close":"open"}`})]})," ",e("label",{class:`toolbar-button ${Z!=="public"&&!W?"show-field":""} ${Z!=="public"?"highlight":""}`,title:`Visibility: ${Z}`,children:[e(T,{icon:at[Z],alt:Z}),e("select",{name:"visibility",value:Z,onChange:x=>{ue(x.target.value)},disabled:d==="loading"||!!a,children:[e("option",{value:"public",children:["Public ",e(T,{icon:"earth"})]}),e("option",{value:"unlisted",children:"Unlisted"}),e("option",{value:"private",children:"Followers only"}),e("option",{value:"direct",children:"Private mention"})]})]})," "]}),e(vr,{ref:U,placeholder:n?"Post your reply":a?"Edit your post":"What are you doing?",required:(N==null?void 0:N.length)===0,disabled:d==="loading",lang:Y,onInput:()=>{ve()},maxCharacters:b,performSearch:x=>{const{type:A,q:O,limit:C}=x;return A==="accounts"?c.v1.accounts.search.list({q:O,limit:C,resolve:!1}):c.v2.search.fetch(x)}}),(N==null?void 0:N.length)>0&&e("div",{class:"media-attachments",children:[N.map((x,A)=>{const{id:O,file:C}=x,X=(C==null?void 0:C.size)+(C==null?void 0:C.type)+(C==null?void 0:C.name);return e(yr,{attachment:x,disabled:d==="loading",lang:Y,onDescriptionChange:K=>{te(V=>{const J=[...V];return J[A].description=K,J})},onRemove:()=>{te(K=>K.filter((V,J)=>J!==A))}},O||X||A)}),e("label",{class:"media-sensitive",children:[e("input",{name:"sensitive",type:"checkbox",checked:W,disabled:d==="loading",onChange:x=>{const A=x.target.checked;ye(A)}})," ",e("span",{children:"Mark media as sensitive"})," ",e(T,{icon:`eye-${W?"close":"open"}`})]})]}),!!ce&&e(_r,{lang:Y,maxOptions:L,maxExpiration:D,minExpiration:j,maxCharactersPerOption:$,poll:ce,disabled:d==="loading",onInput:x=>{if(x){const A={...x};de(A)}else de(null)}}),e("div",{class:"toolbar wrap",style:{justifyContent:"flex-end"},children:[e("span",{children:[e("label",{class:"toolbar-button",children:[e("input",{type:"file",accept:E.join(","),multiple:N.length<v-1,disabled:d==="loading"||N.length>=v||!!ce,onChange:x=>{const A=x.target.files;if(!A)return;const O=Array.from(A).map(C=>({file:C,type:C.type,size:C.size,url:URL.createObjectURL(C),id:null,description:null}));N.length+O.length>v?alert(`You can only attach up to ${v} files.`):te(C=>C.concat(O)),x.target.value=""}}),e(T,{icon:"attachment"})]})," ",e("button",{type:"button",class:"toolbar-button",disabled:d==="loading"||!!ce||!!N.length,onClick:()=>{de({options:["",""],expiresIn:24*60*60,multiple:!1})},children:e(T,{icon:"poll",alt:"Add poll"})})," ",e("button",{type:"button",class:"toolbar-button",disabled:d==="loading",onClick:()=>{_e(!0)},children:e(T,{icon:"emoji2"})})]}),e("div",{class:"spacer"}),d==="loading"?e(Wt,{abrupt:!0}):e(br,{maxCharacters:b,hidden:d==="loading"}),e("label",{class:`toolbar-button ${Y!==I.current?"highlight":""}`,children:[e("span",{class:"icon-text",children:(Gt=or[Y])==null?void 0:Gt.native}),e("select",{name:"language",value:Y,onChange:x=>{const{value:A}=x.target;Te(A||Ze),z.session.set("currentLanguage",A||Ze)},disabled:d==="loading",children:[re.map(([x,A,O])=>e("option",{value:x,children:[A," (",O,")"]},x)),e("hr",{}),Me.map(([x,A,O])=>e("option",{value:x,children:[A," (",O,")"]},x))]})]})," ",e("button",{type:"submit",class:"large",disabled:d==="loading",children:n?"Reply":a?"Update":"Post"})]})]})]}),he&&e(qt,{class:"light",onClick:x=>{x.target===x.currentTarget&&_e(!1)},children:e(wr,{masto:c,instance:u,onClose:()=>{_e(!1)},onSelect:x=>{const A=` ${x} `,O=U.current;if(!O)return;const{selectionStart:C,selectionEnd:X}=O,K=O.value,V=K.slice(0,C)+A+K.slice(X);O.value=V,O.selectionStart=O.selectionEnd=X+A.length,O.focus(),O.dispatchEvent(new Event("input"))}})})]})}function ca(t){if(!t)return;const{value:n,offsetHeight:a,scrollHeight:s,clientHeight:o}=t;if(a<window.innerHeight){const r=a-o,c=n?s+r+"px":null;t.style.height=c}}const vr=pa((t,n)=>{var b;const{masto:a}=Ge(),[s,o]=ee(((b=n.current)==null?void 0:b.value)||""),{maxCharacters:r,performSearch:c=()=>{},...u}=t,d=ne();pe(()=>{(async()=>{try{const v=await a.v1.customEmojis.list();d.current=v}catch{}})()},[]);const g=ne(),m=ne("");pe(()=>{let v,k,E;return g.current&&(v=_=>{const{key:y,provide:S,text:F}=_.detail;if(m.current=F,F===""){S(Promise.resolve({matched:!1}));return}if(y===":"){const L=kr(d.current,F);let $="";L.forEach(D=>{const{shortcode:j,url:U}=D;$+=`
                <li role="option" data-value="${je(j)}">
                <img src="${je(U)}" width="16" height="16" alt="" loading="lazy" /> 
                :${je(j)}:
              </li>`}),qe.innerHTML=$,S(Promise.resolve({matched:L.length>0,fragment:qe}));return}const R={"@":"accounts","#":"hashtags"}[y];S(new Promise(L=>{c({type:R,q:F,limit:5}).then(D=>{if(F!==m.current)return;const j=D[R]||D;let U="";j.forEach(H=>{var te;const{name:Z,avatarStatic:ue,displayName:W,username:ye,acct:Y,emojis:Te,history:I}=H,N=kn(W,Te);if(Y)U+=`
                    <li role="option" data-value="${je(Y)}">
                      <span class="avatar">
                        <img src="${je(ue)}" width="16" height="16" alt="" loading="lazy" />
                      </span>
                      <span>
                        <b>${N||ye}</b>
                        <br>@${je(Y)}
                      </span>
                    </li>
                  `;else{const ce=(te=I==null?void 0:I.reduce)==null?void 0:te.call(I,(de,fe)=>de+ +fe.uses,0);U+=`
                    <li role="option" data-value="${je(Z)}">
                      <span class="grow">#<b>${je(Z)}</b></span>
                      ${ce?`<span class="count">${We(ce)}</span>`:""}
                    </li>
                  `}qe.innerHTML=U}),L({matched:j.length>0,fragment:qe})})}))},g.current.addEventListener("text-expander-change",v),k=_=>{const{key:y,item:S}=_.detail;y===":"?_.detail.value=`:${S.dataset.value}:`:_.detail.value=`${y}${S.dataset.value}`},g.current.addEventListener("text-expander-value",k),E=_=>{const{input:y}=_.detail;if(o(y.value),n.current){const S=new Event("input",{bubbles:!0});n.current.dispatchEvent(S)}},g.current.addEventListener("text-expander-committed",E)),()=>{g.current&&(g.current.removeEventListener("text-expander-change",v),g.current.removeEventListener("text-expander-value",k),g.current.removeEventListener("text-expander-committed",E))}},[]),pe(()=>{const v=n.current;if(!v)return;new ResizeObserver(()=>{if(g.current){const{height:E}=v.getBoundingClientRect();g.current.style.height=E+"px"}}).observe(v)},[]);const p=ne(0),h=ne(),f=fa(v=>{var _;if(!h.current)return;if(p.current>3){h.current.innerHTML="",h.current=null,(_=f==null?void 0:f.cancel)==null||_.call(f);return}let k,E;p.current<=3&&(k=Date.now()),h.current.innerHTML=gr(v,{maxCharacters:r})+`
`,p.current<=3&&(E=Date.now()),k&&E&&E-k>50&&p.current++},500);return e("text-expander",{ref:g,keys:"@ # :",class:"compose-field-container",children:[e("textarea",{class:"compose-field",autoCapitalize:"sentences",autoComplete:"on",autoCorrect:"on",spellCheck:"true",dir:"auto",rows:"6",cols:"50",...u,ref:n,name:"status",value:s,onKeyDown:v=>{const{key:k,target:E}=v;if(k==="Enter")try{const{value:_,selectionStart:y}=E,F=_.slice(0,y).split(`
`).slice(-1)[0];if(F&&/^\s*(-|\d+\.)\s/.test(F)){const[R,L,$,D,j]=F.match(/^(\s*)(-|\d+\.)(\s+)(.+)?/)||[];if(j){v.preventDefault();const[U]=$.match(/\d+/)||[],H=U?`${+U+1}.`:"-",Z=`
${L}${H}${D}`;E.setRangeText(Z,y,y);const ue=y+Z.length;E.setSelectionRange(ue,ue)}else{const U=y-F.length;E.setRangeText("",U,y)}ca(E),E.dispatchEvent(new Event("input"))}}catch{}h.current&&(h.current.scrollTop=E.scrollTop)},onInput:v=>{var _;const{target:k}=v,E=k.value;o(E),ca(k),(_=t.onInput)==null||_.call(t,v),f(E)},style:{width:"100%",height:"4em"},onScroll:v=>{if(h.current){const{scrollTop:k}=v.target;h.current.scrollTop=k}}}),e("div",{ref:h,class:"compose-highlight","aria-hidden":"true"})]})});function br({maxCharacters:t=500,hidden:n}){const s=wt(M).composerCharacterCount,o=t-s;return n?e("meter",{class:"donut",hidden:!0}):e("meter",{class:`donut ${o<=-10?"explode":o<=0?"danger":o<=20?"warning":""}`,value:s,max:t,"data-left":o,title:`${o}/${t}`,style:{"--percentage":s/t*100}})}function yr({attachment:t,disabled:n,lang:a,onDescriptionChange:s=()=>{},onRemove:o=()=>{}}){const[r,c]=ee("default"),u=$a("@mastodon/edit-media-attributes"),{type:d,id:g,file:m}=t,p=Fe(()=>m?URL.createObjectURL(m):t.url,[m,t.url]),[h,f]=ee(t.description),[b,v]=d.split("/"),k=Mo(s,250),[E,_]=ee(!1),y=ne(null);pe(()=>{let R;return E&&y.current&&(R=setTimeout(()=>{y.current.focus()},100)),()=>{clearTimeout(R)}},[E]);const S=e(G,{children:g&&!u?e("div",{class:"media-desc",children:[e("span",{class:"tag",children:"Uploaded"}),e("p",{title:h,children:t.description||e("i",{children:"No description"})})]}):e("textarea",{ref:y,value:h||"",lang:a,placeholder:{image:"Image description",video:"Video description",audio:"Audio description"}[b],autoCapitalize:"sentences",autoComplete:"on",autoCorrect:"on",spellCheck:"true",dir:"auto",disabled:n||r==="loading",class:r==="loading"?"loading":"",maxlength:"1500",onInput:R=>{const{value:L}=R.target;f(L),k(L)}})}),F=ne(null);return pe(()=>()=>{var R,L;(L=(R=F.current)==null?void 0:R.hideToast)==null||L.call(R)},[]),e(G,{children:[e("div",{class:"media-attachment",children:[e("div",{class:"media-preview",tabIndex:"0",onClick:()=>{_(!0)},children:b==="image"?e("img",{src:p,alt:""}):b==="video"||b==="gifv"?e("video",{src:p,playsinline:!0,muted:!0}):b==="audio"?e("audio",{src:p,controls:!0}):null}),S,e("div",{class:"media-aside",children:e("button",{type:"button",class:"plain close-button",disabled:n,onClick:o,children:e(T,{icon:"x"})})})]}),E&&e(qt,{class:"light",onClick:R=>{R.target===R.currentTarget&&_(!1)},children:e("div",{id:"media-sheet",class:"sheet sheet-max",children:[e("button",{type:"button",class:"sheet-close",onClick:()=>{_(!1)},children:e(T,{icon:"x"})}),e("header",{children:e("h2",{children:{image:"Edit image description",video:"Edit video description",audio:"Edit audio description"}[b]})}),e("main",{tabIndex:"-1",children:[e("div",{class:"media-preview",children:b==="image"?e("img",{src:p,alt:""}):b==="video"||b==="gifv"?e("video",{src:p,playsinline:!0,controls:!0}):b==="audio"?e("audio",{src:p,controls:!0}):null}),e("div",{class:"media-form",children:[S,e("footer",{children:[b==="image"&&/^(png|jpe?g|gif|webp)$/i.test(v)&&!!M.settings.mediaAltGenerator&&!!ia&&e(_n,{portal:{target:document.body},containerProps:{style:{zIndex:1001}},align:"center",position:"anchor",overflow:"auto",menuButton:e("button",{type:"button",title:"More",class:"plain",children:e(T,{icon:"more",size:"l",alt:"More"})}),children:e(xe,{disabled:r==="loading",onClick:()=>{c("loading"),F.current=Ee({text:"Generating description. Please wait...",duration:-1}),async function(){var R,L;try{const $=new FormData;$.append("image",m);const D=await fetch(ia,{method:"POST",body:$}).then(j=>j.json());if(D.error)throw new Error(D.error);f(D.description)}catch($){Ee(`Failed to generate description${$!=null&&$.message?`: ${$.message}`:""}`)}finally{c("default"),(L=(R=F.current)==null?void 0:R.hideToast)==null||L.call(R)}}()},children:[e(T,{icon:"sparkles2"}),e("span",{children:"Generate description…"})]})}),e("button",{type:"button",class:"light block",onClick:()=>{_(!1)},disabled:r==="loading",children:"Done"})]})]})]})]})})]})}function _r({lang:t,poll:n,disabled:a,onInput:s=()=>{},maxOptions:o,maxExpiration:r,minExpiration:c,maxCharactersPerOption:u}){const{options:d,expiresIn:g,multiple:m}=n;return e("div",{class:`poll ${m?"multiple":""}`,children:[e("div",{class:"poll-choices",children:d.map((p,h)=>e("div",{class:"poll-choice",children:[e("input",{required:!0,type:"text",value:p,disabled:a,maxlength:u,placeholder:`Choice ${h+1}`,lang:t,spellCheck:"true",dir:"auto",onInput:f=>{const{value:b}=f.target;d[h]=b,s(n)}}),e("button",{type:"button",class:"plain2 poll-button",disabled:a||d.length<=1,onClick:()=>{d.splice(h,1),s(n)},children:e(T,{icon:"x",size:"s"})})]},h))}),e("div",{class:"poll-toolbar",children:[e("button",{type:"button",class:"plain2 poll-button",disabled:a||d.length>=o,onClick:()=>{d.push(""),s(n)},children:"+"})," ",e("label",{class:"multiple-choices",children:[e("input",{type:"checkbox",checked:m,disabled:a,onChange:p=>{const{checked:h}=p.target;n.multiple=h,s(n)}})," ","Multiple choices"]}),e("label",{class:"expires-in",children:["Duration"," ",e("select",{value:g,disabled:a,onChange:p=>{const{value:h}=p.target;n.expiresIn=h,s(n)},children:Object.entries(Ma).filter(([p,h])=>h>=c&&h<=r).map(([p,h])=>e("option",{value:h,children:p},h))})]})]}),e("div",{class:"poll-toolbar",children:e("button",{type:"button",class:"plain remove-poll-button",disabled:a,onClick:()=>{s(null)},children:"Remove poll"})})]})}function kr(t,n){return n=n.toLowerCase(),t.sort((a,s)=>{let o=a.shortcode.toLowerCase(),r=s.shortcode.toLowerCase(),c=o.startsWith(n),u=r.startsWith(n),d=o.includes(n),g=r.includes(n);return c&&u?a.length-s.length:c?-1:u?1:d&&g?a.length-s.length:d?-1:g?1:0}).slice(0,5)}function je(t){return t.replace(/[&<>"']/g,function(n){return"&#"+n.charCodeAt(0)+";"})}function la(t){for(let n in t)(t[n]===null||t[n]===void 0)&&delete t[n];return t}function wr({masto:t,instance:n,onClose:a=()=>{},onSelect:s=()=>{}}){const[o,r]=ee("default"),c=ne([]),[u,d]=ee({}),g=Fe(()=>z.account.get("recentlyUsedCustomEmojis")||[]);return pe(()=>{r("loading"),(async()=>{try{const m=await t.v1.customEmojis.list(),p={"--recent--":g.filter(f=>m.find(b=>b.shortcode===f.shortcode))},h=[];m.forEach(f=>{var b,v;if(f.visibleInPicker){if((v=(b=c.current)==null?void 0:b.push)==null||v.call(b,f),!f.category){h.push(f);return}p[f.category]||(p[f.category]=[]),p[f.category].push(f)}}),h.length&&(p["--others--"]=h),d(p),r("default")}catch{r("error")}})()},[]),e("div",{id:"custom-emojis-sheet",class:"sheet",children:[!!a&&e("button",{type:"button",class:"sheet-close",onClick:a,children:e(T,{icon:"x"})}),e("header",{children:[e("b",{children:"Custom emojis"})," ",o==="loading"?e(Wt,{}):e("small",{class:"insignificant",children:[" • ",n]})]}),e("main",{children:e("div",{class:"custom-emojis-list",children:[o==="error"&&e("div",{class:"ui-state",children:e("p",{children:"Error loading custom emojis"})}),o==="default"&&Object.entries(u).map(([m,p])=>!!(p!=null&&p.length)&&e(G,{children:[e("div",{class:"section-header",children:{"--recent--":"Recently used","--others--":"Others"}[m]||m}),e("section",{children:p.map(h=>e("button",{type:"button",class:"plain4",onClick:()=>{a(),requestAnimationFrame(()=>{s(`:${h.shortcode}:`)});let f=z.account.get("recentlyUsedCustomEmojis")||[];const b=f.findIndex(v=>v.shortcode===h.shortcode);b!==-1?(f.splice(b,1),f.unshift(h)):(f.unshift(h),f=f.filter(v=>{var k,E;return(E=(k=c.current)==null?void 0:k.find)==null?void 0:E.call(k,_=>_.shortcode===v.shortcode)}),f=f.slice(0,10)),z.account.set("recentlyUsedCustomEmojis",f)},title:`:${h.shortcode}:`,children:e("picture",{children:[!!h.staticUrl&&e("source",{srcset:h.staticUrl,media:"(prefers-reduced-motion: reduce)"}),e("img",{class:"shortcode-emoji",src:h.url||h.staticUrl,alt:h.shortcode,width:"16",height:"16",loading:"lazy",decoding:"async"})]})},h))})]}))]})})]})}var Er={PHANPY_CLIENT_NAME:"IMSB",PHANPY_WEBSITE:"https://app.imsb.app",PHANPY_LINGVA_INSTANCES:"lingva.phanpy.social lingva.lunar.icu lingva.garudalinux.org translate.plausibility.cloud",PHANPY_PRIVACY_POLICY_URL:"https://github.com/cheeaun/phanpy/blob/main/PRIVACY.MD",VITE_APP_ENV:"production",BASE_URL:"./",MODE:"production",DEV:!1,PROD:!0,SSR:!1};const{PHANPY_CLIENT_NAME:ua}=Er;function Ir(t,n){function a(){const{currentLocation:s}=M,o=Array.isArray(n);let r=o?n:[];!o&&/:?\w+\?/.test(n)&&(r.push(n.replace(/(:\w+)\?/g,"$1")),r.push(n.replace(/\/?:\w+\?/g,"")));let c=!1;r.length?c=r.some(u=>Kn(u,s)):n&&(c=Kn(n,s)),c&&(document.title=t?`${t} / ${ua}`:ua)}fn(()=>{const s=ma(M,"currentLocation",a);return a(),s},[t,n])}export{xa as $,Qe as A,gt as B,ea as C,Hi as D,_t as E,ta as F,Pr as G,Bt as H,T as I,Oo as J,Re as K,ot as L,qt as M,ft as N,Oi as O,Ra as P,Ca as Q,kt as R,oa as S,Pi as T,$r as U,Bi as V,Ir as W,wa as X,ya as Y,Go as Z,mn as _,Ge as a,Ue as a0,Ar as a1,Cr as a2,Fr as a3,Sr as a4,Ie as b,Ee as c,z as d,_n as e,rn as f,Ht as g,Sa as h,$a as i,xi as j,yi as k,sn as l,Fa as m,We as n,Ea as o,Kt as p,jt as q,Lr as r,M as s,ui as t,Zo as u,Wt as v,wn as w,Qn as x,zt as y,Ut as z};
function __vite__mapDeps(indexes) {
  if (!__vite__mapDeps.viteFileDeps) {
    __vite__mapDeps.viteFileDeps = []
  }
  return indexes.map((i) => __vite__mapDeps.viteFileDeps[i])
}
//# sourceMappingURL=useTitle-g9A4b_Rx.js.map
