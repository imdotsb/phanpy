import{K as Fa,L as $a,D as Sa,O as Hn,P as Ia,v as Kn,i as Ra,_ as X,p as ue,h as W,a as e,w as St,u as Ge,Q as Da,e as Pa,N as qn,U as Ma,V as Oa,M as Fe,W as za,S as Na,g as H,X as Ba,Y as lt,Z as ja,$ as Va,a0 as Ua,a1 as Ha,a2 as Wn,B as Ka,a3 as qa,a4 as Wa,a5 as Ga,a6 as Ja,a7 as Za,a8 as Ya,a9 as Xa,aa as Qa,ab as eo,ac as Gn,ad as to,f as no,ae as ao,T as Jn,F as Ie,y as tn,af as wn,r as oo,b as ht,q as io,o as ro,d as Kt,J as Zn,C as so,ag as co,I as lo,ah as uo,ai as xn,aj as mo,ak as En,al as ho,m as po,x as Tn}from"./vendor-5BmDqJRl.js";(function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))s(o);new MutationObserver(o=>{for(const r of o)if(r.type==="childList")for(const c of r.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&s(c)}).observe(document,{childList:!0,subtree:!0});function a(o){const r={};return o.integrity&&(r.integrity=o.integrity),o.referrerPolicy&&(r.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?r.credentials="include":o.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function s(o){if(o.ep)return;o.ep=!0;const r=a(o);fetch(o.href,r)}})();function Yn(t){const n=z.local.getJSON("accounts")||[];return n.find(a=>a.info.id===t)||n[0]}function fo(t){return(z.local.getJSON("accounts")||[]).find(a=>a.accessToken===t)}function It(){window.__IGNORE_GET_ACCOUNT_ERROR__;const t=z.session.get("currentAccount");return Yn(t)}function Tt(){const t=It(),{instanceURL:n,info:{id:a}}=t;return`${a}@${n}`}function go(t){const n=z.local.getJSON("accounts")||[],a=n.find(s=>s.info.id===t.info.id);a?(a.info=t.info,a.instanceURL=t.instanceURL,a.accessToken=t.accessToken,a.vapidKey=t.vapidKey):n.push(t),z.local.setJSON("accounts",n),z.session.set("currentAccount",t.info.id)}function Ki(t){const n=z.local.getJSON("accounts")||[],a=n.find(s=>s.info.id===t.id);a&&(a.info.displayName!==t.displayName||a.info.avatar!==t.avatar||a.info.avatar_static!==t.avatar_static)&&(a.info={...a.info,...t},z.local.setJSON("accounts",n))}let qt=null;function Xn(){if(qt)return qt;try{const t=It(),n=z.local.getJSON("instances"),a=t.instanceURL.toLowerCase();return qt=n[a]}catch(t){return alert(`Failed to load instance configuration. Please try again.

${t}`),z.local.del("instances"),location.reload(),{}}}function vo(t){const{configuration:n,maxMediaAttachments:a,maxTootChars:s,pleroma:o,pollLimits:r}=t,c=(n==null?void 0:n.statuses)||{};a&&(c.maxMediaAttachments??(c.maxMediaAttachments=a)),s&&(c.maxCharacters??(c.maxCharacters=s));const l=(n==null?void 0:n.polls)||{};return r&&(l.maxCharactersPerOption??(l.maxCharactersPerOption=r.maxOptionChars),l.maxExpiration??(l.maxExpiration=r.maxExpiration),l.maxOptions??(l.maxOptions=r.maxOptions),l.minExpiration??(l.minExpiration=r.minExpiration)),{...n,statuses:c,polls:l}}function bo(){const t=Xn();return vo(t)}const Be={get:t=>{try{return localStorage.getItem(t)}catch{return null}},getJSON:t=>{try{return JSON.parse(Be.get(t))}catch{return null}},set:(t,n)=>{try{return localStorage.setItem(t,n)}catch{return null}},setJSON:(t,n)=>{try{return Be.set(t,JSON.stringify(n))}catch{return null}},del:t=>{try{return localStorage.removeItem(t)}catch{return null}}},nn={get:t=>{try{return sessionStorage.getItem(t)}catch{return null}},getJSON:t=>{try{return JSON.parse(nn.get(t))}catch{return null}},set:(t,n)=>{try{return sessionStorage.setItem(t,n)}catch{return null}},setJSON:(t,n)=>{try{return nn.set(t,JSON.stringify(n))}catch{return null}},del:t=>{try{return sessionStorage.removeItem(t)}catch{return null}}},yo={get:t=>{try{return Be.getJSON(t)[Tt()]}catch{return null}},set:(t,n)=>{try{const a=Be.getJSON(t)||{};return a[Tt()]=n,Be.setJSON(t,a)}catch{return null}},del:t=>{try{const n=Be.getJSON(t)||{};return delete n[Tt()],Be.setJSON(t,n)}catch{return null}}},z={local:Be,session:nn,account:yo},Lt="mastodon.social",Ct={},Re={};window.__ACCOUNT_APIS__=Re;let fe;function Ke({instance:t,accessToken:n}){/^https?:\/\//.test(t)&&(t=t.replace(/^https?:\/\//,"").replace(/\/+$/,"").toLowerCase());const a=t?`https://${t}`:`https://${Lt}`,o={masto:Fa({url:a,accessToken:n,timeout:3e4}),instance:t,accessToken:n};return Ct[t]=o,Re[t]||(Re[t]={}),n&&(Re[t][n]=o),o}async function qi(t,n){const{masto:a,accessToken:s}=t;let o;try{o=await a.v2.instance.fetch()}catch{}if(!o)try{o=await a.v1.instance.fetch()}catch{}if(!o)return;const{uri:r,urls:{streamingApi:c}={},domain:l,configuration:{urls:{streaming:p}={}}={}}=o,g=z.local.getJSON("instances")||{};if((r||l)&&(g[(l||r).replace(/^https?:\/\//,"").replace(/\/+$/,"").toLowerCase()]=o),n&&(g[n.toLowerCase()]=o),z.local.setJSON("instances",g),"WebSocket"in window&&(c||p)){const f=$a({streamingApiUrl:p||c,accessToken:s,implementation:WebSocket});t.streaming=f}}async function Wi(t,n,a,s){const{masto:o}=t,r=await o.v1.accounts.verifyCredentials();z.session.set("currentAccount",r.id),go({info:r,instanceURL:n.toLowerCase(),accessToken:a,vapidKey:s})}async function Gi(t){try{const{masto:n}=t,a=await n.v1.preferences.fetch();z.account.set("preferences",a)}catch{}}function Ve({instance:t,accessToken:n,accountID:a,account:s}={}){var p,g,d,f;if(t&&(t=t.toLowerCase().trim()),t&&n){const m=((p=Re[t])==null?void 0:p[n])||Ke({instance:t,accessToken:n}),{masto:v,streaming:w}=m;return{masto:v,streaming:w,client:m,authenticated:!0,instance:t}}if(n)for(const m in Re)if(Re[m][n]){const v=Re[m][n],{masto:w,streaming:h}=v;return{masto:w,streaming:h,client:v,authenticated:!0,instance:m}}else{const v=fo(n);if(v){const w=v.accessToken,h=v.instanceURL.toLowerCase().trim(),b=Ke({instance:h,accessToken:w}),{masto:y,streaming:E}=b;return{masto:y,streaming:E,client:b,authenticated:!0,instance:h}}else throw new Error("Access token not found")}if(s||a)if(s=s||Yn(a),s){const m=s.accessToken,v=s.instanceURL.toLowerCase().trim(),w=((g=Re[v])==null?void 0:g[m])||Ke({instance:v,accessToken:m}),{masto:h,streaming:b}=w;return{masto:h,streaming:b,client:w,authenticated:!0,instance:v}}else throw new Error(`Account ${a} not found`);const o=It();if(t){if((fe==null?void 0:fe.instance)===t)return{masto:fe.masto,streaming:fe.streaming,client:fe,authenticated:!0,instance:t};if((o==null?void 0:o.instanceURL)===t){const{accessToken:b}=o;return fe=((d=Re[t])==null?void 0:d[b])||Ke({instance:t,accessToken:b}),{masto:fe.masto,streaming:fe.streaming,client:fe,authenticated:!0,instance:t}}const m=Ct[t]||Ke({instance:t}),{masto:v,streaming:w,accessToken:h}=m;return{masto:v,streaming:w,client:m,authenticated:!!h,instance:t}}if(fe)return{masto:fe.masto,streaming:fe.streaming,client:fe,authenticated:!0,instance:fe.instance};if(o){const{accessToken:m,instanceURL:v}=o;return fe=((f=Re[v])==null?void 0:f[m])||Ke({instance:v,accessToken:m}),{masto:fe.masto,streaming:fe.streaming,client:fe,authenticated:!0,instance:v}}const r=Ct[Lt]||Ke({instance:Lt}),{masto:c,streaming:l}=r;return{masto:c,streaming:l,client:r,authenticated:!1,instance:Lt}}window.__API__={currentAccountApi:fe,apis:Ct,accountApis:Re};window._showToast=Ce;function Ce(t){typeof t=="string"&&(t={text:t});const{onClick:n,delay:a,...s}=t,o=Sa({className:`${n||t.destination?"shiny-pill":""}`,gravity:"bottom",position:"center",...s,onClick:()=>{n==null||n(o)}});a?setTimeout(()=>{o.showToast()},a):o.showToast()}window._moize=Hn;function Ye(t,n={}){return Hn(t,{...n,maxSize:50,isDeepEqual:!0})}function Rt(t,n={}){return Ye(t,{isPromise:!0,...n})}const A=Ia({appVersion:{},prevLocation:null,currentLocation:null,statuses:{},statusThreadNumber:{},home:[],homeNew:[],homeLast:null,homeLastFetchTime:null,notifications:[],notificationsLast:null,notificationsNew:[],notificationsShowNew:!1,notificationsLastFetchTime:null,reloadStatusPage:0,reloadGenericAccounts:{id:null,counter:0},spoilers:{},scrollPositions:{},unfurledLinks:{},statusQuotes:{},accounts:{},routeNotification:null,showCompose:!1,showSettings:!1,showAccount:!1,showAccounts:!1,showDrafts:!1,showMediaModal:!1,showShortcutsSettings:!1,showKeyboardShortcutsHelp:!1,showGenericAccounts:!1,showMediaAlt:!1,shortcuts:[],settings:{autoRefresh:!1,shortcutsViewMode:null,shortcutsColumnsMode:!1,boostsCarousel:!0,contentTranslation:!0,contentTranslationTargetLanguage:null,contentTranslationHideLanguages:[],contentTranslationAutoInline:!1,cloakMode:!1}});function Ji(){A.notificationsLast=z.account.get("notificationsLast")||null,A.shortcuts=z.account.get("shortcuts")??[],A.settings.autoRefresh=z.account.get("settings-autoRefresh")??!1,A.settings.shortcutsViewMode=z.account.get("settings-shortcutsViewMode")??null,z.account.get("settings-shortcutsColumnsMode")&&(A.settings.shortcutsColumnsMode=!0),A.settings.boostsCarousel=z.account.get("settings-boostsCarousel")??!0,A.settings.contentTranslation=z.account.get("settings-contentTranslation")??!0,A.settings.contentTranslationTargetLanguage=z.account.get("settings-contentTranslationTargetLanguage")||null,A.settings.contentTranslationHideLanguages=z.account.get("settings-contentTranslationHideLanguages")||[],A.settings.contentTranslationAutoInline=z.account.get("settings-contentTranslationAutoInline")??!1,A.settings.cloakMode=z.account.get("settings-cloakMode")??!1}Kn(A,"notificationsLast",t=>{z.account.set("notificationsLast",A.notificationsLast)});Ra(A,t=>{for(const[n,a,s,o]of t)a.join(".")==="settings.autoRefresh"&&z.account.set("settings-autoRefresh",!!s),a.join(".")==="settings.boostsCarousel"&&z.account.set("settings-boostsCarousel",!!s),a.join(".")==="settings.shortcutsViewMode"&&z.account.set("settings-shortcutsViewMode",s),a.join(".")==="settings.contentTranslation"&&z.account.set("settings-contentTranslation",!!s),a.join(".")==="settings.contentTranslationAutoInline"&&z.account.set("settings-contentTranslationAutoInline",!!s),a.join(".")==="settings.contentTranslationTargetLanguage"&&z.account.set("settings-contentTranslationTargetLanguage",s),/^settings\.contentTranslationHideLanguages/i.test(a.join("."))&&z.account.set("settings-contentTranslationHideLanguages",A.settings.contentTranslationHideLanguages),(a==null?void 0:a[0])==="shortcuts"&&z.account.set("shortcuts",A.shortcuts),a.join(".")==="settings.cloakMode"&&z.account.set("settings-cloakMode",!!s)});function Me(t,n){if(t)return n?`${n}/${t}`:t}function Qn(t,n){if(n){const a=Me(t,n);return A.statuses[a]}return A.statuses[t]}function Se(t,n,a){typeof n=="object"&&(a=n,n=null);const{override:s,skipThreading:o}=Object.assign({override:!0,skipThreading:!1},a);if(!t)return;const r=Qn(t.id,n);if(!s&&r)return;const c=Me(t.id,n);if(r!=null&&r._pinned&&(t._pinned=r._pinned),A.statuses[c]=t,t.reblog){const l=Me(t.reblog.id,n);A.statuses[l]=t.reblog}o||requestAnimationFrame(()=>{Ln(t,n),t.reblog&&Ln(t.reblog,n)})}function Ln(t,n){const{masto:a,instance:s}=Ve({instance:n});let o=0;async function r(c,l=0){const{inReplyToId:p,inReplyToAccountId:g}=c;if(!p||g!==c.account.id)return[c];if(p&&g!==c.account.id)throw"Not a thread";const d=Me(p,s);let f=A.statuses[d];if(!f){if(o++>3)throw"Too many fetches for thread";await new Promise(m=>setTimeout(m,500*o)),f=await _o(p,a),Se(f,s,{skipThreading:!0})}return[...await r(f,++l),c]}return r(t).then(c=>{c.length>1&&c.forEach((l,p)=>{const g=Me(l.id,s);A.statusThreadNumber[g]=p+1})}).catch(c=>{})}const _o=Rt((t,n)=>n.v1.statuses.$select(t).fetch());function ko(t,n,a,s){const o=X(t);ue(()=>{o.current=t},[t,a]),ue(()=>{!s||n===null||n===!1||o.current()},[s]),ue(()=>{if(n===null||n===!1)return;const c=setInterval(()=>o.current(),n);return()=>clearInterval(c)},[n])}function ea(t){const n=new URL("/compose/",window.location),{width:a,height:s}=window.screen,o=Math.max(0,(a-600)/2),r=Math.max(0,(s-450)/2),c=Math.min(a,600),l=Math.min(s,450),p=(t==null?void 0:t.uid)||Math.random(),g=window.open(n,"compose"+p,`width=${c},height=${l},left=${o},top=${r}`);return g?g.__COMPOSE__=t:alert("Looks like your browser is blocking popups."),g}const wo="modulepreload",xo=function(t,n){return new URL(t,n).href},An={},_=function(n,a,s){if(!a||a.length===0)return n();const o=document.getElementsByTagName("link");return Promise.all(a.map(r=>{if(r=xo(r,s),r in An)return;An[r]=!0;const c=r.endsWith(".css"),l=c?'[rel="stylesheet"]':"";if(!!s)for(let d=o.length-1;d>=0;d--){const f=o[d];if(f.href===r&&(!c||f.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${r}"]${l}`))return;const g=document.createElement("link");if(g.rel=c?"stylesheet":wo,c||(g.as="script",g.crossOrigin=""),g.href=r,document.head.appendChild(g),c)return new Promise((d,f)=>{g.addEventListener("load",d),g.addEventListener("error",()=>f(new Error(`Unable to preload CSS for ${r}`)))})})).then(()=>n()).catch(r=>{const c=new Event("vite:preloadError",{cancelable:!0});if(c.payload=r,window.dispatchEvent(c),!c.defaultPrevented)throw r})},Eo={s:12,m:16,l:20,xl:24,xxl:32},To={x:()=>_(()=>import("./icons/close-line-YTE7hIJE.js"),__vite__mapDeps([]),import.meta.url),heart:()=>_(()=>import("./icons/heart-line-VwvWYh8h.js"),__vite__mapDeps([]),import.meta.url),bookmark:()=>_(()=>import("./icons/bookmark-line-D6jQ7QFs.js"),__vite__mapDeps([]),import.meta.url),"check-circle":()=>_(()=>import("./icons/check-circle-line-sE41WGxF.js"),__vite__mapDeps([]),import.meta.url),"x-circle":()=>_(()=>import("./icons/close-circle-line-qd3g541O.js"),__vite__mapDeps([]),import.meta.url),transfer:()=>_(()=>import("./icons/transfer-4-line-Q9QJoxz3.js"),__vite__mapDeps([]),import.meta.url),rocket:()=>_(()=>import("./icons/rocket-line-rZbVYYCZ.js"),__vite__mapDeps([]),import.meta.url),"arrow-left":()=>_(()=>import("./icons/arrow-left-line-_YC6-XGG.js"),__vite__mapDeps([]),import.meta.url),"arrow-right":()=>_(()=>import("./icons/arrow-right-line-PypiEqpu.js"),__vite__mapDeps([]),import.meta.url),"arrow-up":()=>_(()=>import("./icons/arrow-up-line-fcuKqhVE.js"),__vite__mapDeps([]),import.meta.url),"arrow-down":()=>_(()=>import("./icons/arrow-down-line-0TRJUP_K.js"),__vite__mapDeps([]),import.meta.url),earth:()=>_(()=>import("./icons/earth-line-t1Um8wpQ.js"),__vite__mapDeps([]),import.meta.url),lock:()=>_(()=>import("./icons/lock-line-0jNHqZpm.js"),__vite__mapDeps([]),import.meta.url),unlock:()=>_(()=>import("./icons/unlock-line-w3piJMVb.js"),__vite__mapDeps([]),import.meta.url),"eye-close":()=>_(()=>import("./icons/eye-close-line-lBiePPv9.js"),__vite__mapDeps([]),import.meta.url),"eye-open":()=>_(()=>import("./icons/eye-2-line-vz_Kw-rK.js"),__vite__mapDeps([]),import.meta.url),message:()=>_(()=>import("./icons/mail-line-5XLS6FEo.js"),__vite__mapDeps([]),import.meta.url),comment:()=>_(()=>import("./icons/chat-3-line-F0xcdpXY.js"),__vite__mapDeps([]),import.meta.url),comment2:()=>_(()=>import("./icons/comment-2-line-xEXuT-Ip.js"),__vite__mapDeps([]),import.meta.url),home:()=>_(()=>import("./icons/home-3-line-qJiZhXUH.js"),__vite__mapDeps([]),import.meta.url),notification:()=>_(()=>import("./icons/notification-line-olNPLtgS.js"),__vite__mapDeps([]),import.meta.url),follow:()=>_(()=>import("./icons/user-follow-line-k_GCWTtp.js"),__vite__mapDeps([]),import.meta.url),"follow-add":()=>_(()=>import("./icons/user-add-line-zzW9OULB.js"),__vite__mapDeps([]),import.meta.url),poll:[()=>_(()=>import("./icons/chart-bar-line-5r_DfN2w.js"),__vite__mapDeps([]),import.meta.url),"90deg"],pencil:()=>_(()=>import("./icons/pencil-line-bKXqElLR.js"),__vite__mapDeps([]),import.meta.url),quill:()=>_(()=>import("./icons/quill-pen-line-h_5-FsGz.js"),__vite__mapDeps([]),import.meta.url),at:()=>_(()=>import("./icons/at-line-9vJS_Hnl.js"),__vite__mapDeps([]),import.meta.url),attachment:()=>_(()=>import("./icons/attachment-line-C2PUa1Ke.js"),__vite__mapDeps([]),import.meta.url),upload:()=>_(()=>import("./icons/upload-3-line-Qsjvubiw.js"),__vite__mapDeps([]),import.meta.url),gear:()=>_(()=>import("./icons/settings-3-line-kt4MSpRv.js"),__vite__mapDeps([]),import.meta.url),more:()=>_(()=>import("./icons/more-3-line-wUD-Yhmj.js"),__vite__mapDeps([]),import.meta.url),external:()=>_(()=>import("./icons/external-link-line-8nOOkmFu.js"),__vite__mapDeps([]),import.meta.url),popout:()=>_(()=>import("./icons/external-link-line-8nOOkmFu.js"),__vite__mapDeps([]),import.meta.url),popin:[()=>_(()=>import("./icons/external-link-line-8nOOkmFu.js"),__vite__mapDeps([]),import.meta.url),"180deg"],plus:()=>_(()=>import("./icons/add-circle-line--O-MfyNy.js"),__vite__mapDeps([]),import.meta.url),"chevron-left":()=>_(()=>import("./icons/left-line-Jck0yVmC.js"),__vite__mapDeps([]),import.meta.url),"chevron-right":()=>_(()=>import("./icons/right-line-7VBoqLdz.js"),__vite__mapDeps([]),import.meta.url),"chevron-down":()=>_(()=>import("./icons/down-line-9PeS5YhF.js"),__vite__mapDeps([]),import.meta.url),reply:[()=>_(()=>import("./icons/share-forward-line-4jL-2Q4u.js"),__vite__mapDeps([]),import.meta.url),"180deg","horizontal"],thread:()=>_(()=>import("./icons/route-line-2YYy3958.js"),__vite__mapDeps([]),import.meta.url),group:()=>_(()=>import("./icons/group-line-JvhJklhQ.js"),__vite__mapDeps([]),import.meta.url),bot:()=>_(()=>import("./icons/android-2-line-uPwvVubH.js"),__vite__mapDeps([]),import.meta.url),menu:()=>_(()=>import("./icons/rows-4-line-SxGPYpTa.js"),__vite__mapDeps([]),import.meta.url),list:()=>_(()=>import("./icons/list-check-line-qNqx9Mm4.js"),__vite__mapDeps([]),import.meta.url),search:()=>_(()=>import("./icons/search-2-line-G39AynEw.js"),__vite__mapDeps([]),import.meta.url),hashtag:()=>_(()=>import("./icons/hashtag-line-SS3QMu1R.js"),__vite__mapDeps([]),import.meta.url),info:()=>_(()=>import("./icons/information-line-8SOch6cR.js"),__vite__mapDeps([]),import.meta.url),shortcut:()=>_(()=>import("./icons/lightning-line-JMYUlCZM.js"),__vite__mapDeps([]),import.meta.url),user:()=>_(()=>import("./icons/user-4-line-zT_bpOrS.js"),__vite__mapDeps([]),import.meta.url),following:()=>_(()=>import("./icons/walk-line-CF7a5s4t.js"),__vite__mapDeps([]),import.meta.url),pin:()=>_(()=>import("./icons/pin-line-ULyRQyWZ.js"),__vite__mapDeps([]),import.meta.url),bus:()=>_(()=>import("./icons/bus-2-line-XuQdDZ_w.js"),__vite__mapDeps([]),import.meta.url),link:()=>_(()=>import("./icons/link-2-line-BUqp1EwN.js"),__vite__mapDeps([]),import.meta.url),history:()=>_(()=>import("./icons/history-line-yoG7K8wL.js"),__vite__mapDeps([]),import.meta.url),share:()=>_(()=>import("./icons/share-2-line-PYo-zN94.js"),__vite__mapDeps([]),import.meta.url),sparkles:()=>_(()=>import("./icons/sparkles-line-wjZWGZ1a.js"),__vite__mapDeps([]),import.meta.url),exit:()=>_(()=>import("./icons/exit-line-l-1uUgI7.js"),__vite__mapDeps([]),import.meta.url),translate:()=>_(()=>import("./icons/translate-line-HpDtlqS2.js"),__vite__mapDeps([]),import.meta.url),play:()=>_(()=>import("./icons/play-fill-Ey-zv2eL.js"),__vite__mapDeps([]),import.meta.url),trash:()=>_(()=>import("./icons/delete-2-line-pjUduCFs.js"),__vite__mapDeps([]),import.meta.url),mute:()=>_(()=>import("./icons/volume-mute-line-WthBoXru.js"),__vite__mapDeps([]),import.meta.url),unmute:()=>_(()=>import("./icons/volume-line-PZujbN8h.js"),__vite__mapDeps([]),import.meta.url),block:()=>_(()=>import("./icons/forbid-circle-line-3FxopGoP.js"),__vite__mapDeps([]),import.meta.url),unblock:[()=>_(()=>import("./icons/forbid-circle-line-3FxopGoP.js"),__vite__mapDeps([]),import.meta.url),"180deg"],flag:()=>_(()=>import("./icons/flag-4-line-M3u-PO0J.js"),__vite__mapDeps([]),import.meta.url),time:()=>_(()=>import("./icons/time-line-ThP0kTRr.js"),__vite__mapDeps([]),import.meta.url),refresh:()=>_(()=>import("./icons/refresh-2-line-t42qqclb.js"),__vite__mapDeps([]),import.meta.url),emoji2:()=>_(()=>import("./icons/emoji-2-line--uNVc2IC.js"),__vite__mapDeps([]),import.meta.url),filter:()=>_(()=>import("./icons/filter-2-line-KyjbFYlO.js"),__vite__mapDeps([]),import.meta.url),chart:()=>_(()=>import("./icons/chart-line-line-pHaLt6yC.js"),__vite__mapDeps([]),import.meta.url),react:()=>_(()=>import("./icons/react-line-YfZPqZem.js"),__vite__mapDeps([]),import.meta.url),layout4:()=>_(()=>import("./icons/layout-4-line-FOdnyEcZ.js"),__vite__mapDeps([]),import.meta.url),layout5:()=>_(()=>import("./icons/layout-5-line-9Kks7dle.js"),__vite__mapDeps([]),import.meta.url),announce:()=>_(()=>import("./icons/announcement-line-MSlAmDH1.js"),__vite__mapDeps([]),import.meta.url),alert:()=>_(()=>import("./icons/alert-line-zyc6hy8V.js"),__vite__mapDeps([]),import.meta.url),round:()=>_(()=>import("./icons/round-fill-a0rplSmV.js"),__vite__mapDeps([]),import.meta.url),"arrow-up-circle":()=>_(()=>import("./icons/arrow-up-circle-line-e3kZqEZN.js"),__vite__mapDeps([]),import.meta.url),"arrow-down-circle":()=>_(()=>import("./icons/arrow-down-circle-line-mpqFtRtO.js"),__vite__mapDeps([]),import.meta.url),clipboard:()=>_(()=>import("./icons/clipboard-line-9F_Yeo71.js"),__vite__mapDeps([]),import.meta.url),"account-edit":()=>_(()=>import("./icons/user-edit-line-9VnWCh0X.js"),__vite__mapDeps([]),import.meta.url),"account-warning":()=>_(()=>import("./icons/user-warning-line-gL3RGb1N.js"),__vite__mapDeps([]),import.meta.url),keyboard:()=>_(()=>import("./icons/keyboard-line-10AZQcVH.js"),__vite__mapDeps([]),import.meta.url),cloud:()=>_(()=>import("./icons/cloud-line-abe0HgFS.js"),__vite__mapDeps([]),import.meta.url),month:()=>_(()=>import("./icons/calendar-month-line-VoXZVWAe.js"),__vite__mapDeps([]),import.meta.url),media:()=>_(()=>import("./icons/photo-album-line--GdJqjfq.js"),__vite__mapDeps([]),import.meta.url)};function Lo({icon:t,size:n="m",alt:a,title:s,class:o="",style:r={}}){if(!t)return null;const c=Eo[n];let l=To[t],p,g;Array.isArray(l)&&([l,p,g]=l);const[d,f]=W(null);return ue(async()=>{const m=await l();f(m.default)},[l]),e("span",{class:`icon ${o}`,title:s||a,style:{width:`${c}px`,height:`${c}px`,...r},children:d&&e("svg",{width:c,height:c,viewBox:`0 0 ${d.width} ${d.height}`,dangerouslySetInnerHTML:{__html:d.body},style:{transform:`${p?`rotate(${p})`:""} ${g?"scaleX(-1)":""}`}})})}const L=St(Lo),Ao=document.getElementById("modal-container");function ut({children:t,onClose:n,onClick:a,class:s}){if(!t)return null;const o=X();ue(()=>{let l=setTimeout(()=>{var g;const p=(g=o.current)==null?void 0:g.querySelector('[tabindex="-1"]');p&&p.focus()},100);return()=>clearTimeout(l)},[]);const r=Ge("esc",()=>{setTimeout(()=>{n==null||n()},0)},{enabled:!!n,keydown:!1,keyup:!0},[n]),c=e("div",{ref:l=>{var p;o.current=l,r.current=((p=l==null?void 0:l.querySelector)==null?void 0:p.call(l,'[tabindex="-1"]'))||l},className:s,onClick:l=>{a==null||a(l),l.target===l.currentTarget&&(n==null||n(l))},tabIndex:"-1",onFocus:l=>{var p,g,d,f;l.target===l.currentTarget&&((f=(d=(g=(p=o.current)==null?void 0:p.querySelector)==null?void 0:g.call(p,'[tabindex="-1"]'))==null?void 0:d.focus)==null||f.call(d))},children:t});return Da(c,Ao)}function et({abrupt:t,hidden:n,...a}){return e("span",{...a,class:`loader-container ${t?"abrupt":""} ${n?"hidden":""}`,children:e("span",{class:"loader"})})}const Cn={s:16,m:20,l:24,xl:32,xxl:50,xxxl:64},it={},rt=window.OffscreenCanvas?new OffscreenCanvas(1,1):document.createElement("canvas"),Wt=rt.getContext("2d",{willReadFrequently:!0});function Co({url:t,size:n,alt:a="",squircle:s,...o}){n=Cn[n]||n||Cn.m;const r=X(),c=/missing\.png$/.test(t);return e("span",{ref:r,class:`avatar ${s?"squircle":""} ${it[t]?"has-alpha":""}`,style:{width:n,height:n},title:a,...o,children:!!t&&e("img",{src:t,width:n,height:n,alt:a,loading:"lazy",decoding:"async",crossOrigin:it[t]===void 0&&!c?"anonymous":void 0,onError:l=>{l.target.crossOrigin&&(l.target.crossOrigin=null,l.target.src=t)},onLoad:l=>{if(r.current&&(r.current.dataset.loaded=!0),it[t]===void 0&&!c)try{const{width:p,height:g}=l.target;rt.width!==p&&(rt.width=p),rt.height!==g&&(rt.height=g),Wt.drawImage(l.target,0,0);const d=Wt.getImageData(0,0,p,g),f=d.data.filter((m,v)=>v%4===3&&m<=128).length/(d.data.length/4)>.1;f&&r.current.classList.add("has-alpha"),it[t]=f,Wt.clearRect(0,0,p,g)}catch{it[t]=!1}}})})}const Ze=Ye(Co),pt=qn((t,n)=>{let a;try{a=Pa()}catch{}let s=(location.hash||"").replace(/^#/,"").trim();s===""&&(s="/");const{to:o,...r}=t;if(s&&s!=="/"&&s.includes("?")){const l=new URL(s,location.origin);if(l.searchParams.size){const p=Array.from(l.searchParams.entries()).map(([g,d])=>`${g}=${encodeURIComponent(d)}`).join("&");s=l.pathname+"?"+p}}const c=s===o||decodeURIComponent(s)===o;return e("a",{ref:n,href:`#${o}`,...r,class:`${t.class||""} ${c?"is-active":""}`,onClick:l=>{var p,g,d;(g=(p=l.currentTarget)==null?void 0:p.parentNode)!=null&&g.closest("a")&&l.stopPropagation(),a&&(A.prevLocation=a),(d=t.onClick)==null||d.call(t,l)}})}),Fo=document.documentElement,xt=getComputedStyle(Fo),$o=8;let ta=[0,0,0,0];function na(){const t=xt.getPropertyValue("--sai-top"),n=xt.getPropertyValue("--sai-right"),a=xt.getPropertyValue("--sai-bottom"),s=xt.getPropertyValue("--sai-left");ta=[Math.max(0,parseInt(t,10)),Math.max(0,parseInt(n,10)),Math.max(0,parseInt(a,10)),Math.max(0,parseInt(s,10))]}requestAnimationFrame(na);function aa(t=[]){return ta.map((a,s)=>(a||$o)+(t[s]||0)).join(" ")}CSS.supports("top: env(safe-area-inset-top)")&&window.addEventListener("resize",na,{passive:!0});function oa(t){const{containerProps:n,instanceRef:a}=t,s=Ma(),o=a!=null&&a.current?a:X();return e(Oa,{boundingBoxPadding:aa(),repositionFlag:`${s.width}x${s.height}`,unmountOnClose:!0,...t,instanceRef:o,containerProps:{onClick:r=>{var c,l,p;r.target===r.currentTarget&&((l=(c=o.current)==null?void 0:c.closeMenu)==null||l.call(c)),(p=n==null?void 0:n.onClick)==null||p.call(n,r)},...n}})}function Gt({subMenu:t=!1,confirm:n=!0,confirmLabel:a,menuItemClassName:s,menuFooter:o,...r}){const{children:c,onClick:l,...p}=r;if(!n)return t?e(Fe,{...r}):l?za(c,{onClick:l}):c;const g=t?Na:oa,d=X();return e(g,{instanceRef:d,openTrigger:"clickOnly",direction:"bottom",overflow:"auto",gap:-8,shift:8,menuClassName:"menu-emphasized",...p,menuButton:t?void 0:c,label:t?c:void 0,itemProps:{onPointerMove:f=>{var m,v;f.pointerType==="touch"&&((v=(m=d.current)==null?void 0:m.openMenu)==null||v.call(m))},onPointerLeave:f=>{var m,v;f.pointerType==="touch"&&((v=(m=d.current)==null?void 0:m.openMenu)==null||v.call(m))}},children:[e(Fe,{className:s,onClick:l,children:a}),o]})}function dt({text:t,emojis:n}){if(!t)return"";if(!(n!=null&&n.length)||t.indexOf(":")===-1)return t;const a=new RegExp(`:(${n.map(o=>o.shortcode).join("|")}):`,"g");return t.split(a).map(o=>{const r=n.find(c=>c.shortcode===o);if(r){const{url:c,staticUrl:l}=r;return e("picture",{children:[e("source",{srcset:l,media:"(prefers-reduced-motion: reduce)"}),e("img",{src:c,alt:o,class:"shortcode-emoji emoji",width:"16",height:"16",loading:"lazy",decoding:"async"},o)]})}return o})}function So({account:t,instance:n,showAvatar:a,showAcct:s,short:o,external:r,onClick:c}){var R;const{acct:l,avatar:p,avatarStatic:g,id:d,url:f,displayName:m,emojis:v,bot:w}=t;let{username:h}=t;const[b,y,E]=l.match(/([^@]+)(@.+)/i)||[,l],T=h.toLowerCase().trim(),x=(m||"").toLowerCase().trim(),C=x.replace(/(\:(\w|\+|\-)+\:)(?=|[\!\.\?]|$)/g,"").replace(/\s+/g,""),D=C.replace(/[^a-z0-9]/gi,"");return!o&&(T===x||T===C||T===D||((R=T.localeCompare)==null?void 0:R.call(T,C,"en",{sensitivity:"base"}))===0)&&(h=null),e("a",{class:`name-text ${s?"show-acct":""} ${o?"short":""}`,href:f,target:r?"_blank":null,title:`${m?`${m} `:""}@${l}`,onClick:q=>{if(!r){if(q.preventDefault(),q.stopPropagation(),c)return c(q);A.showAccount={account:t,instance:n}}},children:[a&&e(H,{children:[e(Ze,{url:g||p,squircle:w})," "]}),m&&!o?e(H,{children:[e("b",{children:e(dt,{text:m,emojis:v})}),!s&&h&&e(H,{children:[" ",e("i",{children:["@",h]})]})]}):o?e("i",{children:h}):e("b",{children:h}),s&&e(H,{children:[e("br",{}),e("i",{children:["@",y,e("span",{class:"ib",children:E})]})]})]})}const st=St(So);lt.extend(Ba);lt.extend(ja);lt.extend(Va);const Io=new Intl.DateTimeFormat;function mt({datetime:t,format:n}){if(!t)return null;const a=lt(t),[s,o]=W("");return ue(()=>{let r,c;const l=()=>{c=requestAnimationFrame(()=>{let p;if(n==="micro"){const g=lt();g.diff(a,"day")<=1||g.year()===a.year()?p=a.twitter():p=Io.format(a.toDate())}else p=a.fromNow();o(p),r=setTimeout(l,3e4)})};return c=requestAnimationFrame(l),()=>{clearTimeout(r),cancelAnimationFrame(c)}},[a]),e("time",{datetime:a.toISOString(),title:a.format("LLLL"),children:s})}const Ro=[{code:"af",name:"Afrikaans"},{code:"sq",name:"Albanian"},{code:"am",name:"Amharic"},{code:"ar",name:"Arabic"},{code:"hy",name:"Armenian"},{code:"as",name:"Assamese"},{code:"ay",name:"Aymara"},{code:"az",name:"Azerbaijani"},{code:"bm",name:"Bambara"},{code:"eu",name:"Basque"},{code:"be",name:"Belarusian"},{code:"bn",name:"Bengali"},{code:"bho",name:"Bhojpuri"},{code:"bs",name:"Bosnian"},{code:"bg",name:"Bulgarian"},{code:"ca",name:"Catalan"},{code:"ceb",name:"Cebuano"},{code:"ny",name:"Chichewa"},{code:"zh",name:"Chinese"},{code:"zh_HANT",name:"Chinese (Traditional)"},{code:"co",name:"Corsican"},{code:"hr",name:"Croatian"},{code:"cs",name:"Czech"},{code:"da",name:"Danish"},{code:"dv",name:"Dhivehi"},{code:"doi",name:"Dogri"},{code:"nl",name:"Dutch"},{code:"en",name:"English"},{code:"eo",name:"Esperanto"},{code:"et",name:"Estonian"},{code:"ee",name:"Ewe"},{code:"tl",name:"Filipino"},{code:"fi",name:"Finnish"},{code:"fr",name:"French"},{code:"fy",name:"Frisian"},{code:"gl",name:"Galician"},{code:"ka",name:"Georgian"},{code:"de",name:"German"},{code:"el",name:"Greek"},{code:"gn",name:"Guarani"},{code:"gu",name:"Gujarati"},{code:"ht",name:"Haitian Creole"},{code:"ha",name:"Hausa"},{code:"haw",name:"Hawaiian"},{code:"iw",name:"Hebrew"},{code:"hi",name:"Hindi"},{code:"hmn",name:"Hmong"},{code:"hu",name:"Hungarian"},{code:"is",name:"Icelandic"},{code:"ig",name:"Igbo"},{code:"ilo",name:"Ilocano"},{code:"id",name:"Indonesian"},{code:"ga",name:"Irish"},{code:"it",name:"Italian"},{code:"ja",name:"Japanese"},{code:"jw",name:"Javanese"},{code:"kn",name:"Kannada"},{code:"kk",name:"Kazakh"},{code:"km",name:"Khmer"},{code:"rw",name:"Kinyarwanda"},{code:"gom",name:"Konkani"},{code:"ko",name:"Korean"},{code:"kri",name:"Krio"},{code:"ku",name:"Kurdish (Kurmanji)"},{code:"ckb",name:"Kurdish (Sorani)"},{code:"ky",name:"Kyrgyz"},{code:"lo",name:"Lao"},{code:"la",name:"Latin"},{code:"lv",name:"Latvian"},{code:"ln",name:"Lingala"},{code:"lt",name:"Lithuanian"},{code:"lg",name:"Luganda"},{code:"lb",name:"Luxembourgish"},{code:"mk",name:"Macedonian"},{code:"mai",name:"Maithili"},{code:"mg",name:"Malagasy"},{code:"ms",name:"Malay"},{code:"ml",name:"Malayalam"},{code:"mt",name:"Maltese"},{code:"mi",name:"Maori"},{code:"mr",name:"Marathi"},{code:"mni-Mtei",name:"Meiteilon (Manipuri)"},{code:"lus",name:"Mizo"},{code:"mn",name:"Mongolian"},{code:"my",name:"Myanmar (Burmese)"},{code:"ne",name:"Nepali"},{code:"no",name:"Norwegian"},{code:"or",name:"Odia (Oriya)"},{code:"om",name:"Oromo"},{code:"ps",name:"Pashto"},{code:"fa",name:"Persian"},{code:"pl",name:"Polish"},{code:"pt",name:"Portuguese"},{code:"pa",name:"Punjabi"},{code:"qu",name:"Quechua"},{code:"ro",name:"Romanian"},{code:"ru",name:"Russian"},{code:"sm",name:"Samoan"},{code:"sa",name:"Sanskrit"},{code:"gd",name:"Scots Gaelic"},{code:"nso",name:"Sepedi"},{code:"sr",name:"Serbian"},{code:"st",name:"Sesotho"},{code:"sn",name:"Shona"},{code:"sd",name:"Sindhi"},{code:"si",name:"Sinhala"},{code:"sk",name:"Slovak"},{code:"sl",name:"Slovenian"},{code:"so",name:"Somali"},{code:"es",name:"Spanish"},{code:"su",name:"Sundanese"},{code:"sw",name:"Swahili"},{code:"sv",name:"Swedish"},{code:"tg",name:"Tajik"},{code:"ta",name:"Tamil"},{code:"tt",name:"Tatar"},{code:"te",name:"Telugu"},{code:"th",name:"Thai"},{code:"ti",name:"Tigrinya"},{code:"ts",name:"Tsonga"},{code:"tr",name:"Turkish"},{code:"tk",name:"Turkmen"},{code:"ak",name:"Twi"},{code:"uk",name:"Ukrainian"},{code:"ur",name:"Urdu"},{code:"ug",name:"Uyghur"},{code:"uz",name:"Uzbek"},{code:"vi",name:"Vietnamese"},{code:"cy",name:"Welsh"},{code:"xh",name:"Xhosa"},{code:"yi",name:"Yiddish"},{code:"yo",name:"Yoruba"},{code:"zu",name:"Zulu"}];function Do(...t){try{return Ua(...t)}catch{return t[2]||!1}}const Ft=Ye(Do),Po=[new Intl.DateTimeFormat().resolvedOptions().locale,...navigator.languages];function ia(t=!1){if(t){const{contentTranslationTargetLanguage:n}=A.settings;if(n)return n}return Ft(Po,Ro.map(n=>n.code.replace("_","-")),"en")}function Jt(t){try{return new Intl.DisplayNames(navigator.languages,{type:"language"}).of(t)}catch{return null}}function rn(t,n=[]){return t?(!n.length||t.indexOf(":")===-1||n.forEach(a=>{const{shortcode:s,staticUrl:o,url:r}=a;t=t.replace(new RegExp(`:${s}:`,"g"),`<picture><source srcset="${o}" media="(prefers-reduced-motion: reduce)"></source><img class="shortcode-emoji emoji" src="${r}" alt=":${s}:" width="16" height="16" loading="lazy" decoding="async" /></picture>`)}),t):""}const Xe=document.createElement("div"),Mo=["u-url","mention","hashtag"];function Oo(t,n={}){const{emojis:a,postEnhanceDOM:s=()=>{}}=n;let o=t;const r=document.createElement("div");r.innerHTML=o;const c=/<a/i.test(o),l=o.indexOf("```")!==-1;if(c&&(Array.from(r.querySelectorAll('a:not([target="_blank"])')).forEach(f=>{f.setAttribute("target","_blank")}),Array.from(r.querySelectorAll("a[class]")).forEach(f=>{Array.from(f.classList).forEach(m=>{Mo.includes(m)||f.classList.remove(m)})})),c&&Array.from(r.querySelectorAll("a[href]")).forEach(d=>{/^https?:\/\//i.test(d.textContent.trim())&&d.classList.add("has-url-text")}),c){const g=Array.from(r.querySelectorAll("a[href]")),d=[];g.forEach(f=>{const m=f.innerText.trim(),v=f.querySelector("*");if(/^@[^@]+(@[^@]+)?$/g.test(m)){const[w,h,b]=m.split("@");v||(!d.find(([y])=>y===h)||d.find(([y,E])=>y===h&&E===b)?(f.innerHTML=`@<span>${h}</span>`,d.push([h,b])):f.innerHTML=`@<span>${h}@${b}</span>`),f.classList.add("mention")}/^#[^#]+$/g.test(m)&&(v||(f.innerHTML=`#<span>${m.slice(1)}</span>`),f.classList.add("mention","hashtag"))})}let p;if(o.indexOf(":")!==-1&&(p=Zt(r),p.forEach(g=>{let d=g.nodeValue.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;");a&&(d=rn(d,a)),Xe.innerHTML=d;const f=Array.from(Xe.childNodes);g.replaceWith(...f)})),l&&Array.from(r.querySelectorAll("p")).filter(d=>/^```[^]+```$/g.test(d.innerText.trim())).forEach(d=>{const f=document.createElement("pre");d.querySelectorAll("br").forEach(m=>m.replaceWith(`
`)),f.innerHTML=`<code>${d.innerHTML.trim()}</code>`,d.replaceWith(f)}),l&&Array.from(r.querySelectorAll("p")).filter(f=>/^```/g.test(f.innerText)).forEach(f=>{const m=[f];let v=!1,w=f;for(;w.nextElementSibling;){const h=w.nextElementSibling;if(h&&h.tagName==="P")if(/```$/g.test(h.innerText)){m.push(h),v=!0;break}else m.push(h);else break;w=h}if(v){const h=document.createElement("pre");m.forEach(y=>{y.querySelectorAll("br").forEach(E=>E.replaceWith(`
`))});const b=m.map(y=>y.innerHTML).join(`

`);h.innerHTML=`<code tabindex="0">${b}</code>`,f.replaceWith(h),m.forEach(y=>y.remove())}}),o.indexOf("`")!==-1&&(p=Zt(r),p.forEach(g=>{let d=g.nodeValue.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;");/`[^`]+`/g.test(d)&&(d=d.replaceAll(/(`[^]+?`)/g,"<code>$1</code>")),Xe.innerHTML=d;const f=Array.from(Xe.childNodes);g.replaceWith(...f)})),/twitter\.com/i.test(o)&&(p=Zt(r,{rejectFilter:["A"]}),p.forEach(g=>{let d=g.nodeValue.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;");/@[a-zA-Z0-9_]+@twitter\.com/g.test(d)&&(d=d.replaceAll(/(@([a-zA-Z0-9_]+)@twitter\.com)/g,'<a href="https://twitter.com/$2" rel="nofollow noopener noreferrer" target="_blank">$1</a>')),Xe.innerHTML=d;const f=Array.from(Xe.childNodes);g.replaceWith(...f)})),o.indexOf("#")!==-1){let g=null;const d=Array.from(r.querySelectorAll("p")).filter((f,m)=>{let v=0;for(let w=0;w<f.childNodes.length;w++){const h=f.childNodes[w];if(h.nodeType===Node.TEXT_NODE){if(h.textContent.trim()!=="")return!1}else if(h.tagName!=="BR")if(h.tagName==="A"){const b=h.textContent.trim();if(!b||!b.startsWith("#"))return!1;v++}else return!1}if(v>3||v>1&&g&&m===g+1)return g=m,!0});d!=null&&d.length&&d.forEach(f=>{f.classList.add("hashtag-stuffing"),f.title=f.innerText})}return s&&s(r),o=r.innerHTML,o}const an=Ye(Oo),zo=["STYLE","IMG","VIDEO","AUDIO","AREA","MAP","TRACK","EMBED","IFRAME","OBJECT","PICTURE","PORTAL","SOURCE","SVG","MATH","CANVAS","NOSCRIPT","SCRIPT","INPUT","OPTION","TEXTAREA","SLOT","TEMPLATE"],No=Object.fromEntries(zo.map(t=>[t,!0]));function Zt(t,n={}){const a=[],s=document.createTreeWalker(t,NodeFilter.SHOW_TEXT,{acceptNode(r){return No[r.parentNode.nodeName]||n.rejectFilter&&n.rejectFilter.includes(r.parentNode.nodeName)?NodeFilter.FILTER_REJECT:NodeFilter.FILTER_ACCEPT}},!1);let o;for(;o=s.nextNode();)a.push(o);return a}const Yt=document.createElement("div");function Bo(t){return t?(Yt.innerHTML=t.replace(/<\/p>/g,`</p>

`).replace(/<\/li>/g,`</li>
`),Yt.querySelectorAll("br").forEach(n=>{n.replaceWith(`
`)}),Yt.innerText.replace(/[\r\n]{3,}/g,`

`).trim()):""}const on=Ye(Bo);function jo(t){const{mentions:n=[],instance:a,previewMode:s,statusURL:o}=t||{};return r=>{var d,f;let{target:c}=r;if(c=c.closest("a"),!c||r.metaKey||r.ctrlKey||r.shiftKey||r.altKey||r.which===2)return;const l=(d=c.previousSibling)==null?void 0:d.textContent,p=l==null?void 0:l.endsWith("@"),g=c.innerText.startsWith("@");if(c.classList.contains("u-url")&&g||p&&!g){const m=(c.querySelector("span")||c).innerText.trim(),v=m.replace(/^@/,""),w=c.getAttribute("href"),h=n.find(b=>b.username===v||b.acct===v||b.url===w);if(h)r.preventDefault(),r.stopPropagation(),A.showAccount={account:h.acct,instance:a};else if(!/^http/i.test(m)){r.preventDefault(),r.stopPropagation();const b=c.getAttribute("href");A.showAccount={account:b,instance:a}}}else if(!s){const m=l==null?void 0:l.endsWith("#");if(c.classList.contains("hashtag")||m){r.preventDefault(),r.stopPropagation();const v=c.innerText.replace(/^#/,"").trim(),w=a?`#/${a}/t/${v}`:`#/t/${v}`;location.hash=w}else(f=A.unfurledLinks[c.href])!=null&&f.url&&o!==c.href&&(r.preventDefault(),r.stopPropagation(),A.prevLocation={pathname:location.hash.replace(/^#/,"")},location.hash=`#${A.unfurledLinks[c.href].url}`)}}}const{locale:Vo}=new Intl.DateTimeFormat().resolvedOptions();function $t(t,{hideTime:n,formatOpts:a}={}){t instanceof Date||(t=new Date(t));const s=new Date().getFullYear();return Intl.DateTimeFormat(Vo,{year:t.getFullYear()===s?void 0:"numeric",month:"short",day:"numeric",hour:n?void 0:"numeric",minute:n?void 0:"numeric",...a}).format(t)}const{locale:Uo}=Intl.NumberFormat().resolvedOptions(),Je=Intl.NumberFormat(Uo,{notation:"compact"}).format;function ra({skeleton:t,account:n,avatarSize:a="xl",useAvatarStatic:s=!1,instance:o,external:r,internal:c,onClick:l,showActivity:p=!1,showStats:g=!1,accountInstance:d,hideDisplayName:f=!1}){if(t)return e("div",{class:"account-block skeleton",children:[e(Ze,{size:a}),e("span",{children:[e("b",{children:"████████"}),e("br",{}),e("span",{class:"account-block-acct",children:"@██████"})]})]});const{id:m,acct:v,avatar:w,avatarStatic:h,displayName:b,username:y,emojis:E,url:T,statusesCount:x,lastStatusAt:C,bot:D,fields:R,note:q,group:J}=n;let[P,N,M]=v.match(/([^@]+)(@.+)/i)||[,v];d&&(M=`@${d}`);const ne=R==null?void 0:R.find(re=>!!re.verifiedAt&&!!re.value);return e("a",{class:"account-block",href:T,target:r?"_blank":null,title:`@${v}`,onClick:re=>{if(!r){if(re.preventDefault(),l)return l(re);c?location.hash=`/${o}/a/${m}`:A.showAccount={account:n,instance:o}}},children:[e(Ze,{url:s?h:w||h,size:a,squircle:D}),e("span",{class:"account-block-content",children:[!f&&e(H,{children:[b?e("b",{children:e(dt,{text:b,emojis:E})}):e("b",{children:y}),e("br",{})]}),e("span",{class:"account-block-acct",children:["@",N,e("wbr",{}),M]}),p&&e(H,{children:[e("br",{}),e("small",{class:"last-status-at insignificant",children:["Posts: ",x,!!C&&e(H,{children:[" ","· Last posted:"," ",$t(C,{hideTime:!0})]})]})]}),g&&e("div",{class:"account-block-stats",children:[e("div",{class:"short-desc",dangerouslySetInnerHTML:{__html:an(q,{emojis:E})}}),D&&e(H,{children:e("span",{class:"tag",children:[e(L,{icon:"bot"})," Automated"]})}),!!J&&e(H,{children:e("span",{class:"tag",children:[e(L,{icon:"group"})," Group"]})}),!!ne&&e("span",{class:"verified-field ib",children:[e(L,{icon:"check-circle",size:"s"})," ",e("span",{dangerouslySetInnerHTML:{__html:an(ne.value,{emojis:E})}})]})]})]})]})}const Ho={"@mastodon/edit-media-attributes":">=4.1","@mastodon/list-exclusive":">=4.2"},Xt={};function sa(t){try{const{version:n,domain:a}=Xn(),s=`${a}-${t}`;if(Xt[s])return Xt[s];const o=Ho[t];return o?Xt[s]=Ha(n,o,{includePrerelease:!0,loose:!0}):!1}catch{return!1}}const Ko=[{code:"auto",name:"Detect"},{code:"af",name:"Afrikaans"},{code:"sq",name:"Albanian"},{code:"am",name:"Amharic"},{code:"ar",name:"Arabic"},{code:"hy",name:"Armenian"},{code:"as",name:"Assamese"},{code:"ay",name:"Aymara"},{code:"az",name:"Azerbaijani"},{code:"bm",name:"Bambara"},{code:"eu",name:"Basque"},{code:"be",name:"Belarusian"},{code:"bn",name:"Bengali"},{code:"bho",name:"Bhojpuri"},{code:"bs",name:"Bosnian"},{code:"bg",name:"Bulgarian"},{code:"ca",name:"Catalan"},{code:"ceb",name:"Cebuano"},{code:"ny",name:"Chichewa"},{code:"zh",name:"Chinese"},{code:"co",name:"Corsican"},{code:"hr",name:"Croatian"},{code:"cs",name:"Czech"},{code:"da",name:"Danish"},{code:"dv",name:"Dhivehi"},{code:"doi",name:"Dogri"},{code:"nl",name:"Dutch"},{code:"en",name:"English"},{code:"eo",name:"Esperanto"},{code:"et",name:"Estonian"},{code:"ee",name:"Ewe"},{code:"tl",name:"Filipino"},{code:"fi",name:"Finnish"},{code:"fr",name:"French"},{code:"fy",name:"Frisian"},{code:"gl",name:"Galician"},{code:"ka",name:"Georgian"},{code:"de",name:"German"},{code:"el",name:"Greek"},{code:"gn",name:"Guarani"},{code:"gu",name:"Gujarati"},{code:"ht",name:"Haitian Creole"},{code:"ha",name:"Hausa"},{code:"haw",name:"Hawaiian"},{code:"iw",name:"Hebrew"},{code:"hi",name:"Hindi"},{code:"hmn",name:"Hmong"},{code:"hu",name:"Hungarian"},{code:"is",name:"Icelandic"},{code:"ig",name:"Igbo"},{code:"ilo",name:"Ilocano"},{code:"id",name:"Indonesian"},{code:"ga",name:"Irish"},{code:"it",name:"Italian"},{code:"ja",name:"Japanese"},{code:"jw",name:"Javanese"},{code:"kn",name:"Kannada"},{code:"kk",name:"Kazakh"},{code:"km",name:"Khmer"},{code:"rw",name:"Kinyarwanda"},{code:"gom",name:"Konkani"},{code:"ko",name:"Korean"},{code:"kri",name:"Krio"},{code:"ku",name:"Kurdish (Kurmanji)"},{code:"ckb",name:"Kurdish (Sorani)"},{code:"ky",name:"Kyrgyz"},{code:"lo",name:"Lao"},{code:"la",name:"Latin"},{code:"lv",name:"Latvian"},{code:"ln",name:"Lingala"},{code:"lt",name:"Lithuanian"},{code:"lg",name:"Luganda"},{code:"lb",name:"Luxembourgish"},{code:"mk",name:"Macedonian"},{code:"mai",name:"Maithili"},{code:"mg",name:"Malagasy"},{code:"ms",name:"Malay"},{code:"ml",name:"Malayalam"},{code:"mt",name:"Maltese"},{code:"mi",name:"Maori"},{code:"mr",name:"Marathi"},{code:"mni-Mtei",name:"Meiteilon (Manipuri)"},{code:"lus",name:"Mizo"},{code:"mn",name:"Mongolian"},{code:"my",name:"Myanmar (Burmese)"},{code:"ne",name:"Nepali"},{code:"no",name:"Norwegian"},{code:"or",name:"Odia (Oriya)"},{code:"om",name:"Oromo"},{code:"ps",name:"Pashto"},{code:"fa",name:"Persian"},{code:"pl",name:"Polish"},{code:"pt",name:"Portuguese"},{code:"pa",name:"Punjabi"},{code:"qu",name:"Quechua"},{code:"ro",name:"Romanian"},{code:"ru",name:"Russian"},{code:"sm",name:"Samoan"},{code:"sa",name:"Sanskrit"},{code:"gd",name:"Scots Gaelic"},{code:"nso",name:"Sepedi"},{code:"sr",name:"Serbian"},{code:"st",name:"Sesotho"},{code:"sn",name:"Shona"},{code:"sd",name:"Sindhi"},{code:"si",name:"Sinhala"},{code:"sk",name:"Slovak"},{code:"sl",name:"Slovenian"},{code:"so",name:"Somali"},{code:"es",name:"Spanish"},{code:"su",name:"Sundanese"},{code:"sw",name:"Swahili"},{code:"sv",name:"Swedish"},{code:"tg",name:"Tajik"},{code:"ta",name:"Tamil"},{code:"tt",name:"Tatar"},{code:"te",name:"Telugu"},{code:"th",name:"Thai"},{code:"ti",name:"Tigrinya"},{code:"ts",name:"Tsonga"},{code:"tr",name:"Turkish"},{code:"tk",name:"Turkmen"},{code:"ak",name:"Twi"},{code:"uk",name:"Ukrainian"},{code:"ur",name:"Urdu"},{code:"ug",name:"Uyghur"},{code:"uz",name:"Uzbek"},{code:"vi",name:"Vietnamese"},{code:"cy",name:"Welsh"},{code:"xh",name:"Xhosa"},{code:"yi",name:"Yiddish"},{code:"yo",name:"Yoruba"},{code:"zu",name:"Zulu"}],qo=Wn({limit:1,interval:2e3}),Fn=["lingva.phanpy.social","lingva.lunar.icu","lingva.garudalinux.org","translate.plausibility.cloud"];let Qt=0;function Wo(t,n,a){return Ka(()=>{let o=Fn[Qt];return fetch(`https://${o}/api/v1/${n}/${a}/${encodeURIComponent(t)}`).then(r=>{if(!r.ok)throw new Error(r.statusText);return r.json()}).then(r=>{var c;return{provider:"lingva",content:r.translation,detectedSourceLanguage:(c=r.info)==null?void 0:c.detectedSource,info:r.info}})},{retries:3,onFailedAttempt:o=>{Qt=(Qt+1)%Fn.length}})}const ca=1e3*60*60,la=Rt(Wo,{maxAge:ca}),Go=Rt(qo(la),{maxAge:ca});function Jo({forceTranslate:t,sourceLanguage:n,onTranslate:a,text:s="",mini:o}){const r=ia(!0),[c,l]=W("default"),[p,g]=W(null),[d,f]=W(null),[m,v]=W(null),w=X(),h=n?Jt(n):null,b=Jt(r),y=X("auto");a||(a=o?Go:la);const E=async()=>{var T,x;l("loading");try{const{content:C,detectedSourceLanguage:D,provider:R,error:q,...J}=await a(s,y.current,r);if(C){if(D){const P=Jt(D);v(P)}if(R==="lingva"){const P=(x=(T=J==null?void 0:J.info)==null?void 0:T.pronunciation)==null?void 0:x.query;P&&g(P)}f(C),l("default"),!o&&C.trim()!==s.trim()&&(w.current.open=!0,w.current.scrollIntoView({behavior:"smooth",block:"nearest"}))}else l("error")}catch{l("error")}};return ue(()=>{t&&E()},[t]),o?d&&d.trim()!==s.trim()&&m!==b?e("div",{class:"shazam-container",children:e("div",{class:"shazam-container-inner",children:e("div",{class:"status-translation-block-mini",children:[e(L,{icon:"translate",alt:`Auto-translated from ${h}`}),e("output",{lang:r,dir:"auto",title:p||"",children:d})]})})}):null:e("div",{class:"status-translation-block",onClick:T=>{T.preventDefault()},children:e("details",{ref:w,children:[e("summary",{children:e("button",{type:"button",onClick:async T=>{T.preventDefault(),T.stopPropagation(),w.current.open=!w.current.open,c!=="loading"&&(d||E())},children:[e(L,{icon:"translate"})," ",e("span",{children:c==="loading"?"Translating…":n&&h&&!m?`Translate from ${h}`:"Translate"})]})}),e("div",{class:"translated-block",children:[e("div",{class:"translation-info insignificant",children:[e("select",{class:"translated-source-select",disabled:c==="loading",onChange:T=>{y.current=T.target.value,E()},children:Ko.map(T=>e("option",{value:T.code,children:T.code==="auto"?`Auto (${m??"…"})`:T.name}))})," ",e("span",{children:["→ ",b]}),e(et,{abrupt:!0,hidden:c!=="loading"})]}),c==="error"?e("p",{class:"ui-state",children:"Failed to translate"}):!!d&&e(H,{children:[e("output",{class:"translated-content",lang:r,dir:"auto",children:d}),!!p&&e("output",{class:"translated-pronunciation-content",tabIndex:-1,onClick:T=>{T.target.classList.toggle("expand")},children:p})]})]})]})})}const sn=[["aa","Afar","Afaraf"],["ab","Abkhaz","аҧсуа бызшәа"],["ae","Avestan","avesta"],["af","Afrikaans","Afrikaans"],["ak","Akan","Akan"],["am","Amharic","አማርኛ"],["an","Aragonese","aragonés"],["ar","Arabic","اللغة العربية"],["as","Assamese","অসমীয়া"],["av","Avaric","авар мацӀ"],["ay","Aymara","aymar aru"],["az","Azerbaijani","azərbaycan dili"],["ba","Bashkir","башҡорт теле"],["be","Belarusian","беларуская мова"],["bg","Bulgarian","български език"],["bh","Bihari","भोजपुरी"],["bi","Bislama","Bislama"],["bm","Bambara","bamanankan"],["bn","Bengali","বাংলা"],["bo","Tibetan","བོད་ཡིག"],["br","Breton","brezhoneg"],["bs","Bosnian","bosanski jezik"],["ca","Catalan","Català"],["ce","Chechen","нохчийн мотт"],["ch","Chamorro","Chamoru"],["co","Corsican","corsu"],["cr","Cree","ᓀᐦᐃᔭᐍᐏᐣ"],["cs","Czech","čeština"],["cu","Old Church Slavonic","ѩзыкъ словѣньскъ"],["cv","Chuvash","чӑваш чӗлхи"],["cy","Welsh","Cymraeg"],["da","Danish","dansk"],["de","German","Deutsch"],["dv","Divehi","Dhivehi"],["dz","Dzongkha","རྫོང་ཁ"],["ee","Ewe","Eʋegbe"],["el","Greek","Ελληνικά"],["en","English","English"],["eo","Esperanto","Esperanto"],["es","Spanish","Español"],["et","Estonian","eesti"],["eu","Basque","euskara"],["fa","Persian","فارسی"],["ff","Fula","Fulfulde"],["fi","Finnish","suomi"],["fj","Fijian","Vakaviti"],["fo","Faroese","føroyskt"],["fr","French","Français"],["fy","Western Frisian","Frysk"],["ga","Irish","Gaeilge"],["gd","Scottish Gaelic","Gàidhlig"],["gl","Galician","galego"],["gu","Gujarati","ગુજરાતી"],["gv","Manx","Gaelg"],["ha","Hausa","هَوُسَ"],["he","Hebrew","עברית"],["hi","Hindi","हिन्दी"],["ho","Hiri Motu","Hiri Motu"],["hr","Croatian","Hrvatski"],["ht","Haitian","Kreyòl ayisyen"],["hu","Hungarian","magyar"],["hy","Armenian","Հայերեն"],["hz","Herero","Otjiherero"],["ia","Interlingua","Interlingua"],["id","Indonesian","Bahasa Indonesia"],["ie","Interlingue","Interlingue"],["ig","Igbo","Asụsụ Igbo"],["ii","Nuosu","ꆈꌠ꒿ Nuosuhxop"],["ik","Inupiaq","Iñupiaq"],["io","Ido","Ido"],["is","Icelandic","Íslenska"],["it","Italian","Italiano"],["iu","Inuktitut","ᐃᓄᒃᑎᑐᑦ"],["ja","Japanese","日本語"],["jv","Javanese","basa Jawa"],["ka","Georgian","ქართული"],["kg","Kongo","Kikongo"],["ki","Kikuyu","Gĩkũyũ"],["kj","Kwanyama","Kuanyama"],["kk","Kazakh","қазақ тілі"],["kl","Kalaallisut","kalaallisut"],["km","Khmer","ខេមរភាសា"],["kn","Kannada","ಕನ್ನಡ"],["ko","Korean","한국어"],["kr","Kanuri","Kanuri"],["ks","Kashmiri","कश्मीरी"],["ku","Kurmanji (Kurdish)","Kurmancî"],["kv","Komi","коми кыв"],["kw","Cornish","Kernewek"],["ky","Kyrgyz","Кыргызча"],["la","Latin","latine"],["lb","Luxembourgish","Lëtzebuergesch"],["lg","Ganda","Luganda"],["li","Limburgish","Limburgs"],["ln","Lingala","Lingála"],["lo","Lao","ລາວ"],["lt","Lithuanian","lietuvių kalba"],["lu","Luba-Katanga","Tshiluba"],["lv","Latvian","latviešu valoda"],["mg","Malagasy","fiteny malagasy"],["mh","Marshallese","Kajin M̧ajeļ"],["mi","Māori","te reo Māori"],["mk","Macedonian","македонски јазик"],["ml","Malayalam","മലയാളം"],["mn","Mongolian","Монгол хэл"],["mr","Marathi","मराठी"],["ms","Malay","Bahasa Melayu"],["mt","Maltese","Malti"],["my","Burmese","ဗမာစာ"],["na","Nauru","Ekakairũ Naoero"],["nb","Norwegian Bokmål","Norsk bokmål"],["nd","Northern Ndebele","isiNdebele"],["ne","Nepali","नेपाली"],["ng","Ndonga","Owambo"],["nl","Dutch","Nederlands"],["nn","Norwegian Nynorsk","Norsk Nynorsk"],["no","Norwegian","Norsk"],["nr","Southern Ndebele","isiNdebele"],["nv","Navajo","Diné bizaad"],["ny","Chichewa","chiCheŵa"],["oc","Occitan","occitan"],["oj","Ojibwe","ᐊᓂᔑᓈᐯᒧᐎᓐ"],["om","Oromo","Afaan Oromoo"],["or","Oriya","ଓଡ଼ିଆ"],["os","Ossetian","ирон æвзаг"],["pa","Panjabi","ਪੰਜਾਬੀ"],["pi","Pāli","पाऴि"],["pl","Polish","Polski"],["ps","Pashto","پښتو"],["pt","Portuguese","Português"],["qu","Quechua","Runa Simi"],["rm","Romansh","rumantsch grischun"],["rn","Kirundi","Ikirundi"],["ro","Romanian","Română"],["ru","Russian","Русский"],["rw","Kinyarwanda","Ikinyarwanda"],["sa","Sanskrit","संस्कृतम्"],["sc","Sardinian","sardu"],["sd","Sindhi","सिन्धी"],["se","Northern Sami","Davvisámegiella"],["sg","Sango","yângâ tî sängö"],["si","Sinhala","සිංහල"],["sk","Slovak","slovenčina"],["sl","Slovenian","slovenščina"],["sn","Shona","chiShona"],["so","Somali","Soomaaliga"],["sq","Albanian","Shqip"],["sr","Serbian","српски језик"],["ss","Swati","SiSwati"],["st","Southern Sotho","Sesotho"],["su","Sundanese","Basa Sunda"],["sv","Swedish","Svenska"],["sw","Swahili","Kiswahili"],["ta","Tamil","தமிழ்"],["te","Telugu","తెలుగు"],["tg","Tajik","тоҷикӣ"],["th","Thai","ไทย"],["ti","Tigrinya","ትግርኛ"],["tk","Turkmen","Türkmen"],["tl","Tagalog","Wikang Tagalog"],["tn","Tswana","Setswana"],["to","Tonga","faka Tonga"],["tr","Turkish","Türkçe"],["ts","Tsonga","Xitsonga"],["tt","Tatar","татар теле"],["tw","Twi","Twi"],["ty","Tahitian","Reo Tahiti"],["ug","Uyghur","ئۇيغۇرچە‎"],["uk","Ukrainian","Українська"],["ur","Urdu","اردو"],["uz","Uzbek","Ўзбек"],["ve","Venda","Tshivenḓa"],["vi","Vietnamese","Tiếng Việt"],["vo","Volapük","Volapük"],["wa","Walloon","walon"],["wo","Wolof","Wollof"],["xh","Xhosa","isiXhosa"],["yi","Yiddish","ייִדיש"],["yo","Yoruba","Yorùbá"],["za","Zhuang","Saɯ cueŋƅ"],["zh","Chinese","中文"],["zu","Zulu","isiZulu"],["zh-CN","Chinese (China)","简体中文"],["zh-HK","Chinese (Hong Kong)","繁體中文（香港）"],["zh-TW","Chinese (Taiwan)","繁體中文（臺灣）"],["zh-YUE","Cantonese","廣東話"],["ast","Asturian","Asturianu"],["chr","Cherokee","ᏣᎳᎩ ᎦᏬᏂᎯᏍᏗ"],["ckb","Sorani (Kurdish)","سۆرانی"],["cnr","Montenegrin","crnogorski"],["jbo","Lojban","la .lojban."],["kab","Kabyle","Taqbaylit"],["kmr","Kurmanji (Kurdish)","Kurmancî"],["ldn","Láadan","Láadan"],["lfn","Lingua Franca Nova","lingua franca nova"],["sco","Scots","Scots"],["sma","Southern Sami","Åarjelsaemien Gïele"],["smj","Lule Sami","Julevsámegiella"],["szl","Silesian","ślůnsko godka"],["tok","Toki Pona","toki pona"],["xal","Kalmyk","Хальмг келн"],["zba","Balaibalan","باليبلن"],["zgh","Standard Moroccan Tamazight","ⵜⴰⵎⴰⵣⵉⵖⵜ"]],Zo="(((?:[^A-Za-z0-9@＠$#＃\\uFFFE\\uFEFF\\uFFFF]|[\\u202A-\\u202E\\u061C\\u200E\\u200F\\u2066\\u2067\\u2068\\u2069]|^))((https?:\\/\\/)((?:(?:(?:[^/\\!'#%&'\\(\\)*\\+,\\\\\\-\\.\\/:;<=>\\?@\\[\\]\\^_{|}~\\$//\\x09-\\x0D\\x20\\x85\\xA0\\u1680\\u180E\\u2000-\\u200A\\u2028\\u2029\\u202F\\u205F\\u3000//\\uFFFE\\uFEFF\\uFFFF//\\u202A-\\u202E\\u061C\\u200E\\u200F\\u2066\\u2067\\u2068\\u2069/](?:[_-]|[^/\\!'#%&'\\(\\)*\\+,\\\\\\-\\.\\/:;<=>\\?@\\[\\]\\^_{|}~\\$//\\x09-\\x0D\\x20\\x85\\xA0\\u1680\\u180E\\u2000-\\u200A\\u2028\\u2029\\u202F\\u205F\\u3000//\\uFFFE\\uFEFF\\uFFFF//\\u202A-\\u202E\\u061C\\u200E\\u200F\\u2066\\u2067\\u2068\\u2069/])*)?[^/\\!'#%&'\\(\\)*\\+,\\\\\\-\\.\\/:;<=>\\?@\\[\\]\\^_{|}~\\$//\\x09-\\x0D\\x20\\x85\\xA0\\u1680\\u180E\\u2000-\\u200A\\u2028\\u2029\\u202F\\u205F\\u3000//\\uFFFE\\uFEFF\\uFFFF//\\u202A-\\u202E\\u061C\\u200E\\u200F\\u2066\\u2067\\u2068\\u2069/]\\.)*(?:(?:[^/\\!'#%&'\\(\\)*\\+,\\\\\\-\\.\\/:;<=>\\?@\\[\\]\\^_{|}~\\$//\\x09-\\x0D\\x20\\x85\\xA0\\u1680\\u180E\\u2000-\\u200A\\u2028\\u2029\\u202F\\u205F\\u3000//\\uFFFE\\uFEFF\\uFFFF//\\u202A-\\u202E\\u061C\\u200E\\u200F\\u2066\\u2067\\u2068\\u2069/](?:-|[^/\\!'#%&'\\(\\)*\\+,\\\\\\-\\.\\/:;<=>\\?@\\[\\]\\^_{|}~\\$//\\x09-\\x0D\\x20\\x85\\xA0\\u1680\\u180E\\u2000-\\u200A\\u2028\\u2029\\u202F\\u205F\\u3000//\\uFFFE\\uFEFF\\uFFFF//\\u202A-\\u202E\\u061C\\u200E\\u200F\\u2066\\u2067\\u2068\\u2069/])*)?[^/\\!'#%&'\\(\\)*\\+,\\\\\\-\\.\\/:;<=>\\?@\\[\\]\\^_{|}~\\$//\\x09-\\x0D\\x20\\x85\\xA0\\u1680\\u180E\\u2000-\\u200A\\u2028\\u2029\\u202F\\u205F\\u3000//\\uFFFE\\uFEFF\\uFFFF//\\u202A-\\u202E\\u061C\\u200E\\u200F\\u2066\\u2067\\u2068\\u2069/]\\.)(?:(?:(?:삼성|닷컴|닷넷|香格里拉|餐厅|食品|飞利浦|電訊盈科|集团|通販|购物|谷歌|诺基亚|联通|网络|网站|网店|网址|组织机构|移动|珠宝|点看|游戏|淡马锡|机构|書籍|时尚|新闻|政府|政务|招聘|手表|手机|我爱你|慈善|微博|广东|工行|家電|娱乐|天主教|大拿|大众汽车|在线|嘉里大酒店|嘉里|商标|商店|商城|公益|公司|八卦|健康|信息|佛山|企业|中文网|中信|世界|ポイント|ファッション|セール|ストア|コム|グーグル|クラウド|みんな|คอม|संगठन|नेट|कॉम|همراه|موقع|موبايلي|كوم|كاثوليك|عرب|شبكة|بيتك|بازار|العليان|ارامكو|اتصالات|ابوظبي|קום|сайт|рус|орг|онлайн|москва|ком|католик|дети|zuerich|zone|zippo|zip|zero|zara|zappos|yun|youtube|you|yokohama|yoga|yodobashi|yandex|yamaxun|yahoo|yachts|xyz|xxx|xperia|xin|xihuan|xfinity|xerox|xbox|wtf|wtc|wow|world|works|work|woodside|wolterskluwer|wme|winners|wine|windows|win|williamhill|wiki|wien|whoswho|weir|weibo|wedding|wed|website|weber|webcam|weatherchannel|weather|watches|watch|warman|wanggou|wang|walter|walmart|wales|vuelos|voyage|voto|voting|vote|volvo|volkswagen|vodka|vlaanderen|vivo|viva|vistaprint|vista|vision|visa|virgin|vip|vin|villas|viking|vig|video|viajes|vet|versicherung|vermögensberatung|vermögensberater|verisign|ventures|vegas|vanguard|vana|vacations|ups|uol|uno|university|unicom|uconnect|ubs|ubank|tvs|tushu|tunes|tui|tube|trv|trust|travelersinsurance|travelers|travelchannel|travel|training|trading|trade|toys|toyota|town|tours|total|toshiba|toray|top|tools|tokyo|today|tmall|tkmaxx|tjx|tjmaxx|tirol|tires|tips|tiffany|tienda|tickets|tiaa|theatre|theater|thd|teva|tennis|temasek|telefonica|telecity|tel|technology|tech|team|tdk|tci|taxi|tax|tattoo|tatar|tatamotors|target|taobao|talk|taipei|tab|systems|symantec|sydney|swiss|swiftcover|swatch|suzuki|surgery|surf|support|supply|supplies|sucks|style|study|studio|stream|store|storage|stockholm|stcgroup|stc|statoil|statefarm|statebank|starhub|star|staples|stada|srt|srl|spreadbetting|spot|sport|spiegel|space|soy|sony|song|solutions|solar|sohu|software|softbank|social|soccer|sncf|smile|smart|sling|skype|sky|skin|ski|site|singles|sina|silk|shriram|showtime|show|shouji|shopping|shop|shoes|shiksha|shia|shell|shaw|sharp|shangrila|sfr|sexy|sex|sew|seven|ses|services|sener|select|seek|security|secure|seat|search|scot|scor|scjohnson|science|schwarz|schule|school|scholarships|schmidt|schaeffler|scb|sca|sbs|sbi|saxo|save|sas|sarl|sapo|sap|sanofi|sandvikcoromant|sandvik|samsung|samsclub|salon|sale|sakura|safety|safe|saarland|ryukyu|rwe|run|ruhr|rugby|rsvp|room|rogers|rodeo|rocks|rocher|rmit|rip|rio|ril|rightathome|ricoh|richardli|rich|rexroth|reviews|review|restaurant|rest|republican|report|repair|rentals|rent|ren|reliance|reit|reisen|reise|rehab|redumbrella|redstone|red|recipes|realty|realtor|realestate|read|raid|radio|racing|qvc|quest|quebec|qpon|pwc|pub|prudential|pru|protection|property|properties|promo|progressive|prof|productions|prod|pro|prime|press|praxi|pramerica|post|porn|politie|poker|pohl|pnc|plus|plumbing|playstation|play|place|pizza|pioneer|pink|ping|pin|pid|pictures|pictet|pics|piaget|physio|photos|photography|photo|phone|philips|phd|pharmacy|pfizer|pet|pccw|pay|passagens|party|parts|partners|pars|paris|panerai|panasonic|pamperedchef|page|ovh|ott|otsuka|osaka|origins|orientexpress|organic|org|orange|oracle|open|ooo|onyourside|online|onl|ong|one|omega|ollo|oldnavy|olayangroup|olayan|okinawa|office|off|observer|obi|nyc|ntt|nrw|nra|nowtv|nowruz|now|norton|northwesternmutual|nokia|nissay|nissan|ninja|nikon|nike|nico|nhk|ngo|nfl|nexus|nextdirect|next|news|newholland|new|neustar|network|netflix|netbank|net|nec|nba|navy|natura|nationwide|name|nagoya|nadex|nab|mutuelle|mutual|museum|mtr|mtpc|mtn|msd|movistar|movie|mov|motorcycles|moto|moscow|mortgage|mormon|mopar|montblanc|monster|money|monash|mom|moi|moe|moda|mobily|mobile|mobi|mma|mls|mlb|mitsubishi|mit|mint|mini|mil|microsoft|miami|metlife|merckmsd|meo|menu|men|memorial|meme|melbourne|meet|media|med|mckinsey|mcdonalds|mcd|mba|mattel|maserati|marshalls|marriott|markets|marketing|market|map|mango|management|man|makeup|maison|maif|madrid|macys|luxury|luxe|lupin|lundbeck|ltda|ltd|lplfinancial|lpl|love|lotto|lotte|london|lol|loft|locus|locker|loans|loan|llp|llc|lixil|living|live|lipsy|link|linde|lincoln|limo|limited|lilly|like|lighting|lifestyle|lifeinsurance|life|lidl|liaison|lgbt|lexus|lego|legal|lefrak|leclerc|lease|lds|lawyer|law|latrobe|latino|lat|lasalle|lanxess|landrover|land|lancome|lancia|lancaster|lamer|lamborghini|ladbrokes|lacaixa|kyoto|kuokgroup|kred|krd|kpn|kpmg|kosher|komatsu|koeln|kiwi|kitchen|kindle|kinder|kim|kia|kfh|kerryproperties|kerrylogistics|kerryhotels|kddi|kaufen|juniper|juegos|jprs|jpmorgan|joy|jot|joburg|jobs|jnj|jmp|jll|jlc|jio|jewelry|jetzt|jeep|jcp|jcb|java|jaguar|iwc|iveco|itv|itau|istanbul|ist|ismaili|iselect|irish|ipiranga|investments|intuit|international|intel|int|insure|insurance|institute|ink|ing|info|infiniti|industries|inc|immobilien|immo|imdb|imamat|ikano|iinet|ifm|ieee|icu|ice|icbc|ibm|hyundai|hyatt|hughes|htc|hsbc|how|house|hotmail|hotels|hoteles|hot|hosting|host|hospital|horse|honeywell|honda|homesense|homes|homegoods|homedepot|holiday|holdings|hockey|hkt|hiv|hitachi|hisamitsu|hiphop|hgtv|hermes|here|helsinki|help|healthcare|health|hdfcbank|hdfc|hbo|haus|hangout|hamburg|hair|guru|guitars|guide|guge|gucci|guardian|group|grocery|gripe|green|gratis|graphics|grainger|gov|got|gop|google|goog|goodyear|goodhands|goo|golf|goldpoint|gold|godaddy|gmx|gmo|gmbh|gmail|globo|global|gle|glass|glade|giving|gives|gifts|gift|ggee|george|genting|gent|gea|gdn|gbiz|gay|garden|gap|games|game|gallup|gallo|gallery|gal|fyi|futbol|furniture|fund|fun|fujixerox|fujitsu|ftr|frontier|frontdoor|frogans|frl|fresenius|free|fox|foundation|forum|forsale|forex|ford|football|foodnetwork|food|foo|fly|flsmidth|flowers|florist|flir|flights|flickr|fitness|fit|fishing|fish|firmdale|firestone|fire|financial|finance|final|film|fido|fidelity|fiat|ferrero|ferrari|feedback|fedex|fast|fashion|farmers|farm|fans|fan|family|faith|fairwinds|fail|fage|extraspace|express|exposed|expert|exchange|everbank|events|eus|eurovision|etisalat|esurance|estate|esq|erni|ericsson|equipment|epson|epost|enterprises|engineering|engineer|energy|emerck|email|education|edu|edeka|eco|eat|earth|dvr|dvag|durban|dupont|duns|dunlop|duck|dubai|dtv|drive|download|dot|doosan|domains|doha|dog|dodge|doctor|docs|dnp|diy|dish|discover|discount|directory|direct|digital|diet|diamonds|dhl|dev|design|desi|dentist|dental|democrat|delta|deloitte|dell|delivery|degree|deals|dealer|deal|dds|dclk|day|datsun|dating|date|data|dance|dad|dabur|cyou|cymru|cuisinella|csc|cruises|cruise|crs|crown|cricket|creditunion|creditcard|credit|cpa|courses|coupons|coupon|country|corsica|coop|cool|cookingchannel|cooking|contractors|contact|consulting|construction|condos|comsec|computer|compare|company|community|commbank|comcast|com|cologne|college|coffee|codes|coach|clubmed|club|cloud|clothing|clinique|clinic|click|cleaning|claims|cityeats|city|citic|citi|citadel|cisco|circle|cipriani|church|chrysler|chrome|christmas|chloe|chintai|cheap|chat|chase|charity|channel|chanel|cfd|cfa|cern|ceo|center|ceb|cbs|cbre|cbn|cba|catholic|catering|cat|casino|cash|caseih|case|casa|cartier|cars|careers|career|care|cards|caravan|car|capitalone|capital|capetown|canon|cancerresearch|camp|camera|cam|calvinklein|call|cal|cafe|cab|bzh|buzz|buy|business|builders|build|bugatti|budapest|brussels|brother|broker|broadway|bridgestone|bradesco|box|boutique|bot|boston|bostik|bosch|boots|booking|book|boo|bond|bom|bofa|boehringer|boats|bnpparibas|bnl|bmw|bms|blue|bloomberg|blog|blockbuster|blanco|blackfriday|black|biz|bio|bingo|bing|bike|bid|bible|bharti|bet|bestbuy|best|berlin|bentley|beer|beauty|beats|bcn|bcg|bbva|bbt|bbc|bayern|bauhaus|basketball|baseball|bargains|barefoot|barclays|barclaycard|barcelona|bar|bank|band|bananarepublic|banamex|baidu|baby|azure|axa|aws|avianca|autos|auto|author|auspost|audio|audible|audi|auction|attorney|athleta|associates|asia|asda|arte|art|arpa|army|archi|aramco|arab|aquarelle|apple|app|apartments|aol|anz|anquan|android|analytics|amsterdam|amica|amfam|amex|americanfamily|americanexpress|alstom|alsace|ally|allstate|allfinanz|alipay|alibaba|alfaromeo|akdn|airtel|airforce|airbus|aigo|aig|agency|agakhan|africa|afl|afamilycompany|aetna|aero|aeg|adult|ads|adac|actor|active|aco|accountants|accountant|accenture|academy|abudhabi|abogado|able|abc|abbvie|abbott|abb|abarth|aarp|aaa|onion)(?=[^0-9a-zA-Z@+-]|$))|(?:(?:한국|香港|澳門|新加坡|台灣|台湾|中國|中国|გე|ລາວ|ไทย|ලංකා|ഭാരതം|ಭಾರತ|భారత్|சிங்கப்பூர்|இலங்கை|இந்தியா|ଭାରତ|ભારત|ਭਾਰਤ|ভাৰত|ভারত|বাংলা|भारोत|भारतम्|भारत|ڀارت|پاکستان|موريتانيا|مليسيا|مصر|قطر|فلسطين|عمان|عراق|سورية|سودان|تونس|بھارت|بارت|ایران|امارات|المغرب|السعودية|الجزائر|البحرين|الاردن|հայ|қаз|укр|срб|рф|мон|мкд|ею|бел|бг|ευ|ελ|zw|zm|za|yt|ye|ws|wf|vu|vn|vi|vg|ve|vc|va|uz|uy|us|um|uk|ug|ua|tz|tw|tv|tt|tr|tp|to|tn|tm|tl|tk|tj|th|tg|tf|td|tc|sz|sy|sx|sv|su|st|ss|sr|so|sn|sm|sl|sk|sj|si|sh|sg|se|sd|sc|sb|sa|rw|ru|rs|ro|re|qa|py|pw|pt|ps|pr|pn|pm|pl|pk|ph|pg|pf|pe|pa|om|nz|nu|nr|np|no|nl|ni|ng|nf|ne|nc|na|mz|my|mx|mw|mv|mu|mt|ms|mr|mq|mp|mo|mn|mm|ml|mk|mh|mg|mf|me|md|mc|ma|ly|lv|lu|lt|ls|lr|lk|li|lc|lb|la|kz|ky|kw|kr|kp|kn|km|ki|kh|kg|ke|jp|jo|jm|je|it|is|ir|iq|io|in|im|il|ie|id|hu|ht|hr|hn|hm|hk|gy|gw|gu|gt|gs|gr|gq|gp|gn|gm|gl|gi|gh|gg|gf|ge|gd|gb|ga|fr|fo|fm|fk|fj|fi|eu|et|es|er|eh|eg|ee|ec|dz|do|dm|dk|dj|de|cz|cy|cx|cw|cv|cu|cr|co|cn|cm|cl|ck|ci|ch|cg|cf|cd|cc|ca|bz|by|bw|bv|bt|bs|br|bq|bo|bn|bm|bl|bj|bi|bh|bg|bf|be|bd|bb|ba|az|ax|aw|au|at|as|ar|aq|ao|an|am|al|ai|ag|af|ae|ad|ac)(?=[^0-9a-zA-Z@+-]|$))|(?:xn--[\\-0-9a-z]+))))(?::([0-9]+))?(\\/(?:(?:[a-z\\u0400-\\u04FF0-9!\\*';:=\\+,\\.\\$\\/%#\\[\\]\\-\\u2013_~@\\|&\\xC0-\\xD6\\xD8-\\xF6\\xF8-\\xFF\\u0100-\\u024F\\u0253\\u0254\\u0256\\u0257\\u0259\\u025B\\u0263\\u0268\\u026F\\u0272\\u0289\\u028B\\u02BB\\u0300-\\u036F\\u1E00-\\u1EFF]*(?:\\((?:[a-z\\u0400-\\u04FF0-9!\\*';:=\\+,\\.\\$\\/%#\\[\\]\\-\\u2013_~@\\|&\\xC0-\\xD6\\xD8-\\xF6\\xF8-\\xFF\\u0100-\\u024F\\u0253\\u0254\\u0256\\u0257\\u0259\\u025B\\u0263\\u0268\\u026F\\u0272\\u0289\\u028B\\u02BB\\u0300-\\u036F\\u1E00-\\u1EFF]+|(?:[a-z\\u0400-\\u04FF0-9!\\*';:=\\+,\\.\\$\\/%#\\[\\]\\-\\u2013_~@\\|&\\xC0-\\xD6\\xD8-\\xF6\\xF8-\\xFF\\u0100-\\u024F\\u0253\\u0254\\u0256\\u0257\\u0259\\u025B\\u0263\\u0268\\u026F\\u0272\\u0289\\u028B\\u02BB\\u0300-\\u036F\\u1E00-\\u1EFF]*\\([a-z\\u0400-\\u04FF0-9!\\*';:=\\+,\\.\\$\\/%#\\[\\]\\-\\u2013_~@\\|&\\xC0-\\xD6\\xD8-\\xF6\\xF8-\\xFF\\u0100-\\u024F\\u0253\\u0254\\u0256\\u0257\\u0259\\u025B\\u0263\\u0268\\u026F\\u0272\\u0289\\u028B\\u02BB\\u0300-\\u036F\\u1E00-\\u1EFF]+\\)[a-z\\u0400-\\u04FF0-9!\\*';:=\\+,\\.\\$\\/%#\\[\\]\\-\\u2013_~@\\|&\\xC0-\\xD6\\xD8-\\xF6\\xF8-\\xFF\\u0100-\\u024F\\u0253\\u0254\\u0256\\u0257\\u0259\\u025B\\u0263\\u0268\\u026F\\u0272\\u0289\\u028B\\u02BB\\u0300-\\u036F\\u1E00-\\u1EFF]*))\\)[a-z\\u0400-\\u04FF0-9!\\*';:=\\+,\\.\\$\\/%#\\[\\]\\-\\u2013_~@\\|&\\xC0-\\xD6\\xD8-\\xF6\\xF8-\\xFF\\u0100-\\u024F\\u0253\\u0254\\u0256\\u0257\\u0259\\u025B\\u0263\\u0268\\u026F\\u0272\\u0289\\u028B\\u02BB\\u0300-\\u036F\\u1E00-\\u1EFF]*)*[\\+\\-a-z\\u0400-\\u04FF0-9=_#\\/\\xC0-\\xD6\\xD8-\\xF6\\xF8-\\xFF\\u0100-\\u024F\\u0253\\u0254\\u0256\\u0257\\u0259\\u025B\\u0263\\u0268\\u026F\\u0272\\u0289\\u028B\\u02BB\\u0300-\\u036F\\u1E00-\\u1EFF]|(?:\\((?:[a-z\\u0400-\\u04FF0-9!\\*';:=\\+,\\.\\$\\/%#\\[\\]\\-\\u2013_~@\\|&\\xC0-\\xD6\\xD8-\\xF6\\xF8-\\xFF\\u0100-\\u024F\\u0253\\u0254\\u0256\\u0257\\u0259\\u025B\\u0263\\u0268\\u026F\\u0272\\u0289\\u028B\\u02BB\\u0300-\\u036F\\u1E00-\\u1EFF]+|(?:[a-z\\u0400-\\u04FF0-9!\\*';:=\\+,\\.\\$\\/%#\\[\\]\\-\\u2013_~@\\|&\\xC0-\\xD6\\xD8-\\xF6\\xF8-\\xFF\\u0100-\\u024F\\u0253\\u0254\\u0256\\u0257\\u0259\\u025B\\u0263\\u0268\\u026F\\u0272\\u0289\\u028B\\u02BB\\u0300-\\u036F\\u1E00-\\u1EFF]*\\([a-z\\u0400-\\u04FF0-9!\\*';:=\\+,\\.\\$\\/%#\\[\\]\\-\\u2013_~@\\|&\\xC0-\\xD6\\xD8-\\xF6\\xF8-\\xFF\\u0100-\\u024F\\u0253\\u0254\\u0256\\u0257\\u0259\\u025B\\u0263\\u0268\\u026F\\u0272\\u0289\\u028B\\u02BB\\u0300-\\u036F\\u1E00-\\u1EFF]+\\)[a-z\\u0400-\\u04FF0-9!\\*';:=\\+,\\.\\$\\/%#\\[\\]\\-\\u2013_~@\\|&\\xC0-\\xD6\\xD8-\\xF6\\xF8-\\xFF\\u0100-\\u024F\\u0253\\u0254\\u0256\\u0257\\u0259\\u025B\\u0263\\u0268\\u026F\\u0272\\u0289\\u028B\\u02BB\\u0300-\\u036F\\u1E00-\\u1EFF]*))\\)))|(?:@[a-z\\u0400-\\u04FF0-9!\\*';:=\\+,\\.\\$\\/%#\\[\\]\\-\\u2013_~@\\|&\\xC0-\\xD6\\xD8-\\xF6\\xF8-\\xFF\\u0100-\\u024F\\u0253\\u0254\\u0256\\u0257\\u0259\\u025B\\u0263\\u0268\\u026F\\u0272\\u0289\\u028B\\u02BB\\u0300-\\u036F\\u1E00-\\u1EFF]+\\/))*)?(\\?[a-z0-9!?\\*'@\\(\\);:&=\\+\\$\\/%#\\[\\]\\-_\\.,~|]*[a-z0-9\\-_&=#\\/])?))",Yo="gi",$n={source:Zo,flags:Yo},qe=qa("drafts-db","drafts-store"),Xo={set:(t,n)=>Wa(t,n,qe),get:t=>Ga(t,qe),getMany:t=>Ja(t,qe),del:t=>Za(t,qe),delMany:t=>Ya(t,qe),clear:()=>Xa(qe),keys:()=>Qa(qe)},Sn={drafts:Xo},Qe={public:"earth",unlisted:"group",private:"lock",direct:"message"};function Qo({poll:t,lang:n,readOnly:a,refresh:s=()=>{},votePoll:o=()=>{}}){const[r,c]=W("default"),{expired:l,expiresAt:p,id:g,multiple:d,options:f,ownVotes:m,voted:v,votersCount:w,votesCount:h,emojis:b}=t,y=!!p&&new Date(p),E=w||h;let T=0;E<=1e3?T=0:E<=1e4?T=1:E<=1e5&&(T=2);const[x,C]=W(!1),D=f.every(R=>R.votesCount!==null);return e("div",{lang:n,dir:"auto",class:`poll ${a?"read-only":""} ${r==="loading"?"loading":""}`,children:[x&&D||v||l?e(H,{children:[e("div",{class:"poll-options",children:f.map((R,q)=>{const{title:J,votesCount:P}=R,N=E?(P/E*100).toFixed(T):0,M=P>0&&P===Math.max(...f.map(ne=>ne.votesCount));return e("div",{class:`poll-option poll-result ${M?"poll-option-leading":""}`,style:{"--percentage":`${N}%`},children:[e("div",{class:"poll-option-title",children:[e("span",{children:e(dt,{text:J,emojis:b})}),v&&m.includes(q)&&e(H,{children:[" ",e(L,{icon:"check-circle"})]})]}),e("div",{class:"poll-option-votes",title:`${P} vote${P===1?"":"s"}`,children:[N,"%"]})]},`${q}-${J}-${P}`)})}),!l&&!v&&e("button",{class:"poll-vote-button plain2",disabled:r==="loading",onClick:R=>{R.preventDefault(),C(!1)},children:[e(L,{icon:"arrow-left",size:"s"})," Hide results"]})]}):e("form",{onSubmit:async R=>{R.preventDefault();const q=R.target,J=new FormData(q),P=[];J.forEach((N,M)=>{M==="poll"&&P.push(N)}),P.length&&(c("loading"),await o(P),c("default"))},children:[e("div",{class:"poll-options",children:f.map((R,q)=>{const{title:J}=R;return e("div",{class:"poll-option",children:e("label",{class:"poll-label",children:[e("input",{type:d?"checkbox":"radio",name:"poll",value:q,disabled:r==="loading",readOnly:a}),e("span",{class:"poll-option-title",children:e(dt,{text:J,emojis:b})})]})})})}),!a&&e("button",{class:"poll-vote-button",type:"submit",disabled:r==="loading",children:"Vote"})]}),e("p",{class:"poll-meta",children:[!l&&!a&&e("button",{type:"button",class:"plain small",disabled:r==="loading",style:{marginLeft:-8},onClick:R=>{R.preventDefault(),c("loading"),(async()=>(await s(),c("default")))()},title:"Refresh",children:e(L,{icon:"refresh",alt:"Refresh"})}),!v&&!l&&!a&&D&&e("button",{type:"button",class:"plain small",disabled:r==="loading",onClick:R=>{R.preventDefault(),C(!x)},title:x?"Hide results":"Show results",children:[e(L,{icon:x?"eye-open":"eye-close",alt:x?"Hide results":"Show results"})," "]}),!l&&!a&&" ",e("span",{title:h,children:Je(h)})," vote",h===1?"":"s",!!w&&w!==h&&e(H,{children:[" ","• ",e("span",{title:w,children:Je(w)})," ","voter",w===1?"":"s"]})," ","• ",l?"Ended":"Ending"," ",!!y&&e(mt,{datetime:y})]})," "]})}const ei=eo();function ti(t,n){if(!(t!=null&&t.length))return!1;const a=t.filter(r=>{const{filter:c}=r,l=c.context.includes(n);return l?c.expiresAt?new Date(c.expiresAt)>new Date:l:!1});if(!a.length)return!1;if(a.some(r=>r.filter.filterAction==="hide"))return{action:"hide"};if(a.some(r=>r.filter.filterAction==="warn")){const r=a.map(c=>c.filter.title);return{action:"warn",titles:r,titlesStr:r.join(" • ")}}return!1}const ua=Ye(ti);function ni(t,n,a){var c;const{filtered:s}=t;if(!(s!=null&&s.length)||a&&((c=t.account)==null?void 0:c.id)===a)return!0;const r=ua(s,n);return r?r.action!=="hide":!0}function Zi(t,n){if(!(t!=null&&t.length))return[];if(!n)return t;const a=z.session.get("currentAccount");return t.filter(s=>ni(s,n,a))}const In=document.createElement("div");function Rn(t){return t?(In.innerHTML=t,In.innerText.length):0}function da(t){const{pathname:n,hash:a}=new URL(t);return/^\/.*\/\d+$/i.test(n)||/^\/@[^/]+\/(statuses|posts)\/\w+\/?$/i.test(n)||/^\/notes\/[a-z0-9]+$/i.test(n)||/^\/notes\/[a-z0-9]+$/i.test(n)||/^\/(notice|objects)\/[a-z0-9-]+$/i.test(n)||/#\/[^\/]+\.[^\/]+\/s\/.+/i.test(a)}function ai(t){const{spoilerText:n,content:a,poll:s,mediaAttachments:o}=t;let r="";return n!=null&&n.trim()?r+=n:r+=on(a),r=r.trim(),s&&(r+=" 📊"),o!=null&&o.length&&(r+=" "+o.map(c=>({image:"🖼️",gifv:"🎞️",video:"📹",audio:"🎵",unknown:""})[c.type]||"").join("")),r}function At({className:t="truncated"}={}){const n=X(),a=Gn(({height:s})=>{if(n.current){const{scrollHeight:o}=n.current;let r=o>s;if(r){const{height:c,maxHeight:l}=getComputedStyle(n.current),p=parseInt(l||c,10);r=o>p}n.current.classList.toggle(t,r)}},300);return to({ref:n,box:"border-box",onResize:a}),n}const oi=/^((?!chrome|android).)*safari/i.test(navigator.userAgent),ii="ALT",en=t=>{const{alt:n,lang:a,index:s,...o}=t;return!n||!n.trim()?null:e("button",{type:"button",class:"alt-badge clickable",...o,onClick:r=>{r.stopPropagation(),r.preventDefault(),A.showMediaAlt={alt:n,lang:a}},title:"Media description",children:[ii,!!s&&e("sup",{children:s})]})},ri=140,ma=Ye(t=>t!=null&&t.length?t.length>ri||/[\n\r].*[\n\r]/.test(t.trim()):!1);function si({class:t="",media:n,to:a,lang:s,showOriginal:o,autoAnimate:r,showCaption:c,altIndex:l,onClick:p=()=>{}}){const{blurhash:g,description:d,meta:f,previewRemoteUrl:m,previewUrl:v,remoteUrl:w,url:h,type:b}=n,{original:y={},small:E,focus:T}=f||{},x=o?y==null?void 0:y.width:E==null?void 0:E.width,C=o?y==null?void 0:y.height:E==null?void 0:E.height,D=o?h:v||h,R=o?w:m||w,q=x>=C?"landscape":"portrait",J=g?no(g):null,P=X();let N;if(T){const Z=(T.x+1)/2*100,K=(1-T.y)/2*100;N=`${Z.toFixed(0)}% ${K.toFixed(0)}%`}const M=X(),ne=Jn(({x:Z,y:K,scale:ke})=>{const{current:me}=M;if(me){const he=ao({x:Z,y:K,scale:ke});ke===1?me.style.removeProperty("transform"):me.style.setProperty("transform",he),me.closest(".media-zoom").style.touchAction=ke<=1.01?"pan-x":""}},[]),[re,se]=W(!1),B={enabled:re,draggableUnZoomed:!1,inertiaFriction:.9,doubleTapZoomOutOnMaxScale:!0,containerProps:{className:"media-zoom",style:{overflow:"visible"}},onUpdate:ne},G=Ie(()=>a?Z=>e(pt,{to:a,...Z}):"div",[a]),Q=b==="unknown"&&/\.(mp4|m4a|m4p|m4b|m4r|m4v|mov|webm)$/i.test(R),be=b==="image"||b==="unknown"&&v&&!Q,j=X(),[_e,ae]=W(!1);tn(()=>{if(!be||!o||!j.current)return;const{offsetWidth:Z,offsetHeight:K}=j.current,ke=x<Z&&C<K;ke&&ae(ke)},[x,C]);const ce=window.innerHeight*(q==="portrait"?.45:.33),ge=q==="portrait"?0:160,Te={"--average-color":J&&`rgb(${J.join(",")})`},le=x&&C?{"--width":`${x}px`,"--height":`${C}px`,"--aspectWidth":`${x/C*Math.max(ge,ce)}px`,aspectRatio:`${x} / ${C}`,...Te}:{...Te},de=ma(d),ee=!!c&&!o&&!!d&&!de,Le=ee?Z=>{const{children:K,...ke}=Z;return e("figure",{...ke,children:[K,e("figcaption",{class:"media-caption",lang:s,dir:"auto",onClick:me=>{me.preventDefault(),me.stopPropagation(),A.showMediaAlt={alt:d,lang:s}},children:d})]})}:H;if(be)return B.containerProps.style.display="inherit",tn(()=>{oi&&o&&(async()=>{try{await fetch(D,{mode:"no-cors"}),M.current.src=D}catch{}})()},[D]),e(Le,{children:e(G,{ref:j,class:`media media-image ${t}`,onClick:p,"data-orientation":q,"data-has-alt":!ee,style:o?{backgroundImage:`url(${v})`,backgroundSize:_e?`${x}px ${C}px`:void 0,...Te}:le,children:o?e(wn,{...B,children:e("img",{ref:M,src:D,alt:d,width:x,height:C,"data-orientation":q,loading:"eager",decoding:"sync",onLoad:Z=>{Z.target.closest(".media-image").style.backgroundImage="",Z.target.closest(".media-zoom").style.display="",se(!0)},onError:Z=>{const{src:K}=Z.target;K===D&&(Z.target.src=R)}})}):e(H,{children:[e("img",{src:D,alt:ee?"":d,width:x,height:C,"data-orientation":q,loading:"lazy",style:{backgroundColor:J&&`rgb(${J.join(",")})`,backgroundPosition:N||"center","--anim-duration":`${Math.min(Math.max(Math.max(x,C)/100,5),120)}s`},onLoad:Z=>{Z.target.closest(".media-image").style.backgroundImage="",Z.target.dataset.loaded=!0},onError:Z=>{const{src:K}=Z.target;K===D&&(Z.target.src=R)}}),!ee&&e(en,{alt:d,lang:s,index:l})]})})});if(b==="gifv"||b==="video"||Q){const Z=y.duration<31,K=b==="gifv"&&Z,ke=y.duration<61,me=Mn(y.duration),he=!o&&!r&&K,xe=!o&&r&&K,Ee=y.duration>5,pe=`
    <video
      src="${h}"
      poster="${v}"
      width="${x}"
      height="${C}"
      data-orientation="${q}"
      preload="auto"
      autoplay
      muted="${K}"
      ${K?"":"controls"}
      playsinline
      loop="${ke}"
      ${K?'ondblclick="this.paused ? this.play() : this.pause()"':""}
      ${K&&Ee?"ontimeupdate=\"this.closest('.media-gif') && this.closest('.media-gif').style.setProperty('--progress', `${~~((this.currentTime / this.duration) * 100)}%`)\"":""}
    ></video>
  `;return e(Le,{children:e(G,{class:`media ${t} media-${K?"gif":"video"} ${xe?"media-contain":""}`,"data-orientation":q,"data-formatted-duration":o?void 0:me,"data-label":K&&!o&&!xe?"GIF":"","data-has-alt":!ee,style:!o&&le,onClick:ye=>{if(he)try{P.current.pause()}catch{}p(ye)},onMouseEnter:()=>{if(he)try{P.current.play()}catch{}},onMouseLeave:()=>{if(he)try{P.current.pause()}catch{}},onFocus:()=>{if(he)try{P.current.play()}catch{}},onBlur:()=>{if(he)try{P.current.pause()}catch{}},children:[o||xe?K&&o?e(wn,{...B,enabled:!0,children:e("div",{ref:M,dangerouslySetInnerHTML:{__html:pe}})}):e("div",{class:"video-container",dangerouslySetInnerHTML:{__html:pe}}):K?e("video",{ref:P,src:h,poster:v,width:x,height:C,"data-orientation":q,preload:"auto",playsinline:!0,loop:!0,muted:!0,onTimeUpdate:Ee?ye=>{const{target:Oe}=ye,Ae=Oe==null?void 0:Oe.closest(".media-gif");if(Ae){const ze=Oe.currentTime/Oe.duration*100;Ae.style.setProperty("--progress",`${ze}%`)}}:void 0}):e(H,{children:[e("img",{src:v,alt:ee?"":d,width:x,height:C,"data-orientation":q,loading:"lazy"}),e("div",{class:"media-play",children:e(L,{icon:"play",size:"xl"})})]}),!o&&!ee&&e(en,{alt:d,lang:s,index:l})]})})}else if(b==="audio"){const Z=Mn(y.duration);return e(Le,{children:e(G,{class:`media media-audio ${t}`,"data-formatted-duration":o?void 0:Z,"data-has-alt":!ee,onClick:p,style:!o&&le,children:[o?e("audio",{src:w||h,preload:"none",controls:!0,autoplay:!0}):v?e("img",{src:v,alt:ee?"":d,width:x,height:C,"data-orientation":q,loading:"lazy"}):null,!o&&e(H,{children:[e("div",{class:"media-play",children:e(L,{icon:"play",size:"xl"})}),!ee&&e(en,{alt:d,lang:s,index:l})]})]})})}}function Dn(t){return e(oo,{children:({ref:n,closeMenu:a})=>e(pt,{...t,ref:n,onClick:({detail:s})=>a(s===0?"Enter":void 0)})})}const ci=140,li=Wn({limit:1,interval:1e3});function ui(t,n){return n.v1.accounts.$select(t).fetch()}const di=Rt(ui),ct={public:"Public",unlisted:"Unlisted",private:"Followers only",direct:"Private mention"},mi=window.ontouchstart!==void 0&&/iPad|iPhone|iPod/.test(navigator.userAgent);function tt({statusID:t,status:n,instance:a,withinContext:s,size:o="m",skeleton:r,readOnly:c,contentTextWeight:l,enableTranslate:p,forceTranslate:g,previewMode:d,onMediaClick:f,quoted:m,onStatusLinkClick:v=()=>{},enableCommentHint:w}){var yn,_n,kn;if(r)return e("div",{class:"status skeleton",children:[e(Ze,{size:"xxl"}),e("div",{class:"container",children:[e("div",{class:"meta",children:"███ ████████"}),e("div",{class:"content-container",children:e("div",{class:"content",children:e("p",{children:"████ ████████"})})})]})]});const{masto:h,instance:b,authenticated:y}=Ve({instance:a}),{instance:E}=Ve(),T=b===E;let x=Me(t,b);const C=ht(A);if(n||(n=C.statuses[x]||C.statuses[t],x=Me(n==null?void 0:n.id,b)),!n)return null;const{account:{acct:D,avatar:R,avatarStatic:q,id:J,url:P,displayName:N,username:M,emojis:ne,bot:re,group:se},id:B,repliesCount:G,reblogged:Q,reblogsCount:be,favourited:j,favouritesCount:_e,bookmarked:ae,poll:ce,muted:ge,sensitive:Te,spoilerText:le,visibility:de,language:ee,editedAt:Le,filtered:Z,card:K,createdAt:ke,inReplyToId:me,inReplyToAccountId:he,content:xe,mentions:Ee,mediaAttachments:pe,reblog:ye,uri:Oe,url:Ae,emojis:ze,_deleted:k,_pinned:F}=n,S=Ie(()=>z.session.get("currentAccount"),[]),$=Ie(()=>S&&S===J,[J,S]),Y=io(ei),V=!$&&!c&&!d&&ua(Z,Y);if((V==null?void 0:V.action)==="hide")return null;const O=u=>{u.shiftKey};if(o!=="l"&&V)return e(_i,{status:n,filterInfo:V,instance:b,containerProps:{onMouseEnter:O}});const U=new Date(ke),oe=new Date(Le);let we=Ee==null?void 0:Ee.find(u=>u.id===he);!we&&he===B&&(we={url:P,username:M,displayName:N});const[De,$e]=W(we);if(!s&&!De&&he){const u=A.accounts[he];u?$e(u):di(he,h).then(I=>{$e(I),A.accounts[I.id]=I}).catch(I=>{})}const Ue=he===S||(Ee==null?void 0:Ee.find(u=>u.id===S)),nt=Ie(()=>!!(z.account.get("preferences")||{})["reading:expand:spoilers"],[]),Pe=d||nt||!!C.spoilers[B]||!1;if(ye)return se?e("div",{"data-state-post-id":x,class:"status-group",onMouseEnter:O,children:[e("div",{class:"status-pre-meta",children:[e(L,{icon:"group",size:"l",alt:"Group"})," ",e(st,{account:n.account,instance:b,showAvatar:!0})]}),e(tt,{status:t?null:ye,statusID:t?ye.id:null,instance:b,size:o,contentTextWeight:l,readOnly:c})]}):e("div",{"data-state-post-id":x,class:"status-reblog",onMouseEnter:O,children:[e("div",{class:"status-pre-meta",children:[e(L,{icon:"rocket",size:"l"})," ",e(st,{account:n.account,instance:b,showAvatar:!0})," ",e("span",{children:"boosted"})]}),e(tt,{status:t?null:ye,statusID:t?ye.id:null,instance:b,size:o,contentTextWeight:l,readOnly:c,enableCommentHint:!0})]});const ie=o==="l",[He,ga]=W(g),cn=ia(!0),va=C.settings.contentTranslationHideLanguages||[],{contentTranslation:Dt,contentTranslationAutoInline:ln}=C.settings;Dt||(p=!1);const un=Ie(()=>{if(!Dt||!ln||c||s&&!ie||d||le||Te||ce||K||pe!=null&&pe.length)return!1;const u=Rn(xe);return u>0&&u<=ci},[Dt,ln,c,s,ie,d,le,Te,ce,K,pe,xe]),[Pt,ft]=W(!1),[ba,Mt]=W(!1),ya=At(),_a=At(),ka=At(),dn="Read more →",Ot=X(null),at="Sorry, your current logged-in instance can't interact with this post from another instance.",mn=Jn(()=>Math.max(Math.round((le.length+Rn(xe))/140)||1,1),[le,xe]),hn=$t(U),pn=Le&&$t(oe);let ot=y&&de!=="direct"&&de!=="private";de==="private"&&$&&(ot=!0);const zt=u=>{var I;if(!T||!y)return alert(at);(u!=null&&u.shiftKey||(I=u==null?void 0:u.syntheticEvent)!=null&&I.shiftKey)&&ea({replyToStatus:n})||(A.showCompose={replyToStatus:n})},Nt=Ie(()=>pe.some(u=>{var I,te;return!((te=(I=u.description)==null?void 0:I.trim)!=null&&te.call(I))}),[pe]),Vi=async()=>{if(!T||!y)return alert(at),!1;try{if(!Q){let u="Boost this post?";if(Nt&&(u+=`

⚠️ Some media have no descriptions.`),!confirm(u))return!1}if(A.statuses[x]={...n,reblogged:!Q,reblogsCount:be+(Q?-1:1)},Q){const u=await h.v1.statuses.$select(B).unreblog();return Se(u,b),!0}else{const u=await h.v1.statuses.$select(B).reblog();return Se(u,b),!0}}catch{return A.statuses[x]=n,!1}},Bt=async()=>{if(!T||!y)return alert(at),!1;try{if(A.statuses[x]={...n,reblogged:!Q,reblogsCount:be+(Q?-1:1)},Q){const u=await h.v1.statuses.$select(B).unreblog();return Se(u,b),!0}else{const u=await h.v1.statuses.$select(B).reblog();return Se(u,b),!0}}catch{return A.statuses[x]=n,!1}},jt=async()=>{if(!T||!y)return alert(at);try{if(A.statuses[x]={...n,favourited:!j,favouritesCount:_e+(j?-1:1)},j){const u=await h.v1.statuses.$select(B).unfavourite();Se(u,b)}else{const u=await h.v1.statuses.$select(B).favourite();Se(u,b)}}catch{A.statuses[x]=n}},Vt=async()=>{if(!T||!y)return alert(at);try{if(A.statuses[x]={...n,bookmarked:!ae},ae){const u=await h.v1.statuses.$select(B).unbookmark();Se(u,b)}else{const u=await h.v1.statuses.$select(B).bookmark();Se(u,b)}}catch{A.statuses[x]=n}},fn=!!ee&&ee!==cn&&!Ft([ee],[cn])&&!va.find(u=>ee===u||Ft([ee],[u])),Ui=X(),gn=e(H,{children:[!ie&&e(H,{children:[e(ro,{children:[e("span",{class:"ib",children:[e(L,{icon:Qe[de],size:"s"})," ",e("span",{children:ct[de]})]})," ",e("span",{class:"ib",children:[G>0&&e("span",{children:[e(L,{icon:"comment2",alt:"Replies",size:"s"})," ",e("span",{children:Je(G)})]})," ",be>0&&e("span",{children:[e(L,{icon:"rocket",alt:"Boosts",size:"s"})," ",e("span",{children:Je(be)})]})," ",_e>0&&e("span",{children:[e(L,{icon:"heart",alt:"Likes",size:"s"})," ",e("span",{children:Je(_e)})]})]}),e("br",{}),hn]}),e(Dn,{to:b?`/${b}/s/${B}`:`/s/${B}`,onClick:u=>{v(u,n)},children:[e(L,{icon:"arrow-right"}),e("span",{children:["View post by @",M||D]})]})]}),!!Le&&e(Fe,{onClick:()=>{ft(B)},children:[e(L,{icon:"history"}),e("span",{children:["Show Edit History",e("br",{}),e("small",{class:"more-insignificant",children:["Edited: ",pn]})]})]}),(!ie||!!Le)&&e(Kt,{}),ie&&e(Fe,{onClick:()=>Mt(!0),children:[e(L,{icon:"react"}),e("span",{children:["Boosted/Liked by",e("span",{class:"more-insignificant",children:"…"})]})]}),!ie&&T&&e(H,{children:[e("div",{class:"menu-horizontal",children:[e(Gt,{subMenu:!0,confirmLabel:e(H,{children:[e(L,{icon:"rocket"}),e("span",{children:Q?"Unboost?":"Boost to everyone?"})]}),menuFooter:Nt&&!Q&&e("div",{class:"footer",children:[e(L,{icon:"alert"}),"Some media have no descriptions."]}),disabled:!ot,onClick:async()=>{try{const u=await Bt();!ie&&u&&Ce(Q?`Unboosted @${M||D}'s post`:`Boosted @${M||D}'s post`)}catch{}},children:[e(L,{icon:"rocket",style:{color:Q&&"var(--reblog-color)"}}),e("span",{children:Q?"Unboost":"Boost…"})]}),e(Fe,{onClick:()=>{try{jt(),ie||Ce(j?`Unliked @${M||D}'s post`:`Liked @${M||D}'s post`)}catch{}},children:[e(L,{icon:"heart",style:{color:j&&"var(--favourite-color)"}}),e("span",{children:j?"Unlike":"Like"})]})]}),e("div",{class:"menu-horizontal",children:[e(Fe,{onClick:zt,children:[e(L,{icon:"reply"}),e("span",{children:"Reply"})]}),e(Fe,{onClick:()=>{try{Vt(),ie||Ce(ae?`Unbookmarked @${M||D}'s post`:`Bookmarked @${M||D}'s post`)}catch{}},children:[e(L,{icon:"bookmark",style:{color:ae&&"var(--link-color)"}}),e("span",{children:ae?"Unbookmark":"Bookmark"})]})]})]}),p?e(Fe,{disabled:He,onClick:()=>{ga(!0)},children:[e(L,{icon:"translate"}),e("span",{children:"Translate"})]}):(!ee||fn)&&e(Dn,{to:`${b?`/${b}`:""}/s/${B}?translate=1`,children:[e(L,{icon:"translate"}),e("span",{children:"Translate"})]}),(!ie&&T||p)&&e(Kt,{}),e(Fe,{href:Ae,target:"_blank",children:[e(L,{icon:"external"}),e("small",{class:"menu-double-lines",children:yi(Ae)})]}),e("div",{class:"menu-horizontal",children:[e(Fe,{onClick:()=>{try{navigator.clipboard.writeText(Ae),Ce("Link copied")}catch{Ce("Unable to copy link")}},children:[e(L,{icon:"link"}),e("span",{children:"Copy"})]}),(navigator==null?void 0:navigator.share)&&((yn=navigator==null?void 0:navigator.canShare)==null?void 0:yn.call(navigator,{url:Ae}))&&e(Fe,{onClick:()=>{try{navigator.share({url:Ae})}catch{alert("Sharing doesn't seem to work.")}},children:[e(L,{icon:"share"}),e("span",{children:"Share…"})]})]}),($||Ue)&&e(Kt,{}),($||Ue)&&e(Fe,{onClick:async()=>{try{const u=await h.v1.statuses.$select(B)[ge?"unmute":"mute"]();Se(u,b),Ce(ge?"Conversation unmuted":"Conversation muted")}catch{Ce(ge?"Unable to unmute conversation":"Unable to mute conversation")}},children:ge?e(H,{children:[e(L,{icon:"unmute"}),e("span",{children:"Unmute conversation"})]}):e(H,{children:[e(L,{icon:"mute"}),e("span",{children:"Mute conversation"})]})}),$&&e("div",{class:"menu-horizontal",children:[e(Fe,{onClick:()=>{A.showCompose={editStatus:n}},children:[e(L,{icon:"pencil"}),e("span",{children:"Edit"})]}),ie&&e(Gt,{subMenu:!0,confirmLabel:e(H,{children:[e(L,{icon:"trash"}),e("span",{children:"Delete this post?"})]}),menuItemClassName:"danger",onClick:()=>{(async()=>{try{await h.v1.statuses.$select(B).remove();const u=Qn(B,b);u._deleted=!0,Ce("Deleted")}catch{Ce("Unable to delete")}})()},children:[e(L,{icon:"trash"}),e("span",{children:"Delete…"})]})]})]}),vn=X(),[bn,gt]=W(!1),[vt,Ut]=W({}),bt=!ie&&!d&&!k&&!m,wa=Zn(mi&&bt?u=>{var wt;if(u.pointerType==="mouse")return;const{clientX:I,clientY:te}=((wt=u.touches)==null?void 0:wt[0])||u,ve=u.target.closest("a");ve&&/^https?:\/\//.test(ve.getAttribute("href"))||(u.preventDefault(),Ut({anchorPoint:{x:I,y:te},direction:"right"}),gt(!0))}:null,{threshold:600,captureEvent:!0,detect:"touch",cancelOnMovement:2}),yt=!c&&!d,xa=Ge("r, shift+r",zt,{enabled:yt}),Ea=Ge("f, l",()=>{try{jt(),ie||Ce(j?`Unliked @${M||D}'s post`:`Liked @${M||D}'s post`)}catch{}},{enabled:yt}),Ta=Ge("d",()=>{try{Vt(),ie||Ce(ae?`Unbookmarked @${M||D}'s post`:`Bookmarked @${M||D}'s post`)}catch{}},{enabled:yt}),La=Ge("shift+b",()=>{(async()=>{try{const u=await Bt();!ie&&u&&Ce(Q?`Unboosted @${M||D}'s post`:`Boosted @${M||D}'s post`)}catch{}})()},{enabled:yt&&ot}),_t=pe.slice(0,ie?void 0:4),kt=pe.length>1&&_t.some(u=>!!u.description&&!ma(u.description)),Aa=Ie(()=>{if(!kt)return null;const u=[];return _t.forEach((I,te)=>{if(!I.description)return;const ve=u.findIndex(wt=>wt.media.description===I.description);ve===-1?u.push({media:I,indices:[te]}):u[ve].indices.push(te)}),u.map(({media:I,indices:te})=>e("div",{"data-caption-index":te.map(ve=>ve+1).join(" "),onClick:ve=>{ve.preventDefault(),ve.stopPropagation(),A.showMediaAlt={alt:I.description,lang:ee}},title:I.description,children:[e("sup",{children:te.map(ve=>ve+1).join(" ")})," ",I.description]},I.id))},[kt,_t,ee]),Ht=Ie(()=>{var u;return!!me&&he===((u=n.account)==null?void 0:u.id)||!!C.statusThreadNumber[x]},[me,he,(_n=n.account)==null?void 0:_n.id,C.statusThreadNumber[x]]),Ca=Ie(()=>w&&!Ht&&!s&&!me&&de==="public"&&G>0,[w,Ht,s,me,G,de]);return e("article",{"data-state-post-id":x,ref:u=>{var te;Ot.current=u;const I=((te=u==null?void 0:u.closest)==null?void 0:te.call(u,".timeline-item, .timeline-item-alt, .status-link, .status-focus"))||u;xa.current=I,Ea.current=I,Ta.current=I,La.current=I},tabindex:"-1",class:`status ${!s&&me&&De?"status-reply-to":""} visibility-${de} ${F?"status-pinned":""} ${{s:"small",m:"medium",l:"large"}[o]} ${k?"status-deleted":""} ${m?"status-card":""}`,onMouseEnter:O,onContextMenu:u=>{if(!bt||u.metaKey)return;const I=u.target.closest("a");I&&/^https?:\/\//.test(I.getAttribute("href"))||(u.preventDefault(),Ut({anchorPoint:{x:u.clientX,y:u.clientY},direction:"right"}),gt(!0))},...bt?wa():{},children:[bt&&e(so,{ref:vn,state:bn?"open":void 0,...vt,onClose:u=>{var I,te,ve;gt(!1),(u==null?void 0:u.reason)==="click"&&((ve=(te=(I=Ot.current)==null?void 0:I.closest("[tabindex]"))==null?void 0:te.focus)==null||ve.call(te))},portal:{target:document.body},containerProps:{style:{zIndex:1001},onClick:()=>{var u,I;(I=(u=vn.current)==null?void 0:u.closeMenu)==null||I.call(u)}},overflow:"auto",boundingBoxPadding:aa(),unmountOnClose:!0,children:gn}),o!=="l"&&e("div",{class:"status-badge",children:[Q&&e(L,{class:"reblog",icon:"rocket",size:"s"}),j&&e(L,{class:"favourite",icon:"heart",size:"s"}),ae&&e(L,{class:"bookmark",icon:"bookmark",size:"s"}),F&&e(L,{class:"pin",icon:"pin",size:"s"})]}),o!=="s"&&e("a",{href:P,tabindex:"-1",title:`@${D}`,onClick:u=>{u.preventDefault(),u.stopPropagation(),A.showAccount={account:n.account,instance:b}},children:e(Ze,{url:q||R,size:"xxl",squircle:re})}),e("div",{class:"container",children:[e("div",{class:"meta",children:[e("span",{class:"meta-name",children:e(st,{account:n.account,instance:b,showAvatar:o==="s",showAcct:ie})})," ",o!=="l"&&(k?e("span",{class:"status-deleted-tag",children:"Deleted"}):Ae&&!d&&!m?e(pt,{to:b?`/${b}/s/${B}`:`/s/${B}`,onClick:u=>{u.metaKey||u.ctrlKey||u.shiftKey||u.altKey||u.which===2||(u.preventDefault(),u.stopPropagation(),v==null||v(u,n),Ut({anchorRef:{current:u.currentTarget},align:"end",direction:"bottom",gap:4}),gt(!0))},class:`time ${bn&&(vt!=null&&vt.anchorRef)?"is-open":""}`,children:[Ca?e(L,{icon:"comment2",size:"s",alt:`${G} ${G===1?"reply":"replies"}`}):e(L,{icon:Qe[de],alt:ct[de],size:"s"})," ",e(mt,{datetime:U,format:"micro"})]}):e("span",{class:"time",children:[e(L,{icon:Qe[de],alt:ct[de],size:"s"})," ",e(mt,{datetime:U,format:"micro"})]}))]}),de==="direct"&&e(H,{children:[e("div",{class:"status-direct-badge",children:"Private mention"})," "]}),!s&&e(H,{children:Ht?e("div",{class:"status-thread-badge",children:[e(L,{icon:"thread",size:"s"}),"Thread",C.statusThreadNumber[x]?` ${C.statusThreadNumber[x]}/X`:""]}):!!me&&!!De&&(!!le||!Ee.find(u=>u.id===he))&&e("div",{class:"status-reply-badge",children:[e(L,{icon:"reply"})," ",e(st,{account:De,instance:b,short:!0})]})}),e("div",{class:`content-container ${le||Te?"has-spoiler":""} ${Pe?"show-spoiler":""}`,"data-content-text-weight":l?mn():null,style:(ie||l)&&{"--content-text-weight":mn()},children:[!!le&&e(H,{children:[e("div",{class:"content spoiler-content",lang:ee,dir:"auto",ref:ya,"data-read-more":dn,children:e("p",{children:e(dt,{text:le,emojis:ze})})}),e("button",{class:`light spoiler ${Pe?"spoiling":""}`,type:"button",disabled:nt,onClick:u=>{u.preventDefault(),u.stopPropagation(),Pe?delete A.spoilers[B]:A.spoilers[B]=!0},children:[e(L,{icon:Pe?"eye-open":"eye-close"})," ",nt?"Content warning":Pe?"Show less":"Show more"]})]}),e("div",{class:"content",ref:_a,"data-read-more":dn,children:[e("div",{lang:ee,dir:"auto",class:"inner-content",onClick:jo({mentions:Ee,instance:b,previewMode:d,statusURL:Ae}),dangerouslySetInnerHTML:{__html:an(xe,{emojis:ze,postEnhanceDOM:u=>{u.querySelectorAll('a.u-url[target="_blank"]').forEach(I=>{/http/i.test(I.innerText.trim())||I.removeAttribute("target")}),!d&&Array.from(u.querySelectorAll("a[href]:not(.u-url):not(.mention):not(.hashtag)")).filter(I=>{const te=I.href;return!(te===n.url||te===n.uri)&&da(te)}).forEach((I,te)=>{ha(E,I.href).then(ve=>{ve&&(I.removeAttribute("target"),x&&(Array.isArray(A.statusQuotes[x])||(A.statusQuotes[x]=[]),A.statusQuotes[x][te]||A.statusQuotes[x].splice(te,0,ve)))})})}})}}),e(ki,{id:B,instance:b,level:m})]}),!!ce&&e(Qo,{lang:ee,poll:ce,readOnly:c||!T||!y,onUpdate:u=>{A.statuses[x].poll=u},refresh:()=>h.v1.polls.$select(ce.id).fetch().then(u=>{A.statuses[x].poll=u}).catch(u=>{}),votePoll:u=>h.v1.polls.$select(ce.id).votes.create({choices:u}).then(I=>{A.statuses[x].poll=I}).catch(I=>{})}),((p||un)&&!!xe.trim()&&!!on(rn(xe,ze))&&fn||He)&&e(Jo,{forceTranslate:He||un,mini:!ie&&!s,sourceLanguage:ee,text:(le?`${le}

`:"")+on(xe)+((kn=ce==null?void 0:ce.options)!=null&&kn.length?`

Poll:
${ce.options.map(u=>`- ${u.title}${u.votesCount>=0?` (${u.votesCount})`:""}`).join(`
`)}`:"")}),!le&&Te&&!!pe.length&&e("button",{class:`plain spoiler ${Pe?"spoiling":""}`,type:"button",onClick:u=>{u.preventDefault(),u.stopPropagation(),Pe?delete A.spoilers[B]:A.spoilers[B]=!0},children:[e(L,{icon:Pe?"eye-open":"eye-close"})," Sensitive content"]}),!!pe.length&&e(hi,{lang:ee,enabled:kt,captionChildren:Aa,children:e("div",{ref:ka,class:`media-container media-eq${pe.length} ${pe.length>2?"media-gt2":""} ${pe.length>4?"media-gt4":""}`,children:_t.map((u,I)=>e(si,{media:u,autoAnimate:ie,showCaption:pe.length===1,lang:ee,altIndex:kt&&!!u.description&&I+1,to:`/${b}/s/${B}?${s?"media":"media-only"}=${I+1}`,onClick:f?te=>{f(te,I,u,n)}:void 0},u.id))})}),!!K&&(K==null?void 0:K.url)!==n.url&&(K==null?void 0:K.url)!==n.uri&&/^https/i.test(K==null?void 0:K.url)&&!Te&&!le&&!ce&&!pe.length&&!C.statusQuotes[x]&&e(pi,{card:K,instance:E})]}),ie&&e(H,{children:[e("div",{class:"extra-meta",children:k?e("span",{class:"status-deleted-tag",children:"Deleted"}):e(H,{children:[e(L,{icon:Qe[de],alt:ct[de]})," ",e("a",{href:Ae,target:"_blank",rel:"noopener noreferrer",children:e("time",{class:"created",datetime:U.toISOString(),children:hn})}),Le&&e(H,{children:[" ","• ",e(L,{icon:"pencil",alt:"Edited"})," ",e("time",{tabIndex:"0",class:"edited",datetime:oe.toISOString(),onClick:()=>{ft(B)},children:pn})]})]})}),e("div",{class:`actions ${k?"disabled":""}`,children:[e("div",{class:"action has-count",children:e(Et,{title:"Reply",alt:"Comments",class:"reply-button",icon:"comment",count:G,onClick:zt})}),e(Gt,{disabled:!ot,onClick:Bt,confirmLabel:e(H,{children:[e(L,{icon:"rocket"}),e("span",{children:Q?"Unboost?":"Boost to everyone?"})]}),menuFooter:Nt&&!Q&&e("div",{class:"footer",children:[e(L,{icon:"alert"}),"Some media have no descriptions."]}),children:e("div",{class:"action has-count",children:e(Et,{checked:Q,title:["Boost","Unboost"],alt:["Boost","Boosted"],class:"reblog-button",icon:"rocket",count:be,disabled:!ot})})}),e("div",{class:"action has-count",children:e(Et,{checked:j,title:["Like","Unlike"],alt:["Like","Liked"],class:"favourite-button",icon:"heart",count:_e,onClick:jt})}),e("div",{class:"action",children:e(Et,{checked:ae,title:["Bookmark","Unbookmark"],alt:["Bookmark","Bookmarked"],class:"bookmark-button",icon:"bookmark",onClick:Vt})}),e(oa,{portal:{target:document.querySelector(".status-deck")||document.body},align:"end",gap:4,overflow:"auto",viewScroll:"close",menuButton:e("div",{class:"action",children:e("button",{type:"button",title:"More",class:"plain more-button",children:e(L,{icon:"more",size:"l",alt:"More"})})}),children:gn})]})]})]}),!!Pt&&e(ut,{class:"light",onClick:u=>{u.target===u.currentTarget&&ft(!1)},children:e(fi,{statusID:Pt,instance:b,fetchStatusHistory:()=>h.v1.statuses.$select(Pt).history.list(),onClose:()=>{var u;ft(!1),(u=Ot.current)==null||u.focus()}})}),ba&&e(ut,{class:"light",onClick:u=>{u.target===u.currentTarget&&Mt(!1)},children:e(gi,{statusID:B,instance:b,onClose:()=>Mt(!1)})})]})}function hi(t){const{enabled:n,children:a,lang:s,captionChildren:o}=t;return!n||!o?a:e("figure",{class:"media-figure-multiple",children:[a,e("figcaption",{lang:s,dir:"auto",children:o})]})}function pi({card:t,instance:n}){var J;const a=ht(A),{blurhash:s,title:o,description:r,html:c,providerName:l,providerUrl:p,authorName:g,authorUrl:d,width:f,height:m,image:v,imageDescription:w,url:h,type:b,embedUrl:y,language:E,publishedAt:T}=t,x=o||l||g,D=f/m>=1.2?"large":"",[R,q]=W(null);if(ue(()=>{x&&v&&da(h)&&ha(n,h).then(P=>{if(!P)return;const{id:N,url:M}=P;q("#"+M)})},[x,v]),a.unfurledLinks[h])return null;if(x&&(v||b==="photo"&&s)){const P=new URL(h).hostname.replace(/^www\./,"").replace(/\/$/,"");let N;if(!v){const re=co(s,44,44),se=document.createElement("canvas");se.width=44,se.height=44;const B=se.getContext("2d"),G=B.createImageData(44,44);G.data.set(re),B.putImageData(G,0,0),N=se.toDataURL()}return e("a",{href:R||h,target:R?null:"_blank",rel:"nofollow noopener noreferrer",class:`card link ${N?"":D}`,lang:E,dir:"auto",children:[e("div",{class:"card-image",children:e("img",{src:v||N,width:f,height:m,loading:"lazy",alt:w||"",onError:M=>{try{M.target.style.display="none"}catch{}}})}),e("div",{class:"meta-container",children:[e("p",{class:"meta domain",dir:"auto",children:P}),e("p",{class:"title",dir:"auto",children:o}),e("p",{class:"meta",dir:"auto",children:r||!!T&&e(mt,{datetime:T,format:"micro"})})]})]})}else{if(b==="photo")return e("a",{href:h,target:"_blank",rel:"nofollow noopener noreferrer",class:"card photo",children:e("img",{src:y,width:f,height:m,alt:o||r,loading:"lazy",style:{height:"auto",aspectRatio:`${f}/${m}`}})});if(b==="video"){if(/youtube/i.test(l)){const P=(J=h.match(/watch\?v=([^&]+)/))==null?void 0:J[1];if(P)return e("lite-youtube",{videoid:P,nocookie:!0})}return e("div",{class:"card video",style:{aspectRatio:`${f}/${m}`},dangerouslySetInnerHTML:{__html:c}})}else if(x&&!v){const P=new URL(h).hostname.replace(/^www\./,"");return e("a",{href:R||h,target:R?null:"_blank",rel:"nofollow noopener noreferrer",class:"card link no-image",lang:E,children:e("div",{class:"meta-container",children:[e("p",{class:"meta domain",children:[e(L,{icon:"link",size:"s"})," ",e("span",{children:P})]}),e("p",{class:"title",children:o}),e("p",{class:"meta",children:r||l||g})]})})}}}function fi({statusID:t,instance:n,fetchStatusHistory:a=()=>{},onClose:s}){const[o,r]=W("default"),[c,l]=W([]);return ue(()=>{r("loading"),(async()=>{try{const p=await a();l(p),r("default")}catch{r("error")}})()},[]),e("div",{id:"edit-history",class:"sheet",children:[!!s&&e("button",{type:"button",class:"sheet-close",onClick:s,children:e(L,{icon:"x"})}),e("header",{children:[e("h2",{children:"Edit History"}),o==="error"&&e("p",{children:"Failed to load history"}),o==="loading"&&e("p",{children:[e(et,{abrupt:!0})," Loading…"]})]}),e("main",{tabIndex:"-1",children:c.length>0&&e("ol",{children:c.map(p=>{const{createdAt:g}=p,d=new Date(g);return e("li",{class:"history-item",children:[e("h3",{children:e("time",{children:$t(d,{formatOpts:{weekday:"short",second:"numeric"}})})}),e(tt,{status:p,instance:n,size:"s",withinContext:!0,readOnly:!0,previewMode:!0})]},g)})})})]})}const Pn=80;function gi({statusID:t,instance:n,onClose:a}){const{masto:s}=Ve({instance:n}),[o,r]=W("default"),[c,l]=W([]),[p,g]=W(!1),d=X(),f=X();async function m(v){g(!1),r("loading"),(async()=>{var w,h,b,y;try{v&&(d.current=s.v1.statuses.$select(t).rebloggedBy.list({limit:Pn}),f.current=s.v1.statuses.$select(t).favouritedBy.list({limit:Pn}));const[{value:E},{value:T}]=await Promise.allSettled([d.current.next(),f.current.next()]);if((w=E.value)!=null&&w.length||(h=T.value)!=null&&h.length){if((b=E.value)!=null&&b.length)for(const x of E.value){const C=c.find(D=>D.id===x.id);C?C._types.push("reblog"):c.push({...x,_types:["reblog"]})}if((y=T.value)!=null&&y.length)for(const x of T.value){const C=c.find(D=>D.id===x.id);C?C._types.push("favourite"):c.push({...x,_types:["favourite"]})}l(c),g(!E.done||!T.done)}else g(!1);r("default")}catch{r("error")}})()}return ue(()=>{m(!0)},[]),e("div",{id:"reactions-container",class:"sheet",children:[!!a&&e("button",{type:"button",class:"sheet-close",onClick:a,children:e(L,{icon:"x"})}),e("header",{children:e("h2",{children:"Boosted/Liked by…"})}),e("main",{children:c.length>0?e(H,{children:[e("ul",{class:"reactions-list",children:c.map(v=>{const{_types:w}=v;return e("li",{children:[e("div",{class:"reactions-block",children:w.map(h=>e(L,{icon:{reblog:"rocket",favourite:"heart"}[h],class:`${h}-icon`}))}),e(ra,{account:v,instance:n})]},v.id+w)})}),o==="default"?p?e(lo,{onChange:v=>{v&&m()},children:e("button",{type:"button",class:"plain block",onClick:()=>m(),children:"Show more…"})}):e("p",{class:"ui-state insignificant",children:"The end."}):o==="loading"&&e("p",{class:"ui-state",children:e(et,{abrupt:!0})})]}):o==="loading"?e("p",{class:"ui-state",children:e(et,{abrupt:!0})}):o==="error"?e("p",{class:"ui-state",children:"Unable to load accounts"}):e("p",{class:"ui-state insignificant",children:"No one yet."})})]})}function Et({checked:t,count:n,class:a,title:s,alt:o,icon:r,onClick:c,...l}){typeof s=="string"&&(s=[s,s]),typeof o=="string"&&(o=[o,o]);const[p,g]=W(s[0]||""),[d,f]=W(o[0]||"");return ue(()=>{t?(g(s[1]||""),f(o[1]||"")):(g(s[0]||""),f(o[0]||""))},[t,s,o]),e("button",{type:"button",title:p,class:`plain ${a} ${t?"checked":""}`,onClick:m=>{c&&(m.preventDefault(),m.stopPropagation(),c(m))},...l,children:[e(L,{icon:r,size:"l",alt:d}),!!n&&e(H,{children:[" ",e("small",{title:n,children:Je(n)})]})]})}function Mn(t){if(!t)return;let n=Math.floor(t/3600),a=Math.floor(t%3600/60),s=Math.round(t%60);return n===0?`${a}:${s.toString().padStart(2,"0")}`:`${n}:${a.toString().padStart(2,"0")}:${s.toString().padStart(2,"0")}`}const vi=/(twitter|github)\.com/i,On={};function bi(t,n){var h;const a=uo(A);if(vi.test(n)||On[n])return;if(new RegExp(t+"/").test((h=a.unfurledLinks[n])==null?void 0:h.url))return Promise.resolve(a.unfurledLinks[n]);let o,r=n;/\/\/elk\.[^\/]+\/[^\/]+\.[^\/]+/i.test(r)&&(r=r.replace(/elk\.[^\/]+\//i,"")),/\/\/trunks\.[^\/]+\/status\/[^\/]+\.[^\/]+/i.test(r)&&(r=r.replace(/trunks\.[^\/]+\/status\//i,"")),/\/#\/[^\/]+\.[^\/]+\/s\/.+/i.test(r)&&(r=`https://${r.split("/#/")[1].replace(/\/s\//i,"/@fakeUsername/")}`);const c=new URL(r),l=c.hostname,p=c.pathname,d=/\/@([^@\/]+)@?([^\/]+)?\/(\d+)$/i.exec(p);if(d){const b=d[3],{masto:y}=Ve({instance:l});o=y.v1.statuses.$select(b).fetch().then(E=>{if(E!=null&&E.id)return{status:E,instance:l};throw new Error("No results")})}const{masto:f}=Ve({instance:t}),m=f.v2.search.fetch({q:r,type:"statuses",resolve:!0,limit:1}).then(b=>{if(b.statuses.length>0)return{status:b.statuses[0],instance:t};throw new Error("No results")});function v(b){const{status:y,instance:E}=b,{id:T}=y,x=`/${E}/s/${T}`,C={id:T,instance:E,url:x};return A.unfurledLinks[n]=C,Se(y,E,{skipThreading:!0}),C}function w(b){On[n]=!0}return o?Promise.any([o,m]).then(v).catch(w):m.then(v).catch(w)}function yi(t){if(!t)return;const n=new URL(t),{host:a,pathname:s}=n,o=s.replace(/\/$/,""),[r,c,l]=o.match(/\/(@[^\/]+)\/(.*)/)||[];return e(H,{children:[a,c?e(H,{children:["/",c,e("wbr",{}),e("span",{class:"more-insignificant",children:["/",l]})]}):e("span",{class:"more-insignificant",children:o})]})}const ha=li(bi);function _i({status:t,filterInfo:n,instance:a,containerProps:s={}}){const{id:o,account:{avatar:r,avatarStatic:c,bot:l,group:p},createdAt:g,visibility:d,reblog:f}=t,m=!!f,v=(n==null?void 0:n.titlesStr)||"",w=new Date(g),h=ai(t.reblog||t),[b,y]=W(!1),E=Zn(()=>{y(!0)},{threshold:600,captureEvent:!0,detect:"touch",cancelOnMovement:2}),T=At(),x=Me(t.id,a)+" "+(Me(f==null?void 0:f.id,a)||""),C=(f==null?void 0:f.id)||o,D=a?`/${a}/s/${C}`:`/s/${C}`;return e("div",{class:m?p?"status-group":"status-reblog":"",...s,title:h,onContextMenu:R=>{R.preventDefault(),y(!0)},...E(),children:[e("article",{"data-state-post-id":x,class:"status filtered",tabindex:"-1",children:[e("b",{class:"status-filtered-badge clickable badge-meta",title:v,onClick:R=>{R.preventDefault(),y(!0)},children:[e("span",{children:"Filtered"}),e("span",{children:v})]})," ",e(Ze,{url:c||r,squircle:l}),e("span",{class:"status-filtered-info",children:[e("span",{class:"status-filtered-info-1",children:[e(st,{account:t.account,instance:a})," ",e(L,{icon:Qe[d],alt:ct[d],size:"s"})," ",m?"boosted":e(mt,{datetime:w,format:"micro"})]}),e("span",{class:"status-filtered-info-2",children:[m&&e(H,{children:[e(Ze,{url:f.account.avatarStatic||f.account.avatar,squircle:l})," "]}),h]})]})]}),!!b&&e(ut,{class:"light",onClick:R=>{R.target===R.currentTarget&&y(!1)},children:e("div",{id:"filtered-status-peek",class:"sheet",children:[e("button",{type:"button",class:"sheet-close",onClick:()=>y(!1),children:e(L,{icon:"x"})}),e("header",{children:[e("b",{class:"status-filtered-badge",children:"Filtered"})," ",v]}),e("main",{tabIndex:"-1",children:e(pt,{ref:T,class:"status-link",to:D,onClick:()=>{y(!1)},"data-read-more":"Read more →",children:e(tt,{status:t,instance:a,size:"s",readOnly:!0})})})]})})]})}const ki=St(({id:t,instance:n,level:a=0})=>{if(!t||!n)return;const s=ht(A),o=Me(t,n),r=s.statusQuotes[o],c=r==null?void 0:r.filter((l,p,g)=>g.findIndex(d=>d.url===l.url)===p);if(c!=null&&c.length&&!(a>2))return c.map(l=>e(pt,{to:`${l.instance?`/${l.instance}`:""}/s/${l.id}`,class:"status-card-link","data-read-more":"Read more →",children:e(tt,{statusID:l.id,instance:l.instance,size:"s",quoted:a+1,enableCommentHint:!0})},l.instance+l.id))}),zn=St(tt),wi=sn.reduce((t,n)=>{const[a,s,o]=n;return t[a]={common:s,native:o},t},{}),pa={"5 minutes":5*60,"30 minutes":30*60,"1 hour":60*60,"6 hours":6*60*60,"12 hours":12*60*60,"1 day":24*60*60,"3 days":3*24*60*60,"7 days":7*24*60*60},xi=Object.values(pa),Nn=24*60*60,Bn=t=>{if(!t)return Nn;const n=(new Date(t).getTime()-Date.now())/1e3;return xi.find(a=>a>=n)||Nn},je=document.createElement("ul");je.role="listbox";je.className="text-expander-menu";const Ei=16,Ti=new IntersectionObserver(t=>{t.forEach(n=>{if(n.isIntersecting){const{left:a,width:s}=n.boundingClientRect,{innerWidth:o}=window;a+s>o&&(je.style.left=o-s-Ei+"px")}})});Ti.observe(je);const We=Ft([new Intl.DateTimeFormat().resolvedOptions().locale,...navigator.languages],sn.map(t=>t[0]),"en"),fa=new RegExp($n.source,$n.flags),Li=/(^|[^\/\w])@(([a-z0-9_]+)@[a-z0-9\.\-]+[a-z0-9]+)/gi,Ai="$2xxxxxxxxxxxxxxxxxxxxxxx";function Ci(t){return t.replace(fa,Ai).replace(Li,"$1@$3")}const Fi=/[a-z0-9_]+([a-z0-9_.-]+[a-z0-9_]+)?/i,$i=new RegExp(`(^|[^=\\/\\w])(@${Fi.source}(?:@[\\w.-]+[\\w]+)?)`,"ig"),Si=new RegExp("(^|[^=\\/\\w])(#[a-z0-9_]+([a-z0-9_.-]+[a-z0-9_]+)?)(?![\\/\\w])","ig"),Ii="[a-zA-Z0-9_]{2,}",Ri=new RegExp(`([^A-Za-z0-9_:\\n]|^)(:${Ii}:)(?=[^A-Za-z0-9_:]|$)`,"g");function Di(t,{maxCharacters:n=1/0}){let a=t;const{composerCharacterCount:s}=A;let o="";return s>n?(o='<mark class="compose-highlight-exceeded">'+xn(a,n)+"</mark>",a=xn(a,0,n),a+o):a.replace(fa,'$2<mark class="compose-highlight-url">$3</mark>').replace($i,'$1<mark class="compose-highlight-mention">$2</mark>').replace(Si,'$1<mark class="compose-highlight-hashtag">$2</mark>').replace(Ri,'$1<mark class="compose-highlight-emoji-shortcode">$2</mark>')}function Yi({onClose:t,replyToStatus:n,editStatus:a,draftStatus:s,standalone:o,hasOpener:r}){var ze;const{masto:c,instance:l}=Ve(),[p,g]=W("default"),d=X((s==null?void 0:s.uid)||mo()),f=It(),m=f.info,v=bo(),{statuses:{maxCharacters:w,maxMediaAttachments:h,charactersReservedPerUrl:b}={},mediaAttachments:{supportedMimeTypes:y=[],imageSizeLimit:E,imageMatrixLimit:T,videoSizeLimit:x,videoMatrixLimit:C,videoFrameRateLimit:D}={},polls:{maxOptions:R,maxCharactersPerOption:q,maxExpiration:J,minExpiration:P}={}}=v||{},N=X(),M=X(),[ne,re]=W("public"),[se,B]=W(!1),[G,Q]=W(z.session.get("currentLanguage")||We),be=X(G),[j,_e]=W([]),[ae,ce]=W(null),ge=z.account.get("preferences")||{},Te=()=>{N.current&&N.current.dispatchEvent(new Event("input"))},le=()=>{setTimeout(()=>{var k;(k=N.current)==null||k.focus()},300)};ue(()=>{if(n){const{spoilerText:k,visibility:F,language:S,sensitive:$}=n;k&&M.current&&(M.current.value=k);const V=[...new Set([n.account.acct,...n.mentions.map(O=>O.acct)])].filter(O=>O!==m.acct);V.length>0&&(N.current.value=`${V.map(O=>`@${O}`).join(" ")} `,Te()),le(),re(F==="public"&&ge["posting:default:visibility"]?ge["posting:default:visibility"]:F),Q(S||ge.postingDefaultLanguage||We),B($&&!!k)}else if(a){const{visibility:k,language:F,sensitive:S,poll:$,mediaAttachments:Y}=a,V=!!($!=null&&$.options)&&{...$,options:$.options.map(O=>(O==null?void 0:O.title)||O),expiresIn:($==null?void 0:$.expiresIn)||Bn($.expiresAt)};g("loading"),(async()=>{try{const O=await c.v1.statuses.$select(a.id).source.fetch(),{text:U,spoilerText:oe}=O;N.current.value=U,N.current.dataset.source=U,Te(),le(),M.current.value=oe,re(k),Q(F||presf.postingDefaultLanguage||We),B(S),ce(V),_e(Y),g("default")}catch(O){alert((O==null?void 0:O.reason)||O),g("error")}})()}else le(),ge["posting:default:visibility"]&&re(ge["posting:default:visibility"]),ge["posting:default:language"]&&Q(ge["posting:default:language"]),ge["posting:default:sensitive"]&&B(ge["posting:default:sensitive"]);if(s){const{status:k,spoilerText:F,visibility:S,language:$,sensitive:Y,poll:V,mediaAttachments:O}=s,U=!!(V!=null&&V.options)&&{...V,options:V.options.map(oe=>(oe==null?void 0:oe.title)||oe),expiresIn:(V==null?void 0:V.expiresIn)||Bn(V.expiresAt)};N.current.value=k,Te(),le(),F&&(M.current.value=F),S&&re(S),Q($||ge.postingDefaultLanguage||We),Y!==null&&B(Y),U&&ce(U),O&&_e(O)}},[s,a,n]);const de=X(),ee="You have unsaved changes. Discard this post?",Le=()=>{const{value:k,dataset:F}=N.current;if(p==="loading")return!1;const S=j.length>0;if(!k&&!S||j.length>0&&j.every(U=>U.id))return!0;const Y=(n==null?void 0:n.account.id)===m.id,V=n&&k.trim()===`@${n.account.acct}`;return!!(!Y&&V||k===(F==null?void 0:F.source))},Z=()=>Le()?!0:confirm(ee);ue(()=>{const k=F=>{Le()||(F.preventDefault(),F.returnValue=ee)};return window.addEventListener("beforeunload",k,{capture:!0}),()=>window.removeEventListener("beforeunload",k,{capture:!0})},[]);const K=()=>{const{value:k}=N.current,{value:F}=M.current;return En(Ci(k))+En(F)},ke=()=>{const k=K();A.composerCharacterCount=k};ue(ke,[]);const me=X(!1);Ge("esc",()=>{me.current=!0},{enableOnFormTags:!0}),Ge("esc",()=>{!o&&me.current&&Z()&&t(),me.current=!1},{enableOnFormTags:!0,keyup:!0,ignoreEventWhen:k=>{const F=document.querySelectorAll("#modal-container > *"),S=!!F,$=F.length===1&&F[0].querySelector("#compose-container");return S&&!$}});const he=X({}),xe=()=>`${Tt()}#${d.current}`,Ee=()=>{if(a)return;const k=xe(),F={key:k,replyTo:n?{id:n.id,account:{id:n.account.id,username:n.account.username,acct:n.account.acct}}:null,draftStatus:{uid:d.current,status:N.current.value,spoilerText:M.current.value,visibility:ne,language:G,sensitive:se,poll:ae,mediaAttachments:j}};!ho(F,he.current)&&!Le()&&(Sn.drafts.set(k,{...F,state:"unsaved",updatedAt:Date.now()}).then(()=>{}).catch(S=>{}),he.current=structuredClone(F))};ko(Ee,5e3),ue(()=>(Ee(),()=>{Sn.drafts.del(xe())}),[]),ue(()=>{const k=S=>{const{items:$}=S.clipboardData||S.dataTransfer,Y=[];for(let V=0;V<$.length;V++){const O=$[V];if(O.kind==="file"){const U=O.getAsFile();U&&y.includes(U.type)&&Y.push(U)}}if(Y.length>0&&j.length>=h){alert(`You can only attach up to ${h} files.`);return}if(Y.length>0){S.preventDefault(),S.stopPropagation();const V=h-j.length,O=Y.slice(0,V);if(O.length<=0){alert(`You can only attach up to ${h} files.`);return}const U=O.map(oe=>({file:oe,type:oe.type,size:oe.size,url:URL.createObjectURL(oe),id:null,description:null}));_e([...j,...U])}};window.addEventListener("paste",k);const F=S=>{S.dataTransfer.items.length>0&&(S.preventDefault(),S.stopPropagation())};return window.addEventListener("dragover",F),window.addEventListener("drop",k),()=>{window.removeEventListener("paste",k),window.removeEventListener("dragover",F),window.removeEventListener("drop",k)}},[j]);const[pe,ye]=W(!1),[Oe,Ae]=Ie(()=>{const k=[],F=[],{contentTranslationHideLanguages:S=[]}=A.settings;return sn.forEach($=>{const[Y]=$;Y===G||Y===be.current||Y===We||S.includes(Y)?k.push($):F.push($)}),k.sort(([$,Y],[V,O])=>$===G?-1:V===G?1:Y.localeCompare(O)),F.sort(([$,Y],[V,O])=>Y.localeCompare(O)),[k,F]},[G]);return e("div",{id:"compose-container-outer",children:[e("div",{id:"compose-container",class:o?"standalone":"",children:[e("div",{class:"compose-top",children:[(m==null?void 0:m.avatarStatic)&&e(ra,{account:m,accountInstance:f.instanceURL,hideDisplayName:!0,useAvatarStatic:!0}),o?r&&e("button",{type:"button",class:"light pop-button",disabled:p==="loading",onClick:()=>{if(!window.opener){alert("Looks like you closed the parent window.");return}window.opener.__STATES__.showCompose&&!confirm("Looks like you already have a compose field open in the parent window. Popping in this window will discard the changes you made in the parent window. Continue?")||t({fn:()=>{const k={editStatus:a,replyToStatus:n,draftStatus:{uid:d.current,status:N.current.value,spoilerText:M.current.value,visibility:ne,language:G,sensitive:se,poll:ae,mediaAttachments:j}};window.opener.__COMPOSE__=k,window.opener.__STATES__.showCompose=!0}})},children:e(L,{icon:"popin",alt:"Pop in"})}):e("span",{children:[e("button",{type:"button",class:"light pop-button",disabled:p==="loading",onClick:()=>{ea({editStatus:a,replyToStatus:n,draftStatus:{uid:d.current,status:N.current.value,spoilerText:M.current.value,visibility:ne,language:G,sensitive:se,poll:ae,mediaAttachments:j}})&&t()},children:e(L,{icon:"popout",alt:"Pop out"})})," ",e("button",{type:"button",class:"light close-button",disabled:p==="loading",onClick:()=>{Z()&&t()},children:e(L,{icon:"x"})})]})]}),!!n&&e("div",{class:"status-preview",children:[e(zn,{status:n,size:"s",previewMode:!0}),e("div",{class:"status-preview-legend reply-to",children:["Replying to @",n.account.acct||n.account.username,"’s post"]})]}),!!a&&e("div",{class:"status-preview",children:[e(zn,{status:a,size:"s",previewMode:!0}),e("div",{class:"status-preview-legend",children:"Editing source post"})]}),e("form",{ref:de,class:`form-visibility-${ne}`,style:{pointerEvents:p==="loading"?"none":"auto",opacity:p==="loading"?.5:1},onKeyDown:k=>{k.key==="Enter"&&(k.ctrlKey||k.metaKey)&&de.current.dispatchEvent(new Event("submit",{cancelable:!0}))},onSubmit:k=>{k.preventDefault();const F=new FormData(k.target),S=Object.fromEntries(F.entries());let{status:$,visibility:Y,sensitive:V,spoilerText:O}=S;if(V=V==="on",ae){if(ae.options.length<2){alert("Poll must have at least 2 options");return}if(ae.options.some(U=>U==="")){alert("Some poll choices are empty");return}}j.length>0&&j.some(oe=>{var we,De;return!((De=(we=oe.description)==null?void 0:we.trim)!=null&&De.call(we))})&&!confirm("Some media have no descriptions. Continue?")||(O=V&&O||void 0,$=$===""?void 0:$,g("loading"),(async()=>{try{if(j.length>0){const we=j.map($e=>{const{file:Ue,description:nt,id:Pe}=$e;if(Pe)return $e;{const ie=Vn({file:Ue,description:nt});return c.v2.media.create(ie).then(He=>(He.id&&($e.id=He.id),He))}}),De=await Promise.allSettled(we);if(De.some($e=>{var Ue;return $e.status==="rejected"||!((Ue=$e.value)!=null&&Ue.id)})){g("error"),De.forEach($e=>{$e.status==="rejected"&&alert($e.reason||`Attachment #${i} failed`)});return}}let U={status:$,spoiler_text:O,language:G,sensitive:V,poll:ae,media_ids:j.map(we=>we.id)};a&&sa("@mastodon/edit-media-attributes")?U.media_attributes=j.map(we=>({id:we.id,description:we.description})):a||(U.visibility=Y,U.in_reply_to_id=(n==null?void 0:n.id)||void 0),U=Vn(U);let oe;if(a)oe=await c.v1.statuses.$select(a.id).update(U),Se(oe,l,{skipThreading:!0});else try{oe=await c.v1.statuses.create(U,{idempotencyKey:d.current})}catch{oe=await c.v1.statuses.create(U)}g("default"),t({type:a?"edit":n?"reply":"post",newStatus:oe,instance:l})}catch(U){alert((U==null?void 0:U.reason)||U),g("error")}})())},children:[e("div",{class:"toolbar stretch",children:[e("input",{ref:M,type:"text",name:"spoilerText",placeholder:"Content warning",disabled:p==="loading",class:"spoiler-text-field",lang:G,spellCheck:"true",dir:"auto",style:{opacity:se?1:0,pointerEvents:se?"auto":"none"},onInput:()=>{ke()}}),e("label",{class:`toolbar-button ${se?"highlight":""}`,title:"Content warning or sensitive media",children:[e("input",{name:"sensitive",type:"checkbox",checked:se,disabled:p==="loading",onChange:k=>{var S,$;const F=k.target.checked;B(F),F?(S=M.current)==null||S.focus():($=N.current)==null||$.focus()}}),e(L,{icon:`eye-${se?"close":"open"}`})]})," ",e("label",{class:`toolbar-button ${ne!=="public"&&!se?"show-field":""} ${ne!=="public"?"highlight":""}`,title:`Visibility: ${ne}`,children:[e(L,{icon:Qe[ne],alt:ne}),e("select",{name:"visibility",value:ne,onChange:k=>{re(k.target.value)},disabled:p==="loading"||!!a,children:[e("option",{value:"public",children:["Public ",e(L,{icon:"earth"})]}),e("option",{value:"unlisted",children:"Unlisted"}),e("option",{value:"private",children:"Followers only"}),e("option",{value:"direct",children:"Private mention"})]})]})," "]}),e(Pi,{ref:N,placeholder:n?"Post your reply":a?"Edit your post":"What are you doing?",required:(j==null?void 0:j.length)===0,disabled:p==="loading",lang:G,onInput:()=>{ke()},maxCharacters:w,performSearch:k=>{const{type:F,q:S,limit:$}=k;return F==="accounts"?c.v1.accounts.search.list({q:S,limit:$,resolve:!1}):c.v2.search.fetch(k)}}),(j==null?void 0:j.length)>0&&e("div",{class:"media-attachments",children:[j.map((k,F)=>{const{id:S,file:$}=k,Y=($==null?void 0:$.size)+($==null?void 0:$.type)+($==null?void 0:$.name);return e(Oi,{attachment:k,disabled:p==="loading",lang:G,onDescriptionChange:V=>{_e(O=>{const U=[...O];return U[F].description=V,U})},onRemove:()=>{_e(V=>V.filter((O,U)=>U!==F))}},S||Y||F)}),e("label",{class:"media-sensitive",children:[e("input",{name:"sensitive",type:"checkbox",checked:se,disabled:p==="loading",onChange:k=>{const F=k.target.checked;B(F)}})," ",e("span",{children:"Mark media as sensitive"})," ",e(L,{icon:`eye-${se?"close":"open"}`})]})]}),!!ae&&e(zi,{lang:G,maxOptions:R,maxExpiration:J,minExpiration:P,maxCharactersPerOption:q,poll:ae,disabled:p==="loading",onInput:k=>{if(k){const F={...k};ce(F)}else ce(null)}}),e("div",{class:"toolbar wrap",style:{justifyContent:"flex-end"},children:[e("span",{children:[e("label",{class:"toolbar-button",children:[e("input",{type:"file",accept:y.join(","),multiple:j.length<h-1,disabled:p==="loading"||j.length>=h||!!ae,onChange:k=>{const F=k.target.files;if(!F)return;const S=Array.from(F).map($=>({file:$,type:$.type,size:$.size,url:URL.createObjectURL($),id:null,description:null}));j.length+S.length>h?alert(`You can only attach up to ${h} files.`):_e($=>$.concat(S)),k.target.value=""}}),e(L,{icon:"attachment"})]})," ",e("button",{type:"button",class:"toolbar-button",disabled:p==="loading"||!!ae||!!j.length,onClick:()=>{ce({options:["",""],expiresIn:24*60*60,multiple:!1})},children:e(L,{icon:"poll",alt:"Add poll"})})," ",e("button",{type:"button",class:"toolbar-button",disabled:p==="loading",onClick:()=>{ye(!0)},children:e(L,{icon:"emoji2"})})]}),e("div",{class:"spacer"}),p==="loading"?e(et,{abrupt:!0}):e(Mi,{maxCharacters:w,hidden:p==="loading"}),e("label",{class:`toolbar-button ${G!==be.current?"highlight":""}`,children:[e("span",{class:"icon-text",children:(ze=wi[G])==null?void 0:ze.native}),e("select",{name:"language",value:G,onChange:k=>{const{value:F}=k.target;Q(F||We),z.session.set("currentLanguage",F||We)},disabled:p==="loading",children:[Oe.map(([k,F,S])=>e("option",{value:k,children:[F," (",S,")"]},k)),e("hr",{}),Ae.map(([k,F,S])=>e("option",{value:k,children:[F," (",S,")"]},k))]})]})," ",e("button",{type:"submit",class:"large",disabled:p==="loading",children:n?"Reply":a?"Update":"Post"})]})]})]}),pe&&e(ut,{class:"light",onClick:k=>{k.target===k.currentTarget&&ye(!1)},children:e(Bi,{masto:c,instance:l,onClose:()=>{ye(!1)},onSelect:k=>{const F=` ${k} `,S=N.current;if(!S)return;const{selectionStart:$,selectionEnd:Y}=S,V=S.value,O=V.slice(0,$)+F+V.slice(Y);S.value=O,S.selectionStart=S.selectionEnd=Y+F.length,S.focus(),S.dispatchEvent(new Event("input"))}})})]})}function jn(t){if(!t)return;const{value:n,offsetHeight:a,scrollHeight:s,clientHeight:o}=t;if(a<window.innerHeight){const r=a-o,c=n?s+r+"px":null;t.style.height=c}}const Pi=qn((t,n)=>{var w;const{masto:a}=Ve(),[s,o]=W(((w=n.current)==null?void 0:w.value)||""),{maxCharacters:r,performSearch:c=()=>{},...l}=t,p=ht(A),g=X();ue(()=>{(async()=>{try{const h=await a.v1.customEmojis.list();g.current=h}catch{}})()},[]);const d=X(),f=X("");ue(()=>{let h,b,y;return d.current&&(h=E=>{const{key:T,provide:x,text:C}=E.detail;if(f.current=C,C===""){x(Promise.resolve({matched:!1}));return}if(T===":"){const R=Ni(g.current,C);let q="";R.forEach(J=>{const{shortcode:P,url:N}=J;q+=`
                <li role="option" data-value="${Ne(P)}">
                <img src="${Ne(N)}" width="16" height="16" alt="" loading="lazy" /> 
                :${Ne(P)}:
              </li>`}),je.innerHTML=q,x(Promise.resolve({matched:R.length>0,fragment:je}));return}const D={"@":"accounts","#":"hashtags"}[T];x(new Promise(R=>{c({type:D,q:C,limit:5}).then(J=>{if(C!==f.current)return;const P=J[D]||J;let N="";P.forEach(M=>{var _e;const{name:ne,avatarStatic:re,displayName:se,username:B,acct:G,emojis:Q,history:be}=M,j=rn(se,Q);if(G)N+=`
                    <li role="option" data-value="${Ne(G)}">
                      <span class="avatar">
                        <img src="${Ne(re)}" width="16" height="16" alt="" loading="lazy" />
                      </span>
                      <span>
                        <b>${j||B}</b>
                        <br>@${Ne(G)}
                      </span>
                    </li>
                  `;else{const ae=(_e=be==null?void 0:be.reduce)==null?void 0:_e.call(be,(ce,ge)=>ce+ +ge.uses,0);N+=`
                    <li role="option" data-value="${Ne(ne)}">
                      <span class="grow">#<b>${Ne(ne)}</b></span>
                      ${ae?`<span class="count">${Je(ae)}</span>`:""}
                    </li>
                  `}je.innerHTML=N}),R({matched:P.length>0,fragment:je})})}))},d.current.addEventListener("text-expander-change",h),b=E=>{const{key:T,item:x}=E.detail;T===":"?E.detail.value=`:${x.dataset.value}:`:E.detail.value=`${T}${x.dataset.value}`},d.current.addEventListener("text-expander-value",b),y=E=>{const{input:T}=E.detail;if(o(T.value),n.current){const x=new Event("input",{bubbles:!0});n.current.dispatchEvent(x)}},d.current.addEventListener("text-expander-committed",y)),()=>{d.current&&(d.current.removeEventListener("text-expander-change",h),d.current.removeEventListener("text-expander-value",b),d.current.removeEventListener("text-expander-committed",y))}},[]),ue(()=>{const h=n.current;if(!h)return;new ResizeObserver(()=>{if(d.current){const{height:y}=h.getBoundingClientRect();d.current.style.height=y+"px"}}).observe(h)},[]);const m=X(),v=Gn(h=>{m.current.innerHTML=Di(h,{maxCharacters:r})+`
`},500);return e("text-expander",{ref:d,keys:"@ # :",class:"compose-field-container",children:[e("textarea",{class:"compose-field",autoCapitalize:"sentences",autoComplete:"on",autoCorrect:"on",spellCheck:"true",dir:"auto",rows:"6",cols:"50",...l,ref:n,name:"status",value:s,onKeyDown:h=>{const{key:b,target:y}=h;if(b==="Enter")try{const{value:E,selectionStart:T}=y,C=E.slice(0,T).split(`
`).slice(-1)[0];if(C&&/^\s*(-|\d+\.)\s/.test(C)){const[D,R,q,J,P]=C.match(/^(\s*)(-|\d+\.)(\s+)(.+)?/)||[];if(P){h.preventDefault();const[N]=q.match(/\d+/)||[],M=N?`${+N+1}.`:"-",ne=`
${R}${M}${J}`;y.setRangeText(ne,T,T);const re=T+ne.length;y.setSelectionRange(re,re)}else{const N=T-C.length;y.setRangeText("",N,T)}jn(y),y.dispatchEvent(new Event("input"))}}catch{}m.current.scrollTop=y.scrollTop},onInput:h=>{var E;const{target:b}=h,y=b.value;o(y),jn(b),(E=t.onInput)==null||E.call(t,h),v(y)},style:{width:"100%",height:"4em"},onScroll:h=>{const{scrollTop:b}=h.target;m.current.scrollTop=b}}),e("div",{ref:m,class:"compose-highlight","aria-hidden":"true"})]})});function Mi({maxCharacters:t=500,hidden:n}){const s=ht(A).composerCharacterCount,o=t-s;return n?e("meter",{class:"donut",hidden:!0}):e("meter",{class:`donut ${o<=-10?"explode":o<=0?"danger":o<=20?"warning":""}`,value:s,max:t,"data-left":o,title:`${o}/${t}`,style:{"--percentage":s/t*100}})}function Oi({attachment:t,disabled:n,lang:a,onDescriptionChange:s=()=>{},onRemove:o=()=>{}}){const r=sa("@mastodon/edit-media-attributes"),{type:c,id:l,file:p}=t,g=Ie(()=>p?URL.createObjectURL(p):t.url,[p,t.url]),[d,f]=W(t.description),m=c.split("/")[0],v=po(s,250),[w,h]=W(!1),b=X(null);ue(()=>{let E;return w&&b.current&&(E=setTimeout(()=>{b.current.focus()},100)),()=>{clearTimeout(E)}},[w]);const y=e(H,{children:l&&!r?e("div",{class:"media-desc",children:[e("span",{class:"tag",children:"Uploaded"}),e("p",{title:d,children:t.description||e("i",{children:"No description"})})]}):e("textarea",{ref:b,value:d||"",lang:a,placeholder:{image:"Image description",video:"Video description",audio:"Audio description"}[m],autoCapitalize:"sentences",autoComplete:"on",autoCorrect:"on",spellCheck:"true",dir:"auto",disabled:n,maxlength:"1500",onInput:E=>{const{value:T}=E.target;f(T),v(T)}})});return e(H,{children:[e("div",{class:"media-attachment",children:[e("div",{class:"media-preview",tabIndex:"0",onClick:()=>{h(!0)},children:m==="image"?e("img",{src:g,alt:""}):m==="video"||m==="gifv"?e("video",{src:g,playsinline:!0,muted:!0}):m==="audio"?e("audio",{src:g,controls:!0}):null}),y,e("div",{class:"media-aside",children:e("button",{type:"button",class:"plain close-button",disabled:n,onClick:o,children:e(L,{icon:"x"})})})]}),w&&e(ut,{class:"light",onClick:E=>{E.target===E.currentTarget&&h(!1)},children:e("div",{id:"media-sheet",class:"sheet sheet-max",children:[e("button",{type:"button",class:"sheet-close",onClick:()=>{h(!1)},children:e(L,{icon:"x"})}),e("header",{children:e("h2",{children:{image:"Edit image description",video:"Edit video description",audio:"Edit audio description"}[m]})}),e("main",{tabIndex:"-1",children:[e("div",{class:"media-preview",children:m==="image"?e("img",{src:g,alt:""}):m==="video"||m==="gifv"?e("video",{src:g,playsinline:!0,controls:!0}):m==="audio"?e("audio",{src:g,controls:!0}):null}),e("div",{class:"media-form",children:[y,e("footer",{children:e("button",{type:"button",class:"light block",onClick:()=>{h(!1)},children:"Done"})})]})]})]})})]})}function zi({lang:t,poll:n,disabled:a,onInput:s=()=>{},maxOptions:o,maxExpiration:r,minExpiration:c,maxCharactersPerOption:l}){const{options:p,expiresIn:g,multiple:d}=n;return e("div",{class:`poll ${d?"multiple":""}`,children:[e("div",{class:"poll-choices",children:p.map((f,m)=>e("div",{class:"poll-choice",children:[e("input",{required:!0,type:"text",value:f,disabled:a,maxlength:l,placeholder:`Choice ${m+1}`,lang:t,spellCheck:"true",dir:"auto",onInput:v=>{const{value:w}=v.target;p[m]=w,s(n)}}),e("button",{type:"button",class:"plain2 poll-button",disabled:a||p.length<=1,onClick:()=>{p.splice(m,1),s(n)},children:e(L,{icon:"x",size:"s"})})]},m))}),e("div",{class:"poll-toolbar",children:[e("button",{type:"button",class:"plain2 poll-button",disabled:a||p.length>=o,onClick:()=>{p.push(""),s(n)},children:"+"})," ",e("label",{class:"multiple-choices",children:[e("input",{type:"checkbox",checked:d,disabled:a,onChange:f=>{const{checked:m}=f.target;n.multiple=m,s(n)}})," ","Multiple choices"]}),e("label",{class:"expires-in",children:["Duration"," ",e("select",{value:g,disabled:a,onChange:f=>{const{value:m}=f.target;n.expiresIn=m,s(n)},children:Object.entries(pa).filter(([f,m])=>m>=c&&m<=r).map(([f,m])=>e("option",{value:m,children:f},m))})]})]}),e("div",{class:"poll-toolbar",children:e("button",{type:"button",class:"plain remove-poll-button",disabled:a,onClick:()=>{s(null)},children:"Remove poll"})})]})}function Ni(t,n){return n=n.toLowerCase(),t.sort((a,s)=>{let o=a.shortcode.toLowerCase(),r=s.shortcode.toLowerCase(),c=o.startsWith(n),l=r.startsWith(n),p=o.includes(n),g=r.includes(n);return c&&l?a.length-s.length:c?-1:l?1:p&&g?a.length-s.length:p?-1:g?1:0}).slice(0,5)}function Ne(t){return t.replace(/[&<>"']/g,function(n){return"&#"+n.charCodeAt(0)+";"})}function Vn(t){for(let n in t)(t[n]===null||t[n]===void 0)&&delete t[n];return t}function Bi({masto:t,instance:n,onClose:a=()=>{},onSelect:s=()=>{}}){const[o,r]=W("default"),c=X([]),[l,p]=W({}),g=Ie(()=>z.account.get("recentlyUsedCustomEmojis")||[]);return ue(()=>{r("loading"),(async()=>{try{const d=await t.v1.customEmojis.list(),f={"--recent--":g.filter(v=>d.find(w=>w.shortcode===v.shortcode))},m=[];d.forEach(v=>{var w,h;if(v.visibleInPicker){if((h=(w=c.current)==null?void 0:w.push)==null||h.call(w,v),!v.category){m.push(v);return}f[v.category]||(f[v.category]=[]),f[v.category].push(v)}}),m.length&&(f["--others--"]=m),p(f),r("default")}catch{r("error")}})()},[]),e("div",{id:"custom-emojis-sheet",class:"sheet",children:[!!a&&e("button",{type:"button",class:"sheet-close",onClick:a,children:e(L,{icon:"x"})}),e("header",{children:[e("b",{children:"Custom emojis"})," ",o==="loading"?e(et,{}):e("small",{class:"insignificant",children:[" • ",n]})]}),e("main",{children:e("div",{class:"custom-emojis-list",children:[o==="error"&&e("div",{class:"ui-state",children:e("p",{children:"Error loading custom emojis"})}),o==="default"&&Object.entries(l).map(([d,f])=>!!(f!=null&&f.length)&&e(H,{children:[e("div",{class:"section-header",children:{"--recent--":"Recently used","--others--":"Others"}[d]||d}),e("section",{children:f.map(m=>e("button",{type:"button",class:"plain4",onClick:()=>{a(),requestAnimationFrame(()=>{s(`:${m.shortcode}:`)});let v=z.account.get("recentlyUsedCustomEmojis")||[];const w=v.findIndex(h=>h.shortcode===m.shortcode);w!==-1?(v.splice(w,1),v.unshift(m)):(v.unshift(m),v=v.filter(h=>{var b,y;return(y=(b=c.current)==null?void 0:b.find)==null?void 0:y.call(b,E=>E.shortcode===h.shortcode)}),v=v.slice(0,10)),z.account.set("recentlyUsedCustomEmojis",v)},title:`:${m.shortcode}:`,children:e("picture",{children:[!!m.staticUrl&&e("source",{srcset:m.staticUrl,media:"(prefers-reduced-motion: reduce)"}),e("img",{class:"shortcode-emoji",src:m.url||m.staticUrl,alt:m.shortcode,width:"16",height:"16",loading:"lazy",decoding:"async"})]})},m))})]}))]})})]})}var ji={VITE_CLIENT_NAME:"IMSB.APP",VITE_CLIENT_ID:"app.imsb.app",VITE_WEBSITE:"https://app.imsb.app",VITE_APP_ENV:"production",BASE_URL:"./",MODE:"production",DEV:!1,PROD:!0,SSR:!1};const{VITE_CLIENT_NAME:Un}=ji;function Xi(t,n){function a(){const{currentLocation:s}=A,o=Array.isArray(n);let r=o?n:[];!o&&/:?\w+\?/.test(n)&&(r.push(n.replace(/(:\w+)\?/g,"$1")),r.push(n.replace(/\/?:\w+\?/g,"")));let c=!1;r.length?c=r.some(l=>Tn(l,s)):n&&(c=Tn(n,s)),c&&(document.title=t?`${t} / ${Un}`:Un)}tn(()=>{const s=Kn(A,"currentLocation",a);return a(),s},[t,n])}export{qi as $,Ze as A,si as B,Dn as C,Yi as D,dt as E,At as F,fo as G,Me as H,L as I,ei as J,ua as K,pt as L,ut as M,st as N,aa as O,ai as P,Xi as Q,mt as R,zn as S,Jo as T,Zi as U,Qn as V,Xn as W,Ln as X,Rn as Y,To as Z,Ke as _,Ve as a,Wi as a0,Ji as a1,Gi as a2,Se as b,Ce as c,z as d,oa as e,Gt as f,It as g,ia as h,sa as i,ra as j,jo as k,Jt as l,an as m,Je as n,ea as o,Rt as p,$t as q,Ki as r,A as s,Ro as t,ko as u,et as v,on as w,Sn as x,Tt as y,Ft as z};
//# sourceMappingURL=useTitle-lccZzNr3.js.map
function __vite__mapDeps(indexes) {
  if (!__vite__mapDeps.viteFileDeps) {
    __vite__mapDeps.viteFileDeps = []
  }
  return indexes.map((i) => __vite__mapDeps.viteFileDeps[i])
}